<extraction><id>#66</id><title>gps accuracy, jumps around on wake up.</title><description> My wife just swapped from ios to android (HTC one M8) and i have set it up similar to my iphone and her old iphone with a home waypoint of 500meters.iPhone i have never really had any problems but with the HTC i have noticed that when it wakes up 'sometimes' to report it's location the GPS accuracy will jump out to say a value &gt;1000m and then all of a sudden go down to &lt;500m. At which point owntracks will issue a leave and then shortly after an enter.I'm not sure if this is a hardware issue (we are both new to Android) or maybe something that can be fixed in owntracks, like a simple delay before reporting the waypoint change just to make sure the gps isn't just waking up.Matt.</description><comments>There is nothing much we can do about this. We simply request a location
from the Google Play Services and receive a result. Theoretically I could
throw away every first reported location with an accuracy &gt; x but tbh I
haven't seen the issue on my device. Thought as much.  Guess I'll just have to wait for HTC to fix it. 


For now I have just increased the waypoint radius to compensate. My experience has been that locations reported are sometimes good, other times less so (accuracy pretty high, as much as 3500m). I suggest you increase radius of your geo-fences to avoid issues. What I have found is that no mater what I change the radius waypoint to, ie. 500, 1000, 2000 it seems to report the accuracy at that value occasionally and then invokes a leave followed by an enter sometime after. Cut down example of one of many when the radius is set to 500m;Cut down example of one of many when the radius is set to 1000m;And basically it is the same again when I change it to 2000meters, the acc field shows up as 2000. Interesting, I am having the same problem with an HTC One M7. I thought it was something to do with WIFI access points in my home but it looks like it could be a problem in the HTC firmware instead. I recently upgraded to the latest Sense 6 + Android KitKat and now I think about it, these problems have started since then. Thanks for the pointers Matt - good to know I am not alone! @sumnerboy12 what is acc when these enter/leave events happen? 75, which just so happens to be my waypoint radius... Try changing the radius of the waypoint and see if keeps happening. I have tried changing it previously - upped it to 100 - but it still happened. It seems to be playing ball currently but I am monitoring that MQTT topic so will see if it starts happening again today and let you know. Thinking it could be something to do with the latest update to the HTC One software? Could be but not sure as the phone is only new (htc one m8 and my wife uses it) Ok - so I changed the radius to 100m and everything was fine all day - although the phone didn't really move much - was in my home office all day. I left after work and returned 30mins later and since then it has been exhibiting this problem again. @binarybucks when you publish an enter/leave event in the Android app do you use the waypoint lat/lon/radius in the message, or just whatever is reported by the Location Services API? The reason I ask is there seems to be different behaviour in the iOS and Android apps - the iOS uses the devices current lat/lon/acc in the waypoint event messages, but I always see the waypoint lat/lon/radius on my HTC (see above). Just wondering if this is by design or a symptom of the problem @matbor and I are seeing. This is by design (that was requested quite some time ago). It publishes
the waypoint data (see
https://github.com/owntracks/android/blob/master/src/main/java/st/alr/mqttitude/services/ServiceLocator.java#L324
) Thanks Alex - figured that was the case. So it really just boils down to something going wrong in the location services on these HTC phones. I can't believe there is not more chatter about this but I am struggling to find much out there reporting similar issues.  I have had to drop my HTC One (M7) in for repair (camera problem). They gave me a Sony Xperia load-phone and I have installed OwnTracks. It is exhibiting the same behaviour as my HTC One - i.e. I get enter/leave events when the phone is sitting on my kitchen bench. Sometimes every minute, sometimes every hour.This phone is running Android 4.1.2. I thought it must have been something to do with the HTC (since @matbor is seeing the same thing on his wife's HTC One M8) but it appears to be more generic.Only started happening in the last few months.  FWIW, I spent a week pretty immobile in a hospital room. On the third day I noticed that my iOS (not Android!) device kept alerting enter/leave for a waypoint I'd set half a year ago just 500m away; this happened every few minutes.

I finally changed the waypoint to increase the radius to 800.

What I'm trying to say is that the apps have no chance; they get what they're given in terms of GPS accuracy. Yep - completely agree. But the thing is this used to work just fine up until a few months ago. And now I have tried two different phones and they both exhibit the same behaviour (different models but both Android). My initial thought, and I think I am going back to this now, is that somehow Google has got some stale/bad location data cached for me and when I jump on certain cell towers, or 'see' certain WIFI networks it mistakenly assumes I am in the wrong place. I haven't been able to find anywhere online that explains how to clear this location cache. I could of course be completely barking up the wrong tree... no updates and probably not an issue on our side. Reopen if necessary.  Still having problems, so is Ben, but have yet to come up with a solution. Yep still a real PITA. But I agree, I don't think it is OwnTracks itself, but Googles location services. I wish there was some way to clear Googles cache of location/WIFI/cell tower mappings as I have a feeling these are a bit messed up for me when I am around my house. Hence my location starts jumping around as I move from cell tower to WIFI network. Only a guess tho... (iPhone) I noticed similar behaviours. Wondering if it's possible to get location from GPS only, not assisted by Wifi/cell tower: less chance to have full coverage indoor, but more consistent values. theoretically that's possible but believe me, the results are not more
consistent ;)</comments></extraction>