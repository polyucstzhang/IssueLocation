


<!DOCTYPE html>
<html lang="en" class="">
  <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# object: http://ogp.me/ns/object# article: http://ogp.me/ns/article# profile: http://ogp.me/ns/profile#">
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Language" content="en">
    <meta name="viewport" content="width=1020">
    
    
    <title>MapView resize OutOfMemory at createBitmap · Issue #378 · mapsforge/mapsforge · GitHub</title>
    <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub">
    <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-114.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-144.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144.png">
    <meta property="fb:app_id" content="1401488693436528">

      <meta content="@github" name="twitter:site" /><meta content="summary" name="twitter:card" /><meta content="MapView resize OutOfMemory at createBitmap · Issue #378 · mapsforge/mapsforge" name="twitter:title" /><meta content="From devemu...@gmail.com on November 25, 2012 19:35:54

What steps will reproduce the problem? 1. I have a map view with a map file loaded.
2. I resize programmatically the map view window, trying ..." name="twitter:description" /><meta content="https://avatars2.githubusercontent.com/u/430042?v=3&amp;s=400" name="twitter:image:src" />
      <meta content="GitHub" property="og:site_name" /><meta content="object" property="og:type" /><meta content="https://avatars2.githubusercontent.com/u/430042?v=3&amp;s=400" property="og:image" /><meta content="MapView resize OutOfMemory at createBitmap · Issue #378 · mapsforge/mapsforge" property="og:title" /><meta content="https://github.com/mapsforge/mapsforge/issues/378" property="og:url" /><meta content="From devemu...@gmail.com on November 25, 2012 19:35:54

What steps will reproduce the problem? 1. I have a map view with a map file loaded.
2. I resize programmatically the map view window, trying ..." property="og:description" />
      <meta name="browser-stats-url" content="https://api.github.com/_private/browser/stats">
    <meta name="browser-errors-url" content="https://api.github.com/_private/browser/errors">
    <link rel="assets" href="https://assets-cdn.github.com/">
    
    <meta name="pjax-timeout" content="1000">
    

    <meta name="msapplication-TileImage" content="/windows-tile.png">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="selected-link" value="repo_issues" data-pjax-transient>

        <meta name="google-analytics" content="UA-3769691-2">

    <meta content="collector.githubapp.com" name="octolytics-host" /><meta content="collector-cdn.github.com" name="octolytics-script-host" /><meta content="github" name="octolytics-app-id" /><meta content="9E84FF69:480A:2795D6E:55DB6424" name="octolytics-dimension-request_id" />
    
    <meta content="Rails, view, issues#show" data-pjax-transient="true" name="analytics-event" />
    <meta class="js-ga-set" name="dimension1" content="Logged Out">
      <meta class="js-ga-set" name="dimension4" content="Current repo nav">
    <meta name="is-dotcom" content="true">
        <meta name="hostname" content="github.com">
    <meta name="user-login" content="">

      <link rel="icon" sizes="any" mask href="https://assets-cdn.github.com/pinned-octocat.svg">
      <meta name="theme-color" content="#4078c0">
      <link rel="icon" type="image/x-icon" href="https://assets-cdn.github.com/favicon.ico">

    <!-- </textarea> --><!-- '"` --><meta content="authenticity_token" name="csrf-param" />
<meta content="WhYmvFt0orUhr7ynAG2eHV/4Qytw1cN8k+TYBr1JDHLWWzlXzwiNxDu6vaQkGUHXVaRQF3xk39jKv+cVOCFpjQ==" name="csrf-token" />
    

    <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/github/index-17ad0ea72cb80a46ba6d1bd6e3c69789acb0e1c0cae43beb90477759cce1bdfd.css" media="all" rel="stylesheet" />
    <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/github2/index-9f11074052a3551cd7bae2fba8b949844d2d7329927a7f1cb5a2c2a821f016e0.css" media="all" rel="stylesheet" />
    
    


    <meta http-equiv="x-pjax-version" content="239d32d0023038613a9092dfdd8544d0">

      
  <meta name="description" content="The new home of mapsforge.">
  <meta name="go-import" content="github.com/mapsforge/mapsforge git https://github.com/mapsforge/mapsforge.git">

  <meta content="430042" name="octolytics-dimension-user_id" /><meta content="mapsforge" name="octolytics-dimension-user_login" /><meta content="26262349" name="octolytics-dimension-repository_id" /><meta content="mapsforge/mapsforge" name="octolytics-dimension-repository_nwo" /><meta content="true" name="octolytics-dimension-repository_public" /><meta content="false" name="octolytics-dimension-repository_is_fork" /><meta content="26262349" name="octolytics-dimension-repository_network_root_id" /><meta content="mapsforge/mapsforge" name="octolytics-dimension-repository_network_root_nwo" />
  <link href="https://github.com/mapsforge/mapsforge/commits/master.atom" rel="alternate" title="Recent Commits to mapsforge:master" type="application/atom+xml">

  </head>


  <body class="logged_out  env-production  vis-public">
    <a href="#start-of-content" tabindex="1" class="accessibility-aid js-skip-to-content">Skip to content</a>
    <div class="wrapper">
      
      
      



        
        <div class="header header-logged-out" role="banner">
  <div class="container clearfix">

    <a class="header-logo-wordmark" href="https://github.com/" data-ga-click="(Logged out) Header, go to homepage, icon:logo-wordmark">
      <span class="mega-octicon octicon-logo-github"></span>
    </a>

    <div class="header-actions" role="navigation">
        <a class="btn btn-primary" href="/join" data-ga-click="(Logged out) Header, clicked Sign up, text:sign-up">Sign up</a>
      <a class="btn" href="/login?return_to=%2Fmapsforge%2Fmapsforge%2Fissues%2F378" data-ga-click="(Logged out) Header, clicked Sign in, text:sign-in">Sign in</a>
    </div>

    <div class="site-search repo-scope js-site-search" role="search">
      <!-- </textarea> --><!-- '"` --><form accept-charset="UTF-8" action="/mapsforge/mapsforge/search" class="js-site-search-form" data-global-search-url="/search" data-repo-search-url="/mapsforge/mapsforge/search" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
  <label class="js-chromeless-input-container form-control">
    <div class="scope-badge">This repository</div>
    <input type="text"
      class="js-site-search-focus js-site-search-field is-clearable chromeless-input"
      data-hotkey="s"
      name="q"
      placeholder="Search"
      aria-label="Search this repository"
      data-global-scope-placeholder="Search GitHub"
      data-repo-scope-placeholder="Search"
      tabindex="1"
      autocapitalize="off">
  </label>
</form>
    </div>

      <ul class="header-nav left" role="navigation">
          <li class="header-nav-item">
            <a class="header-nav-link" href="/explore" data-ga-click="(Logged out) Header, go to explore, text:explore">Explore</a>
          </li>
          <li class="header-nav-item">
            <a class="header-nav-link" href="/features" data-ga-click="(Logged out) Header, go to features, text:features">Features</a>
          </li>
          <li class="header-nav-item">
            <a class="header-nav-link" href="https://enterprise.github.com/" data-ga-click="(Logged out) Header, go to enterprise, text:enterprise">Enterprise</a>
          </li>
          <li class="header-nav-item">
            <a class="header-nav-link" href="/pricing" data-ga-click="(Logged out) Header, go to pricing, text:pricing">Pricing</a>
          </li>
      </ul>

  </div>
</div>



      <div id="start-of-content" class="accessibility-aid"></div>
          <div class="site" itemscope itemtype="http://schema.org/WebPage">
    <div id="js-flash-container">
      
    </div>
    <div class="pagehead repohead instapaper_ignore readability-menu">
      <div class="container">

        <div class="clearfix">
          
<ul class="pagehead-actions">

  <li>
      <a href="/login?return_to=%2Fmapsforge%2Fmapsforge"
    class="btn btn-sm btn-with-count tooltipped tooltipped-n"
    aria-label="You must be signed in to watch a repository" rel="nofollow">
    <span class="octicon octicon-eye"></span>
    Watch
  </a>
  <a class="social-count" href="/mapsforge/mapsforge/watchers">
    35
  </a>

  </li>

  <li>
      <a href="/login?return_to=%2Fmapsforge%2Fmapsforge"
    class="btn btn-sm btn-with-count tooltipped tooltipped-n"
    aria-label="You must be signed in to star a repository" rel="nofollow">
    <span class="octicon octicon-star"></span>
    Star
  </a>

    <a class="social-count js-social-count" href="/mapsforge/mapsforge/stargazers">
      161
    </a>

  </li>

    <li>
      <a href="/login?return_to=%2Fmapsforge%2Fmapsforge"
        class="btn btn-sm btn-with-count tooltipped tooltipped-n"
        aria-label="You must be signed in to fork a repository" rel="nofollow">
        <span class="octicon octicon-repo-forked"></span>
        Fork
      </a>
      <a href="/mapsforge/mapsforge/network" class="social-count">
        82
      </a>
    </li>
</ul>

          <h1 itemscope itemtype="http://data-vocabulary.org/Breadcrumb" class="entry-title public ">
  <span class="mega-octicon octicon-repo"></span>
  <span class="author"><a href="/mapsforge" class="url fn" itemprop="url" rel="author"><span itemprop="title">mapsforge</span></a></span><!--
--><span class="path-divider">/</span><!--
--><strong><a href="/mapsforge/mapsforge" data-pjax="#js-repo-pjax-container">mapsforge</a></strong>

  <span class="page-context-loader">
    <img alt="" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
  </span>

</h1>
        
        </div>
      </div>
    </div>

    <div class="container">
      <div class="repository-with-sidebar repo-container new-discussion-timeline ">
        <div class="repository-sidebar clearfix">
          
<nav class="sunken-menu repo-nav js-repo-nav js-sidenav-container-pjax js-octicon-loaders"
     role="navigation"
     data-pjax="#js-repo-pjax-container"
     data-issue-count-url="/mapsforge/mapsforge/issues/counts">
  <ul class="sunken-menu-group">
    <li class="tooltipped tooltipped-w" aria-label="Code">
      <a href="/mapsforge/mapsforge" aria-label="Code" class="js-selected-navigation-item sunken-menu-item" data-hotkey="g c" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches /mapsforge/mapsforge">
        <span class="octicon octicon-code"></span> <span class="full-word">Code</span>
        <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
</a>    </li>

      <li class="tooltipped tooltipped-w" aria-label="Issues">
        <a href="/mapsforge/mapsforge/issues" aria-label="Issues" aria-selected="true" class="js-selected-navigation-item selected sunken-menu-item" data-hotkey="g i" data-selected-links="repo_issues repo_labels repo_milestones /mapsforge/mapsforge/issues">
          <span class="octicon octicon-issue-opened"></span> <span class="full-word">Issues</span>
          <span class="js-issue-replace-counter"></span>
          <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>

    <li class="tooltipped tooltipped-w" aria-label="Pull requests">
      <a href="/mapsforge/mapsforge/pulls" aria-label="Pull requests" class="js-selected-navigation-item sunken-menu-item" data-hotkey="g p" data-selected-links="repo_pulls /mapsforge/mapsforge/pulls">
          <span class="octicon octicon-git-pull-request"></span> <span class="full-word">Pull requests</span>
          <span class="js-pull-replace-counter"></span>
          <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
</a>    </li>

      <li class="tooltipped tooltipped-w" aria-label="Wiki">
        <a href="/mapsforge/mapsforge/wiki" aria-label="Wiki" class="js-selected-navigation-item sunken-menu-item" data-hotkey="g w" data-selected-links="repo_wiki /mapsforge/mapsforge/wiki">
          <span class="octicon octicon-book"></span> <span class="full-word">Wiki</span>
          <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>
  </ul>
  <div class="sunken-menu-separator"></div>
  <ul class="sunken-menu-group">

    <li class="tooltipped tooltipped-w" aria-label="Pulse">
      <a href="/mapsforge/mapsforge/pulse" aria-label="Pulse" class="js-selected-navigation-item sunken-menu-item" data-selected-links="pulse /mapsforge/mapsforge/pulse">
        <span class="octicon octicon-pulse"></span> <span class="full-word">Pulse</span>
        <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
</a>    </li>

    <li class="tooltipped tooltipped-w" aria-label="Graphs">
      <a href="/mapsforge/mapsforge/graphs" aria-label="Graphs" class="js-selected-navigation-item sunken-menu-item" data-selected-links="repo_graphs repo_contributors /mapsforge/mapsforge/graphs">
        <span class="octicon octicon-graph"></span> <span class="full-word">Graphs</span>
        <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
</a>    </li>
  </ul>


</nav>

            <div class="only-with-full-nav">
                
<div class="js-clone-url clone-url open"
  data-protocol-type="http">
  <h3><span class="text-emphasized">HTTPS</span> clone URL</h3>
  <div class="input-group js-zeroclipboard-container">
    <input type="text" class="input-mini input-monospace js-url-field js-zeroclipboard-target"
           value="https://github.com/mapsforge/mapsforge.git" readonly="readonly" aria-label="HTTPS clone URL">
    <span class="input-group-button">
      <button aria-label="Copy to clipboard" class="js-zeroclipboard btn btn-sm zeroclipboard-button tooltipped tooltipped-s" data-copied-hint="Copied!" type="button"><span class="octicon octicon-clippy"></span></button>
    </span>
  </div>
</div>

  
<div class="js-clone-url clone-url "
  data-protocol-type="subversion">
  <h3><span class="text-emphasized">Subversion</span> checkout URL</h3>
  <div class="input-group js-zeroclipboard-container">
    <input type="text" class="input-mini input-monospace js-url-field js-zeroclipboard-target"
           value="https://github.com/mapsforge/mapsforge" readonly="readonly" aria-label="Subversion checkout URL">
    <span class="input-group-button">
      <button aria-label="Copy to clipboard" class="js-zeroclipboard btn btn-sm zeroclipboard-button tooltipped tooltipped-s" data-copied-hint="Copied!" type="button"><span class="octicon octicon-clippy"></span></button>
    </span>
  </div>
</div>



  <div class="clone-options">You can clone with
    <!-- </textarea> --><!-- '"` --><form accept-charset="UTF-8" action="/users/set_protocol?protocol_selector=http&amp;protocol_type=clone" class="inline-form js-clone-selector-form " data-form-nonce="85544455406b2df294e43c3dcc3f8212bd7b7afc" data-remote="true" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="14WpFMfADiF5N/Kxu6126/AmXHcD1Bi0wHPJStXaMhRCCf3dHqMlZVHJn/IL4JE1kK97bzcCDchz0tn21eVhDQ==" /></div><button class="btn-link js-clone-selector" data-protocol="http" type="submit">HTTPS</button></form> or <!-- </textarea> --><!-- '"` --><form accept-charset="UTF-8" action="/users/set_protocol?protocol_selector=subversion&amp;protocol_type=clone" class="inline-form js-clone-selector-form " data-form-nonce="85544455406b2df294e43c3dcc3f8212bd7b7afc" data-remote="true" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="h6ELNAOujRrVrdBdgKmhGrqy/VC9j+Os9crstvc94E5NCmCMVMHLeJfuYU9KxFwQ3FYCALAF5BfpgUZ5gZcCXg==" /></div><button class="btn-link js-clone-selector" data-protocol="subversion" type="submit">Subversion</button></form>.
    <a href="https://help.github.com/articles/which-remote-url-should-i-use" class="help tooltipped tooltipped-n" aria-label="Get help on which URL is right for you.">
      <span class="octicon octicon-question"></span>
    </a>
  </div>

              <a href="/mapsforge/mapsforge/archive/master.zip"
                 class="btn btn-sm sidebar-button"
                 aria-label="Download the contents of mapsforge/mapsforge as a zip file"
                 title="Download the contents of mapsforge/mapsforge as a zip file"
                 rel="nofollow">
                <span class="octicon octicon-cloud-download"></span>
                Download ZIP
              </a>
            </div>
        </div>
        <div id="js-repo-pjax-container" class="repository-content context-loader-container" data-pjax-container>

          
<style type="text/css" media="screen">
  span.labelstyle-FFFFFF, .linked-labelstyle-FFFFFF {  background-color: #FFFFFF !important;  color: #333333 !important;}.labelstyle-FFFFFF.selected {  background-color: #FFFFFF !important;  color: #333333 !important;}.label-select-menu .labelstyle-FFFFFF.selected {  background:rgba(255, 255, 255, 0.12) !important;  color: #999999 !important;}

span.labelstyle-fc2929, .linked-labelstyle-fc2929 {  background-color: #fc2929 !important;  color: #fff !important;}.labelstyle-fc2929.selected {  background-color: #fc2929 !important;  color: #fff !important;}.label-select-menu .labelstyle-fc2929.selected {  background:rgba(252, 41, 41, 0.12) !important;  color: #991818 !important;}

span.labelstyle-cccccc, .linked-labelstyle-cccccc {  background-color: #cccccc !important;  color: #333333 !important;}.labelstyle-cccccc.selected {  background-color: #cccccc !important;  color: #333333 !important;}.label-select-menu .labelstyle-cccccc.selected {  background:rgba(204, 204, 204, 0.12) !important;  color: #999999 !important;}

span.labelstyle-84b6eb, .linked-labelstyle-84b6eb {  background-color: #84b6eb !important;  color: #1c2733 !important;}.labelstyle-84b6eb.selected {  background-color: #84b6eb !important;  color: #1c2733 !important;}.label-select-menu .labelstyle-84b6eb.selected {  background:rgba(132, 182, 235, 0.12) !important;  color: #557699 !important;}

span.labelstyle-159818, .linked-labelstyle-159818 {  background-color: #159818 !important;  color: #fff !important;}.labelstyle-159818.selected {  background-color: #159818 !important;  color: #fff !important;}.label-select-menu .labelstyle-159818.selected {  background:rgba(21, 152, 24, 0.12) !important;  color: #159918 !important;}

span.labelstyle-e6e6e6, .linked-labelstyle-e6e6e6 {  background-color: #e6e6e6 !important;  color: #333333 !important;}.labelstyle-e6e6e6.selected {  background-color: #e6e6e6 !important;  color: #333333 !important;}.label-select-menu .labelstyle-e6e6e6.selected {  background:rgba(230, 230, 230, 0.12) !important;  color: #999999 !important;}

span.labelstyle-cc317c, .linked-labelstyle-cc317c {  background-color: #cc317c !important;  color: #fff !important;}.labelstyle-cc317c.selected {  background-color: #cc317c !important;  color: #fff !important;}.label-select-menu .labelstyle-cc317c.selected {  background:rgba(204, 49, 124, 0.12) !important;  color: #99245c !important;}

span.labelstyle-ffffff, .linked-labelstyle-ffffff {  background-color: #ffffff !important;  color: #333333 !important;}.labelstyle-ffffff.selected {  background-color: #ffffff !important;  color: #333333 !important;}.label-select-menu .labelstyle-ffffff.selected {  background:rgba(255, 255, 255, 0.12) !important;  color: #999999 !important;}
</style>

<div class="issues-listing" data-pjax>
  <div class="context-loader large-format-loader">
  <p><img alt="" height="64" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-128.gif" width="64" /></p>
  <p>Loading…</p>
</div>

    <div id="show_issue" class="js-issues-results">

    
  <div
    id="partial-discussion-header"
    class="gh-header js-details-container js-socket-channel js-updatable-content issue"
    data-channel="mapsforge/mapsforge:issue:47943178"
    data-url="/mapsforge/mapsforge/issues/378/show_partial?partial=issues%2Ftitle">

  <div class="gh-header-show ">
      <div class="gh-header-actions">
          <a href="/mapsforge/mapsforge/issues/new" class="btn btn-sm btn-primary right" data-hotkey="c">
            New issue
          </a>
      </div>

    <h1 class="gh-header-title">
      <span class="js-issue-title">MapView resize OutOfMemory at createBitmap</span>
      <span class="gh-header-number">#378</span>
    </h1>
  </div>


  <div class="flex-table gh-header-meta">
    <div class="flex-table-item">
        <div class="state state-closed">
          <span class="octicon octicon-issue-closed"></span>
          Closed
        </div>
    </div>
    <div class="flex-table-item flex-table-item-primary">
        <a href="/mapsforge" class="author">mapsforge</a> opened this <span class="noun">Issue</span> <time datetime="2014-11-06T09:58:38Z" is="relative-time">Nov 6, 2014</time>
        &middot; 17 comments
    </div>
  </div>
</div>


    <div id="discussion_bucket" class="tab-content clearfix">
      <div class="discussion-sidebar ">
        <div id="partial-discussion-stats"
     class="discussion-stats js-socket-channel js-updatable-content"
     data-channel="mapsforge/mapsforge:issue:47943178"
     data-url="/mapsforge/mapsforge/issues/378/show_partial?partial=issues%2Fdiscussion_stats">
</div>

<div class="discussion-sidebar-item sidebar-labels js-discussion-sidebar-item">
  <!-- </textarea> --><!-- '"` --><form accept-charset="UTF-8" action="/mapsforge/mapsforge/issues/378?partial=issues%2Fsidebar%2Fshow%2Flabels" class="js-issue-sidebar-form" data-form-nonce="85544455406b2df294e43c3dcc3f8212bd7b7afc" data-remote="true" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="_method" type="hidden" value="put" /><input name="authenticity_token" type="hidden" value="KMAaMBZZoeAmkAh4gyHZ8djYyuW76GTwwyDtlG9YyMzYTKT1nHO2IxiZJ0/vbG8hjURECCFt6y/KBjkSJAm1NQ==" /></div>
      
  <h3 class="discussion-sidebar-heading">
    Labels
  </h3>


    <div class="labels css-truncate">
      <a href="/mapsforge/mapsforge/labels/bug" class="label css-truncate-target linked-labelstyle-fc2929" title="bug">bug</a>
  <a href="/mapsforge/mapsforge/labels/imported" class="label css-truncate-target linked-labelstyle-FFFFFF" title="imported">imported</a>
  <a href="/mapsforge/mapsforge/labels/Priority-Medium" class="label css-truncate-target linked-labelstyle-FFFFFF" title="Priority-Medium">Priority-Medium</a>

</div>

</form></div>

<div class="discussion-sidebar-item sidebar-milestone js-discussion-sidebar-item">
  <!-- </textarea> --><!-- '"` --><form accept-charset="UTF-8" action="/mapsforge/mapsforge/issues/378/set_milestone?partial=issues%2Fsidebar%2Fshow%2Fmilestone" class="js-issue-sidebar-form" data-form-nonce="85544455406b2df294e43c3dcc3f8212bd7b7afc" data-remote="true" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="_method" type="hidden" value="put" /><input name="authenticity_token" type="hidden" value="lVS181ESNvOMke3iogGsYnywU1XhJP0/y4Xx/vI8Z/2Ms/h/o7Z9biX2OTEBecMHujthGka9NAEMp9HqxIOpMw==" /></div>
    
  <h3 class="discussion-sidebar-heading">
    Milestone
  </h3>


      No milestone

</form></div>

<div class="discussion-sidebar-item sidebar-assignee js-discussion-sidebar-item">
  <!-- </textarea> --><!-- '"` --><form accept-charset="UTF-8" action="/mapsforge/mapsforge/issues/378?partial=issues%2Fsidebar%2Fshow%2Fassignee" class="js-issue-sidebar-form" data-form-nonce="85544455406b2df294e43c3dcc3f8212bd7b7afc" data-remote="true" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="_method" type="hidden" value="put" /><input name="authenticity_token" type="hidden" value="+Wnwz4+Jag9omSk1WXym5c9+NQVHPYhaR51DLaKUSSzcNMZPxXUQxiN9vMKzlyau5pmybxJtpVC448r0C436Qw==" /></div>
    
  <h3 class="discussion-sidebar-heading">
    Assignee
  </h3>


    <span class="css-truncate">
      No one assigned
</span>

</form></div>


<div id="partial-users-participants" class="discussion-sidebar-item js-socket-channel js-updatable-content"
    data-channel="mapsforge/mapsforge:issue:47943178"
      data-url="/mapsforge/mapsforge/issues/378/show_partial?partial=issues%2Fparticipants"
  >
  <div class="participation">

    <h3 class="discussion-sidebar-heading">
      1 participant
    </h3>
    <div class="participation-avatars">
        <a class="participant-avatar tooltipped tooltipped-s" aria-label="mapsforge" href="/mapsforge"><img alt="@mapsforge" class="avatar" height="20" src="https://avatars3.githubusercontent.com/u/430042?v=3&amp;s=40" width="20" /> </a>
    </div>
  </div>
</div>




      </div>

      <div class="discussion-timeline js-quote-selection-container">

        <div class="js-discussion js-socket-channel" data-channel="mapsforge/mapsforge:marked-as-read:47943178">
          

  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/mapsforge"><img alt="@mapsforge" class="timeline-comment-avatar" height="48" src="https://avatars3.githubusercontent.com/u/430042?v=3&amp;s=96" width="48" /></a>
    <div id="issue-47943178"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container owner-comment"
     data-body-version="e0e0731654a550f72ed41620fa1f1219">

  <div class="timeline-comment-header ">


    <span class="timeline-comment-label">Owner</span>


  <div class="timeline-comment-header-text">

    <strong>
      <a href="/mapsforge" class="author">mapsforge</a>
    </strong>

    commented

    <a href="#issue-47943178" class="timestamp">
      <time datetime="2014-11-06T09:58:38Z" is="relative-time">Nov 6, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body markdown-format js-comment-body">
          <p><em>From <a href="https://code.google.com/u/109528871084914010993/">devemu...@gmail.com</a> on November 25, 2012 19:35:54</em></p>

<p>What steps will reproduce the problem? 1. I have a map view with a map file loaded.<br>
2. I resize programmatically the map view window, trying both ways from full screen to smaller window and from smaller window to full screen.<br>
3. I try on tablets or emulator with big resolution (~ 1280 x 800) What is the expected output? What do you see instead? I expect the map to resize and function properly.<br>
Instead I see "OutOfMemoryError: bitmap size exceeds VM budget"" at FrameBuffer and/or OverlayController at the points where they re-create their bitmaps after the size change. What version of the product are you using? On what operating system? I use the latest trunk version. Please provide any additional information below. In smaller resolutions I see no out of memory errors at map view resize. I don't know if the recycle of the bitmaps before their recreation is not fast enough and there are out of memory errors at map view resize at large resolutions.</p>

<p><em>Original issue: <a href="http://code.google.com/p/mapsforge/issues/detail?id=378">http://code.google.com/p/mapsforge/issues/detail?id=378</a></em></p>
      </div>
    </div>

  </div>
</div>

  </div>
  
      


  <div class="discussion-item discussion-item-labeled">
    <div class="discussion-item-header" id="event-189209934">

      <span class="octicon octicon-tag discussion-item-icon"></span>
      <img alt="@mapsforge" class="avatar" height="16" src="https://avatars0.githubusercontent.com/u/430042?v=3&amp;s=32" width="16" />
      <a href="/mapsforge" class="author">mapsforge</a>
        added <span class="label-color" style="background-color: #fc2929;" title="by mapsforge at 2014-11-06 09:58:38"><a href="/mapsforge/mapsforge/labels/bug" style="color: #fff">bug</a></span> <span class="label-color" style="background-color: #FFFFFF;" title="by mapsforge at 2014-11-06 09:58:38"><a href="/mapsforge/mapsforge/labels/imported" style="color: #333333">imported</a></span> <span class="label-color" style="background-color: #FFFFFF;" title="by mapsforge at 2014-11-06 09:58:38"><a href="/mapsforge/mapsforge/labels/Priority-Medium" style="color: #333333">Priority-Medium</a></span> labels <a href="https://github.com/mapsforge/mapsforge/issues/378#event-189209934" class="timestamp"><time class="timestamp" datetime="2014-11-06T09:58:38Z" is="relative-time">Nov 6, 2014</time></a>
    </div>
  </div>



  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/mapsforge"><img alt="@mapsforge" class="timeline-comment-avatar" height="48" src="https://avatars3.githubusercontent.com/u/430042?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-61953957"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container owner-comment"
     data-body-version="7f2020195d3c97382774be072cd12e62">

  <div class="timeline-comment-header ">


    <span class="timeline-comment-label">Owner</span>


  <div class="timeline-comment-header-text">

    <strong>
      <a href="/mapsforge" class="author">mapsforge</a>
    </strong>

    commented

    <a href="#issuecomment-61953957" class="timestamp">
      <time datetime="2014-11-06T09:58:39Z" is="relative-time">Nov 6, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body markdown-format js-comment-body">
          <p><em>From <a href="https://code.google.com/u/113327232123772191739/">LudwigBr...@gmail.com</a> on December 19, 2012 00:17:43</em></p>

<p>I have pushed a set of changes to my mapsforge-clone on the 'memory' branch, see <a href="https://code.google.com/r/ludwigbrinckmann-mapsforge/source/list?name=memory">https://code.google.com/r/ludwigbrinckmann-mapsforge/source/list?name=memory</a> These changes are on top of the current head in the official repository. </p>

<p>My understanding of the problem is that bitmaps are not cleared up as the underlying infrastructure still holds some references to them. Any new assignment actually clears those references, but by that time it is already too late as the allocation preceding the assignment fails. One might call this memory spikes due to double allocation. (It would actually be much better if Android offered a way of resizing bitmaps, i.e. change their width/height without actually going through the reallocation process).</p>

<p>The fixes in address this by making sure that recycle() is called on all bitmaps when the orientation changes and to also null out the canvas onto which they are drawn. </p>

<p>My own tests now run to completion on Android versions &gt;= 2.3, I see crashes on because of memory issues on 2.2. I do not think this is actually Android version related, it is probably because the devices just have a bit more memory and are so able to survive the memory spikes.</p>

<p>It would be good if people who had memory issues would checkout the branch and give some feedback if this resolves any of their issues or creates new problems.</p>

<p>Note that the fix provided in this branch does not include the fix for the deadlock problem.</p>

<p>Apologies, if you already read another version of this on the mailing list, but not all people follow that list.</p>

<p><strong>Status:</strong> Started<br><br>
  <strong>Labels:</strong> -Priority-Medium Priority-High  </p>
      </div>
    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/mapsforge"><img alt="@mapsforge" class="timeline-comment-avatar" height="48" src="https://avatars3.githubusercontent.com/u/430042?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-61953961"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container owner-comment"
     data-body-version="aef152a5e849de532336d3fbea3e2ac6">

  <div class="timeline-comment-header ">


    <span class="timeline-comment-label">Owner</span>


  <div class="timeline-comment-header-text">

    <strong>
      <a href="/mapsforge" class="author">mapsforge</a>
    </strong>

    commented

    <a href="#issuecomment-61953961" class="timestamp">
      <time datetime="2014-11-06T09:58:40Z" is="relative-time">Nov 6, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body markdown-format js-comment-body">
          <p><em>From <a href="https://code.google.com/u/109528871084914010993/">devemu...@gmail.com</a> on December 19, 2012 02:41:25</em></p>

<p>Hi,</p>

<p>I try your clone version. Unfortunately I still seet memory issues at devices with large resolutions ~720p</p>

<p>Also I see the known phenomenon of:<br>
java.lang.OutOfMemoryError: bitmap size exceeds VM budget<br>
    at android.graphics.Bitmap.nativeCreate(Native Method)<br>
    at android.graphics.Bitmap.createBitmap(Bitmap.java:477)<br>
    at org.mapsforge.android.maps.overlay.OverlayController.changeSize(OverlayController.java:148)<br>
that occurs every second start of application. That is 1st time the app starts normally - I close it, 2nd with OOM error, 3rd normally - I close it, 4th with OOM etc.<br>
After the OOM error the android VM closes the app, probably clearing its heap, so next time there is free memory to use?<br>
At app close there are still leftovers of bitmaps that occupy memory?</p>

<p>I want to make more tests on the tablet I initially noticed the OOM (a LG Optimus Pad V900) but it isn't available right now.</p>

<p>Thanks.</p>
      </div>
    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/mapsforge"><img alt="@mapsforge" class="timeline-comment-avatar" height="48" src="https://avatars3.githubusercontent.com/u/430042?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-61953965"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container owner-comment"
     data-body-version="b9cbb6a377bf1fc499a2f1a9a92ef6f6">

  <div class="timeline-comment-header ">


    <span class="timeline-comment-label">Owner</span>


  <div class="timeline-comment-header-text">

    <strong>
      <a href="/mapsforge" class="author">mapsforge</a>
    </strong>

    commented

    <a href="#issuecomment-61953965" class="timestamp">
      <time datetime="2014-11-06T09:58:41Z" is="relative-time">Nov 6, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body markdown-format js-comment-body">
          <p><em>From <a href="https://code.google.com/u/113327232123772191739/">LudwigBr...@gmail.com</a> on December 19, 2012 07:16:57</em></p>

<p>Thanks for the feedback. Which Android version is your tablet running? </p>

<p>What you are seeing is that when you 'close' the application, it actually keeps running in the background. This is the Android way. When you then open it again, it runs through the initialization routines and runs out of memory. At that point Android kills the process. The next time the application starts, it is a new process with a clean slate.</p>
      </div>
    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/mapsforge"><img alt="@mapsforge" class="timeline-comment-avatar" height="48" src="https://avatars3.githubusercontent.com/u/430042?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-61953967"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container owner-comment"
     data-body-version="e1d90559ffd2b557b45f57d28bf7a843">

  <div class="timeline-comment-header ">


    <span class="timeline-comment-label">Owner</span>


  <div class="timeline-comment-header-text">

    <strong>
      <a href="/mapsforge" class="author">mapsforge</a>
    </strong>

    commented

    <a href="#issuecomment-61953967" class="timestamp">
      <time datetime="2014-11-06T09:58:41Z" is="relative-time">Nov 6, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body markdown-format js-comment-body">
          <p><em>From <a href="https://code.google.com/u/109528871084914010993/">devemu...@gmail.com</a> on December 19, 2012 09:57:48</em></p>

<p>Current tablet runs Android 2.3.5 at resolution 1024x768, it is a "no-name" one.<br>
The LG run Android 3 Honeycomb at resolution 1280x768, but as I said I'm not having it right now in order to perform tests at it.</p>

<p>At my app I have an exit button when I test memory issues and it calls finish for the activity. So I presume that the memory should be free then from bitmaps ?</p>

<p>Also it could help if all of us who test in various devices inform about the screen resolution (as it connects with the bitmaps size) and the device heap size.<br>
This can be found I think with:<br>
For native heap: Debug.getNativeHeapSize()<br>
For VM heap: Runtime.getRuntime().maxMemory()<br>
Because as another user wrote at mailing list, at Honeycomb there was a change at the heap type that the bitmaps are stored (native heap - vm heap).</p>

<p>For me, for the android 2.3.5 tablet the native Heap returns 17219584 bytes (though not stable, as with each app run it is ~17MB)<br>
And the VM heap returns 33554432 bytes. I don't know if it is small for its resolution.</p>

<p>For instance in order to not have blank areas at screen corners at rotate I resize the map view as a rectangle with size the Math.hypot(width, height) when the user activates the rotate mode. That is Math.hypot(1024, 768)=1280 or a 1280x1280 map view.<br>
The reason I don't want to use always the expanded size map view (and only use it at map rotate) is for performance reasons, at no rotate mode the map view size would be exactly as screen.</p>
      </div>
    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/mapsforge"><img alt="@mapsforge" class="timeline-comment-avatar" height="48" src="https://avatars3.githubusercontent.com/u/430042?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-61953969"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container owner-comment"
     data-body-version="296a2b8cf364fb6bd2e1c08158279168">

  <div class="timeline-comment-header ">


    <span class="timeline-comment-label">Owner</span>


  <div class="timeline-comment-header-text">

    <strong>
      <a href="/mapsforge" class="author">mapsforge</a>
    </strong>

    commented

    <a href="#issuecomment-61953969" class="timestamp">
      <time datetime="2014-11-06T09:58:42Z" is="relative-time">Nov 6, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body markdown-format js-comment-body">
          <p><em>From <a href="https://code.google.com/u/109528871084914010993/">devemu...@gmail.com</a> on December 21, 2012 00:10:16</em></p>

<p>Ok for the LG Optimus Pad V900 (1280x768, Honeycomb) I get VM heap = 50331648 bytes.<br>
And from the first tests that I perform there are no OOM errors, not even with the map view resize caused by map rotate mode.<br>
So far very good!</p>
      </div>
    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/mapsforge"><img alt="@mapsforge" class="timeline-comment-avatar" height="48" src="https://avatars3.githubusercontent.com/u/430042?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-61953971"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container owner-comment"
     data-body-version="f7f7ec3967a38768d9d4edd3d66de344">

  <div class="timeline-comment-header ">


    <span class="timeline-comment-label">Owner</span>


  <div class="timeline-comment-header-text">

    <strong>
      <a href="/mapsforge" class="author">mapsforge</a>
    </strong>

    commented

    <a href="#issuecomment-61953971" class="timestamp">
      <time datetime="2014-11-06T09:58:42Z" is="relative-time">Nov 6, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body markdown-format js-comment-body">
          <p><em>From <a href="https://code.google.com/u/109528871084914010993/">devemu...@gmail.com</a> on December 21, 2012 00:24:36</em></p>

<p>Alas I rushed with my results..<br>
More rarely but still occur OOM errors at map view resize caused from map rotate (1280x768 &lt;-&gt; 1492x1492)</p>

<p>java.lang.OutOfMemoryError<br>
    at android.graphics.Bitmap.nativeCreate(Native Method)<br>
    at android.graphics.Bitmap.createBitmap(Bitmap.java:604)<br>
    at android.graphics.Bitmap.createBitmap(Bitmap.java:584)<br>
    at org.mapsforge.android.maps.overlay.OverlayController.changeSize(OverlayController.java:148)</p>

<p>The only solution I have found for my app is to have always the map view at expanded size, Math.hypot(w, h) i.e. 1492x1492 and don't resize it at all.</p>
      </div>
    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/mapsforge"><img alt="@mapsforge" class="timeline-comment-avatar" height="48" src="https://avatars3.githubusercontent.com/u/430042?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-61953972"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container owner-comment"
     data-body-version="eece7612bab3a4d156de0f54c0440f72">

  <div class="timeline-comment-header ">


    <span class="timeline-comment-label">Owner</span>


  <div class="timeline-comment-header-text">

    <strong>
      <a href="/mapsforge" class="author">mapsforge</a>
    </strong>

    commented

    <a href="#issuecomment-61953972" class="timestamp">
      <time datetime="2014-11-06T09:58:43Z" is="relative-time">Nov 6, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body markdown-format js-comment-body">
          <p><em>From <a href="https://code.google.com/u/113327232123772191739/">LudwigBr...@gmail.com</a> on December 21, 2012 01:25:01</em></p>

<p>Thanks for the feedback. I will look at this again and maybe your suggestion of just making the view square would solve the problem.</p>
      </div>
    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/mapsforge"><img alt="@mapsforge" class="timeline-comment-avatar" height="48" src="https://avatars3.githubusercontent.com/u/430042?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-61953973"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container owner-comment"
     data-body-version="4ef338f7355b937d257c8ba355b19796">

  <div class="timeline-comment-header ">


    <span class="timeline-comment-label">Owner</span>


  <div class="timeline-comment-header-text">

    <strong>
      <a href="/mapsforge" class="author">mapsforge</a>
    </strong>

    commented

    <a href="#issuecomment-61953973" class="timestamp">
      <time datetime="2014-11-06T09:58:43Z" is="relative-time">Nov 6, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body markdown-format js-comment-body">
          <p><em>From <a href="https://code.google.com/u/113327232123772191739/">LudwigBr...@gmail.com</a> on December 21, 2012 04:46:18</em></p>

<p>I have pushed out a version that avoids reallocating bitmaps if the area size does not change, you can find it on my memory branch at <a href="https://code.google.com/r/ludwigbrinckmann-mapsforge/source/list?name=memory">https://code.google.com/r/ludwigbrinckmann-mapsforge/source/list?name=memory</a> .</p>

<p>It is just a single file fix inside the OverlayController, so should be easy enough to apply by hand if needed.</p>

<p>If have not had time to test this (so apologies in advance if it really does not work) and will probably have very little time over the next few days, but feedback is welcome.</p>
      </div>
    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/mapsforge"><img alt="@mapsforge" class="timeline-comment-avatar" height="48" src="https://avatars3.githubusercontent.com/u/430042?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-61953974"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container owner-comment"
     data-body-version="52ebb54e0d81507bce71820224a99a09">

  <div class="timeline-comment-header ">


    <span class="timeline-comment-label">Owner</span>


  <div class="timeline-comment-header-text">

    <strong>
      <a href="/mapsforge" class="author">mapsforge</a>
    </strong>

    commented

    <a href="#issuecomment-61953974" class="timestamp">
      <time datetime="2014-11-06T09:58:44Z" is="relative-time">Nov 6, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body markdown-format js-comment-body">
          <p><em>From <a href="https://code.google.com/u/109528871084914010993/">devemu...@gmail.com</a> on December 21, 2012 10:23:03</em></p>

<p>I have applied your new fix. I think that it helps a lot in cases of device orientation changes.</p>

<p>But my use of map view resize with hypot is actually different, let me explain better. Normally I start the map view with the default screen size. Now with your new fix if we change orientation of device then there is no need for new bitmaps to be created, as the current ones have the same area size. This is indeed correct.</p>

<p>But when I say rotation I mean no change of device orientation, but rotation of the map view inside its parent based on compass or gps bearing. In order to accomplish it I use the view rotation implementation of Google MapsDemo example as described in "\android-sdk\add-ons\addon-google_apis-google-10\samples\MapsDemo\". There the map view is added in a RotateView which performs the canvas rotation and expands map view size to hypot(w, h) in order to avoid blank areas at screen corners during the rotation.<br>
Right now in order to avoid the rotation on/off OOM issues I have always my map view at size hypot(w, h). But I'd like - for performance reasons in rotate off mode - when the map is not in rotate mode to have map view with normal screen size, and only at rotate mode to have the map view as rectangle with side the hypot(w, h).</p>

<p>So my observed OOM issues are actually 2 (both more frequently at larger screen resolutions):</p>

<ul>
<li>When I set the map view in rotate mode on / off. Then the map view at rotate on resizes from screen (width x height) to hypot(w, h) and performs reverse resize at rotate off.</li>
<li>When I re-start the application (as other users already mentioned).</li>
</ul>

<p>Sorry for the lengthy post!</p>
      </div>
    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/mapsforge"><img alt="@mapsforge" class="timeline-comment-avatar" height="48" src="https://avatars3.githubusercontent.com/u/430042?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-61953975"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container owner-comment"
     data-body-version="f3933e2b2dc58de3141200f6d3fa6a53">

  <div class="timeline-comment-header ">


    <span class="timeline-comment-label">Owner</span>


  <div class="timeline-comment-header-text">

    <strong>
      <a href="/mapsforge" class="author">mapsforge</a>
    </strong>

    commented

    <a href="#issuecomment-61953975" class="timestamp">
      <time datetime="2014-11-06T09:58:45Z" is="relative-time">Nov 6, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body markdown-format js-comment-body">
          <p><em>From <a href="https://code.google.com/u/113327232123772191739/">LudwigBr...@gmail.com</a> on December 23, 2012 11:57:39</em></p>

<p>Thanks for the clarifications. </p>

<p>After I had posted this fix in a hurry, I thought that it would not actually fix the problem as a orientation change will probably not result in a view exactly the same size as there is some more stuff on the screen (like the action bar). Maybe a way would be to only allocate if it is bigger or substantially smaller (so a reallocation would generally happen once to go to the larger of the portrait/landscape orientation).</p>

<p>The one other thing I am still unclear about is how the aspect ratio of the bitmap actually does not make a difference as long as there is enough space, but I have not spotted a problem with it.</p>

<p>I will play a bit more with it and hope to get out another patch sometime before the end of the year. </p>

<p>Thanks everyone for their input. Happy holidays.</p>
      </div>
    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/mapsforge"><img alt="@mapsforge" class="timeline-comment-avatar" height="48" src="https://avatars3.githubusercontent.com/u/430042?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-61953978"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container owner-comment"
     data-body-version="78b0ca85747115842ecc274610726a2b">

  <div class="timeline-comment-header ">


    <span class="timeline-comment-label">Owner</span>


  <div class="timeline-comment-header-text">

    <strong>
      <a href="/mapsforge" class="author">mapsforge</a>
    </strong>

    commented

    <a href="#issuecomment-61953978" class="timestamp">
      <time datetime="2014-11-06T09:58:45Z" is="relative-time">Nov 6, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body markdown-format js-comment-body">
          <p><em>From <a href="https://code.google.com/u/113113785285116871423/">dfedortc...@gmail.com</a> on December 24, 2012 02:19:13</em></p>

<p>I have reproduced the issue yesterday, do you think is this the same issue which I've reproduced. Is it fixed in the fix from Dec 21?</p>

<p>23.12.12<br>
Exception class java.lang.OutOfMemoryError<br>
Source method BitmapFactory.nativeDecodeAsset()</p>

<p>java.lang.RuntimeException: Unable to start activity ComponentInfo{x.x.x/x.x.x.ActivitySplash}: android.view.InflateException: Binary XML file line <a href="https://github.com/mapsforge/mapsforge/issues/9" class="issue-link" title="Export HighwayHierarchies Routing as RESTful WebService">#9</a>: Error inflating class <br>
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1659)<br>
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675)<br>
at android.app.ActivityThread.access$1500(ActivityThread.java:121)<br>
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)<br>
at android.os.Handler.dispatchMessage(Handler.java:99)<br>
at android.os.Looper.loop(Looper.java:130)<br>
at android.app.ActivityThread.main(ActivityThread.java:3701)<br>
at java.lang.reflect.Method.invokeNative(Native Method)<br>
at java.lang.reflect.Method.invoke(Method.java:507)<br>
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)<br>
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)<br>
at dalvik.system.NativeStart.main(Native Method)<br>
Caused by: android.view.InflateException: Binary XML file line <a href="https://github.com/mapsforge/mapsforge/issues/9" class="issue-link" title="Export HighwayHierarchies Routing as RESTful WebService">#9</a>: Error inflating class <br>
at android.view.LayoutInflater.createView(LayoutInflater.java:518)<br>
at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)<br>
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)<br>
at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)<br>
at android.view.LayoutInflater.inflate(LayoutInflater.java:408)<br>
at android.view.LayoutInflater.inflate(LayoutInflater.java:320)<br>
at android.view.LayoutInflater.inflate(LayoutInflater.java:276)<br>
at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:227)<br>
at android.app.Activity.setContentView(Activity.java:1657)<br>
at x.x.x.ActivitySplash.onCreate(ActivitySplash.java:144)<br>
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)<br>
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1623)<br>
... 11 more<br>
Caused by: java.lang.reflect.InvocationTargetException<br>
at java.lang.reflect.Constructor.constructNative(Native Method)<br>
at java.lang.reflect.Constructor.newInstance(Constructor.java:415)<br>
at android.view.LayoutInflater.createView(LayoutInflater.java:505)<br>
... 22 more<br>
Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget<br>
at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)<br>
at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:494)<br>
at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:370)<br>
at android.graphics.BitmapFactory.decodeResource(BitmapFactory.java:393)<br>
at android.graphics.BitmapFactory.decodeResource(BitmapFactory.java:419)<br>
at android.graphics.drawable.BitmapDrawable.inflate(BitmapDrawable.java:373)<br>
at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:805)<br>
at android.graphics.drawable.Drawable.createFromXml(Drawable.java:746)<br>
at android.content.res.Resources.loadDrawable(Resources.java:1705)<br>
at android.content.res.TypedArray.getDrawable(TypedArray.java:601)<br>
at android.view.View.(View.java:1975)<br>
at android.view.View.(View.java:1923)<br>
at android.view.ViewGroup.(ViewGroup.java:314)<br>
at android.widget.LinearLayout.(LinearLayout.java:124)<br>
... 25 more<br>
For applications that include obfuscated code, stack traces contain obfuscated symbol names. If the application was obfuscated using ProGuard, you can unobfuscate the stack trace using the "retrace" tool, included in the Android SDK Tools r8 and later. For more information, see the ProGuard document.</p>
      </div>
    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/mapsforge"><img alt="@mapsforge" class="timeline-comment-avatar" height="48" src="https://avatars3.githubusercontent.com/u/430042?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-61953980"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container owner-comment"
     data-body-version="867a3504e7c2896a077961d5e42eb932">

  <div class="timeline-comment-header ">


    <span class="timeline-comment-label">Owner</span>


  <div class="timeline-comment-header-text">

    <strong>
      <a href="/mapsforge" class="author">mapsforge</a>
    </strong>

    commented

    <a href="#issuecomment-61953980" class="timestamp">
      <time datetime="2014-11-06T09:58:46Z" is="relative-time">Nov 6, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body markdown-format js-comment-body">
          <p><em>From <a href="https://code.google.com/u/109528871084914010993/">devemu...@gmail.com</a> on January 08, 2013 09:29:22</em></p>

<p>Hi Ludwig,</p>

<p>Are you planning to push your memory changes (which have good results) to main branch some time?</p>

<p>Thanks.</p>
      </div>
    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/mapsforge"><img alt="@mapsforge" class="timeline-comment-avatar" height="48" src="https://avatars3.githubusercontent.com/u/430042?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-61953983"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container owner-comment"
     data-body-version="8fb9a76618412ba6f67aa72047b2018e">

  <div class="timeline-comment-header ">


    <span class="timeline-comment-label">Owner</span>


  <div class="timeline-comment-header-text">

    <strong>
      <a href="/mapsforge" class="author">mapsforge</a>
    </strong>

    commented

    <a href="#issuecomment-61953983" class="timestamp">
      <time datetime="2014-11-06T09:58:46Z" is="relative-time">Nov 6, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body markdown-format js-comment-body">
          <p><em>From <a href="https://code.google.com/u/113327232123772191739/">LudwigBr...@gmail.com</a> on January 13, 2013 19:42:20</em></p>

<p>I will try to push this soon.</p>
      </div>
    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/mapsforge"><img alt="@mapsforge" class="timeline-comment-avatar" height="48" src="https://avatars3.githubusercontent.com/u/430042?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-61953984"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container owner-comment"
     data-body-version="f7a1c2c1ce9a3cb3b25324a2be953cd3">

  <div class="timeline-comment-header ">


    <span class="timeline-comment-label">Owner</span>


  <div class="timeline-comment-header-text">

    <strong>
      <a href="/mapsforge" class="author">mapsforge</a>
    </strong>

    commented

    <a href="#issuecomment-61953984" class="timestamp">
      <time datetime="2014-11-06T09:58:47Z" is="relative-time">Nov 6, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body markdown-format js-comment-body">
          <p><em>From <a href="https://code.google.com/u/113327232123772191739/">LudwigBr...@gmail.com</a> on January 14, 2013 02:00:55</em></p>

<p>I pushed most of the changes proposed in my branch. See the commit for details.<br>
I have not added the change where the bitmap is not reallocated if it is already large enough regardless of aspect. Not only had this not received sufficient testing, I also feel that just ignoring the x/y size of the bitmap is asking for trouble.</p>

<p>This change still does not fully address all of the issues re bitmap reallocation. For Android versions prior to 3.0 the bitmap problem seems a bit intractable, but if anyone has any further good ideas please submit them. I am leaving this issue open for the time being.</p>

<p><strong>Labels:</strong> -Priority-High Priority-Medium  </p>
      </div>
    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/mapsforge"><img alt="@mapsforge" class="timeline-comment-avatar" height="48" src="https://avatars3.githubusercontent.com/u/430042?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-61953985"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container owner-comment"
     data-body-version="f1d46e8d87e42f197a61c8afff0366e8">

  <div class="timeline-comment-header ">


    <span class="timeline-comment-label">Owner</span>


  <div class="timeline-comment-header-text">

    <strong>
      <a href="/mapsforge" class="author">mapsforge</a>
    </strong>

    commented

    <a href="#issuecomment-61953985" class="timestamp">
      <time datetime="2014-11-06T09:58:48Z" is="relative-time">Nov 6, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body markdown-format js-comment-body">
          <p><em>From <a href="https://code.google.com/u/107208650191660116244/">john.d.r...@gmail.com</a> on March 26, 2013 19:38:10</em></p>

<p>howdy folks,</p>

<p>Should I attempt to build from the master branch to get the fixes outlined in the comments?</p>

<p>I am seeing my heap grow by 10MB every time my activity starts and it is crashing my application so I think these fixes might help.</p>

<p>Many thanks!<br>
John</p>
      </div>
    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/mapsforge"><img alt="@mapsforge" class="timeline-comment-avatar" height="48" src="https://avatars3.githubusercontent.com/u/430042?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-61953987"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container owner-comment"
     data-body-version="1ef1c525bc9602ff75fe165b78f4a5a4">

  <div class="timeline-comment-header ">


    <span class="timeline-comment-label">Owner</span>


  <div class="timeline-comment-header-text">

    <strong>
      <a href="/mapsforge" class="author">mapsforge</a>
    </strong>

    commented

    <a href="#issuecomment-61953987" class="timestamp">
      <time datetime="2014-11-06T09:58:48Z" is="relative-time">Nov 6, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body markdown-format js-comment-body">
          <p><em>From <a href="https://code.google.com/u/113327232123772191739/">LudwigBr...@gmail.com</a> on March 27, 2013 23:29:40</em></p>

<p>Yes, I think it would help.</p>
      </div>
    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/mapsforge"><img alt="@mapsforge" class="timeline-comment-avatar" height="48" src="https://avatars3.githubusercontent.com/u/430042?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-61953989"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container owner-comment"
     data-body-version="052e873b904ac7081bb7ee89443d181e">

  <div class="timeline-comment-header ">


    <span class="timeline-comment-label">Owner</span>


  <div class="timeline-comment-header-text">

    <strong>
      <a href="/mapsforge" class="author">mapsforge</a>
    </strong>

    commented

    <a href="#issuecomment-61953989" class="timestamp">
      <time datetime="2014-11-06T09:58:49Z" is="relative-time">Nov 6, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body markdown-format js-comment-body">
          <p><em>From <a href="https://code.google.com/u/113327232123772191739/">LudwigBr...@gmail.com</a> on January 18, 2014 03:07:06</em></p>

<p>I think these OOM memory issues are largely resolved in the Rescue branch. See the Samples app for how to handle the Android lifecycle for MapViews.</p>

<p><strong>Status:</strong> Fixed  </p>
      </div>
    </div>

  </div>
</div>

  </div>
  


      


  <div class="discussion-item discussion-item-closed">
    <div class="discussion-item-header" id="event-189210018">

      <span class="octicon octicon-circle-slash discussion-item-icon"></span>
      <img alt="@mapsforge" class="avatar" height="16" src="https://avatars0.githubusercontent.com/u/430042?v=3&amp;s=32" width="16" />
      <a href="/mapsforge" class="author">mapsforge</a>
      closed this   <a href="https://github.com/mapsforge/mapsforge/issues/378#event-189210018" class="timestamp"><time class="timestamp" datetime="2014-11-06T09:58:49Z" is="relative-time">Nov 6, 2014</time></a>
    </div>
  </div>

  <div class="closed-banner"></div>





<!-- Rendered timeline since 2014-11-06 01:58:49 -->
<div id="partial-timeline-marker"
      class="js-timeline-marker js-socket-channel js-updatable-content"
      data-channel="mapsforge/mapsforge:issue:47943178"
      data-url="/mapsforge/mapsforge/issues/378/show_partial?partial=issues%2Ftimeline_marker&amp;since=1415267929"
      data-last-modified="Thu, 06 Nov 2014 09:58:49 GMT">

    <!-- </textarea> --><!-- '"` --><form accept-charset="UTF-8" action="/mapsforge/mapsforge/notifications/mark?ids=48164045" class="hidden js-timeline-marker-form" data-form-nonce="85544455406b2df294e43c3dcc3f8212bd7b7afc" data-remote="true" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="ofYzVe/1zr6xANmqCvLkwmCT/ZeVYGJasQBLQoffxMHbwFvfRnR4srCFpCL9zNq24VtI0oUPLLWF0oR5CoqroQ==" /></div>
</form></div>


        </div>

          <div class="discussion-timeline-actions">
                <div class="signed-out-comment">
	<a href="/join" class="btn btn-primary" rel="nofollow">Sign up for free</a>
	<strong>to join this conversation on GitHub</strong>.
	Already have an account?
	<a href="/login?return_to=https%3A%2F%2Fgithub.com%2Fmapsforge%2Fmapsforge%2Fissues%2F378" rel="nofollow">Sign in to comment</a>
</div>


          </div>
      </div>

    </div>
    <div class="clear"></div>
  </div>

</div>


        </div>
      </div>
      <div class="modal-backdrop"></div>
    </div>
  </div>


    </div><!-- /.wrapper -->

      <div class="container">
  <div class="site-footer" role="contentinfo">
    <ul class="site-footer-links right">
        <li><a href="https://status.github.com/" data-ga-click="Footer, go to status, text:status">Status</a></li>
      <li><a href="https://developer.github.com" data-ga-click="Footer, go to api, text:api">API</a></li>
      <li><a href="https://training.github.com" data-ga-click="Footer, go to training, text:training">Training</a></li>
      <li><a href="https://shop.github.com" data-ga-click="Footer, go to shop, text:shop">Shop</a></li>
        <li><a href="https://github.com/blog" data-ga-click="Footer, go to blog, text:blog">Blog</a></li>
        <li><a href="https://github.com/about" data-ga-click="Footer, go to about, text:about">About</a></li>
        <li><a href="https://github.com/pricing" data-ga-click="Footer, go to pricing, text:pricing">Pricing</a></li>

    </ul>

    <a href="https://github.com" aria-label="Homepage">
      <span class="mega-octicon octicon-mark-github" title="GitHub"></span>
</a>
    <ul class="site-footer-links">
      <li>&copy; 2015 <span title="0.14750s from github-fe126-cp1-prd.iad.github.net">GitHub</span>, Inc.</li>
        <li><a href="https://github.com/site/terms" data-ga-click="Footer, go to terms, text:terms">Terms</a></li>
        <li><a href="https://github.com/site/privacy" data-ga-click="Footer, go to privacy, text:privacy">Privacy</a></li>
        <li><a href="https://github.com/security" data-ga-click="Footer, go to security, text:security">Security</a></li>
        <li><a href="https://github.com/contact" data-ga-click="Footer, go to contact, text:contact">Contact</a></li>
        <li><a href="https://help.github.com" data-ga-click="Footer, go to help, text:help">Help</a></li>
    </ul>
  </div>
</div>


    <div class="fullscreen-overlay js-fullscreen-overlay" id="fullscreen_overlay">
  <div class="fullscreen-container js-suggester-container">
    <div class="textarea-wrap">
      <textarea name="fullscreen-contents" id="fullscreen-contents" class="fullscreen-contents js-fullscreen-contents" placeholder="" aria-label=""></textarea>
      <div class="suggester-container">
        <div class="suggester fullscreen-suggester js-suggester js-navigation-container"></div>
      </div>
    </div>
  </div>
  <div class="fullscreen-sidebar">
    <a href="#" class="exit-fullscreen js-exit-fullscreen tooltipped tooltipped-w" aria-label="Exit Zen Mode">
      <span class="mega-octicon octicon-screen-normal"></span>
    </a>
    <a href="#" class="theme-switcher js-theme-switcher tooltipped tooltipped-w"
      aria-label="Switch themes">
      <span class="octicon octicon-color-mode"></span>
    </a>
  </div>
</div>



    
    

    <div id="ajax-error-message" class="flash flash-error">
      <span class="octicon octicon-alert"></span>
      <a href="#" class="octicon octicon-x flash-close js-ajax-error-dismiss" aria-label="Dismiss error"></a>
      Something went wrong with that request. Please try again.
    </div>


      <script crossorigin="anonymous" src="https://assets-cdn.github.com/assets/frameworks-df03cb524192fbb325ef264ca1bdee425481db0aadf702dd6d209d1fa0ccf572.js"></script>
      <script async="async" crossorigin="anonymous" src="https://assets-cdn.github.com/assets/github/index-e321a5911341a3613eea06a9cc3f6ea636b3cdc377824313d67ad604a5e8d9e1.js"></script>
      
      
    <div class="js-stale-session-flash stale-session-flash flash flash-warn flash-banner hidden">
      <span class="octicon octicon-alert"></span>
      <span class="signed-in-tab-flash">You signed in with another tab or window. <a href="">Reload</a> to refresh your session.</span>
      <span class="signed-out-tab-flash">You signed out in another tab or window. <a href="">Reload</a> to refresh your session.</span>
    </div>
  </body>
</html>

