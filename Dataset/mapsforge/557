


<!DOCTYPE html>
<html lang="en" class="">
  <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# object: http://ogp.me/ns/object# article: http://ogp.me/ns/article# profile: http://ogp.me/ns/profile#">
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Language" content="en">
    <meta name="viewport" content="width=1020">
    
    
    <title>Persistent cache 2 by mvglasow · Pull Request #557 · mapsforge/mapsforge · GitHub</title>
    <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub">
    <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-114.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-144.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144.png">
    <meta property="fb:app_id" content="1401488693436528">

      <meta content="@github" name="twitter:site" /><meta content="summary" name="twitter:card" /><meta content="Persistent cache 2 by mvglasow · Pull Request #557 · mapsforge/mapsforge" name="twitter:title" /><meta content="Includes improvements discussed with Emux and Ludwig:


Read entire cache dir when initializing a persistent cache
Reliably enforce cache size for persistent cache (data from previous instances is ..." name="twitter:description" /><meta content="https://avatars0.githubusercontent.com/u/2377496?v=3&amp;s=400" name="twitter:image:src" />
      <meta content="GitHub" property="og:site_name" /><meta content="object" property="og:type" /><meta content="https://avatars0.githubusercontent.com/u/2377496?v=3&amp;s=400" property="og:image" /><meta content="Persistent cache 2 by mvglasow · Pull Request #557 · mapsforge/mapsforge" property="og:title" /><meta content="https://github.com/mapsforge/mapsforge/pull/557" property="og:url" /><meta content="Includes improvements discussed with Emux and Ludwig:


Read entire cache dir when initializing a persistent cache
Reliably enforce cache size for persistent cache (data from previous instances is ..." property="og:description" />
      <meta name="browser-stats-url" content="https://api.github.com/_private/browser/stats">
    <meta name="browser-errors-url" content="https://api.github.com/_private/browser/errors">
    <link rel="assets" href="https://assets-cdn.github.com/">
    
    <meta name="pjax-timeout" content="1000">
    

    <meta name="msapplication-TileImage" content="/windows-tile.png">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="selected-link" value="repo_pulls" data-pjax-transient>

        <meta name="google-analytics" content="UA-3769691-2">

    <meta content="collector.githubapp.com" name="octolytics-host" /><meta content="collector-cdn.github.com" name="octolytics-script-host" /><meta content="github" name="octolytics-app-id" /><meta content="9E84FF69:5D10:B729F0:55DB6575" name="octolytics-dimension-request_id" />
    
    <meta content="Rails, view, pull_requests#show" data-pjax-transient="true" name="analytics-event" />
    <meta class="js-ga-set" name="dimension1" content="Logged Out">
      <meta class="js-ga-set" name="dimension4" content="Current repo nav">
    <meta name="is-dotcom" content="true">
        <meta name="hostname" content="github.com">
    <meta name="user-login" content="">

      <link rel="icon" sizes="any" mask href="https://assets-cdn.github.com/pinned-octocat.svg">
      <meta name="theme-color" content="#4078c0">
      <link rel="icon" type="image/x-icon" href="https://assets-cdn.github.com/favicon.ico">

    <!-- </textarea> --><!-- '"` --><meta content="authenticity_token" name="csrf-param" />
<meta content="tSPv0Imu6mz6EeW+jes0d/iAAPyigdHC3KB3fzZrGnCdGOHfS6Jj19XOX5kkMU4OvRjWxLvxkP5tJ6onAq13VA==" name="csrf-token" />
    

    <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/github/index-17ad0ea72cb80a46ba6d1bd6e3c69789acb0e1c0cae43beb90477759cce1bdfd.css" media="all" rel="stylesheet" />
    <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/github2/index-9f11074052a3551cd7bae2fba8b949844d2d7329927a7f1cb5a2c2a821f016e0.css" media="all" rel="stylesheet" />
    
    


    <meta http-equiv="x-pjax-version" content="239d32d0023038613a9092dfdd8544d0">

        <link data-pjax-transient rel='alternate' type='text/x-diff' href='/mapsforge/mapsforge/pull/557.diff'>
  <link data-pjax-transient rel='alternate' type='text/x-patch' href='/mapsforge/mapsforge/pull/557.patch'>
  <style type="text/css" media="screen">
    span.labelstyle-FFFFFF, .linked-labelstyle-FFFFFF {  background-color: #FFFFFF !important;  color: #333333 !important;}.labelstyle-FFFFFF.selected {  background-color: #FFFFFF !important;  color: #333333 !important;}.label-select-menu .labelstyle-FFFFFF.selected {  background:rgba(255, 255, 255, 0.12) !important;  color: #999999 !important;}

span.labelstyle-fc2929, .linked-labelstyle-fc2929 {  background-color: #fc2929 !important;  color: #fff !important;}.labelstyle-fc2929.selected {  background-color: #fc2929 !important;  color: #fff !important;}.label-select-menu .labelstyle-fc2929.selected {  background:rgba(252, 41, 41, 0.12) !important;  color: #991818 !important;}

span.labelstyle-cccccc, .linked-labelstyle-cccccc {  background-color: #cccccc !important;  color: #333333 !important;}.labelstyle-cccccc.selected {  background-color: #cccccc !important;  color: #333333 !important;}.label-select-menu .labelstyle-cccccc.selected {  background:rgba(204, 204, 204, 0.12) !important;  color: #999999 !important;}

span.labelstyle-84b6eb, .linked-labelstyle-84b6eb {  background-color: #84b6eb !important;  color: #1c2733 !important;}.labelstyle-84b6eb.selected {  background-color: #84b6eb !important;  color: #1c2733 !important;}.label-select-menu .labelstyle-84b6eb.selected {  background:rgba(132, 182, 235, 0.12) !important;  color: #557699 !important;}

span.labelstyle-159818, .linked-labelstyle-159818 {  background-color: #159818 !important;  color: #fff !important;}.labelstyle-159818.selected {  background-color: #159818 !important;  color: #fff !important;}.label-select-menu .labelstyle-159818.selected {  background:rgba(21, 152, 24, 0.12) !important;  color: #159918 !important;}

span.labelstyle-e6e6e6, .linked-labelstyle-e6e6e6 {  background-color: #e6e6e6 !important;  color: #333333 !important;}.labelstyle-e6e6e6.selected {  background-color: #e6e6e6 !important;  color: #333333 !important;}.label-select-menu .labelstyle-e6e6e6.selected {  background:rgba(230, 230, 230, 0.12) !important;  color: #999999 !important;}

span.labelstyle-cc317c, .linked-labelstyle-cc317c {  background-color: #cc317c !important;  color: #fff !important;}.labelstyle-cc317c.selected {  background-color: #cc317c !important;  color: #fff !important;}.label-select-menu .labelstyle-cc317c.selected {  background:rgba(204, 49, 124, 0.12) !important;  color: #99245c !important;}

span.labelstyle-ffffff, .linked-labelstyle-ffffff {  background-color: #ffffff !important;  color: #333333 !important;}.labelstyle-ffffff.selected {  background-color: #ffffff !important;  color: #333333 !important;}.label-select-menu .labelstyle-ffffff.selected {  background:rgba(255, 255, 255, 0.12) !important;  color: #999999 !important;}
  </style>

  <meta name="diff-view" content="unified" data-pjax-transient>

  <meta name="session-resume-id" content="/mapsforge/mapsforge/pull/557" data-pjax-transient>

  <meta name="description" content="The new home of mapsforge.">
  <meta name="go-import" content="github.com/mapsforge/mapsforge git https://github.com/mapsforge/mapsforge.git">

  <meta content="430042" name="octolytics-dimension-user_id" /><meta content="mapsforge" name="octolytics-dimension-user_login" /><meta content="26262349" name="octolytics-dimension-repository_id" /><meta content="mapsforge/mapsforge" name="octolytics-dimension-repository_nwo" /><meta content="true" name="octolytics-dimension-repository_public" /><meta content="false" name="octolytics-dimension-repository_is_fork" /><meta content="26262349" name="octolytics-dimension-repository_network_root_id" /><meta content="mapsforge/mapsforge" name="octolytics-dimension-repository_network_root_nwo" />
  <link href="https://github.com/mapsforge/mapsforge/commits/8ca5512f3901939b98380b444ff1ec978fa2e742.atom" rel="alternate" title="Recent Commits to mapsforge:8ca5512f3901939b98380b444ff1ec978fa2e742" type="application/atom+xml">

  </head>


  <body class="logged_out  env-production  vis-public">
    <a href="#start-of-content" tabindex="1" class="accessibility-aid js-skip-to-content">Skip to content</a>
    <div class="wrapper">
      
      
      



        
        <div class="header header-logged-out" role="banner">
  <div class="container clearfix">

    <a class="header-logo-wordmark" href="https://github.com/" data-ga-click="(Logged out) Header, go to homepage, icon:logo-wordmark">
      <span class="mega-octicon octicon-logo-github"></span>
    </a>

    <div class="header-actions" role="navigation">
        <a class="btn btn-primary" href="/join" data-ga-click="(Logged out) Header, clicked Sign up, text:sign-up">Sign up</a>
      <a class="btn" href="/login?return_to=%2Fmapsforge%2Fmapsforge%2Fpull%2F557" data-ga-click="(Logged out) Header, clicked Sign in, text:sign-in">Sign in</a>
    </div>

    <div class="site-search repo-scope js-site-search" role="search">
      <!-- </textarea> --><!-- '"` --><form accept-charset="UTF-8" action="/mapsforge/mapsforge/search" class="js-site-search-form" data-global-search-url="/search" data-repo-search-url="/mapsforge/mapsforge/search" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
  <label class="js-chromeless-input-container form-control">
    <div class="scope-badge">This repository</div>
    <input type="text"
      class="js-site-search-focus js-site-search-field is-clearable chromeless-input"
      data-hotkey="s"
      name="q"
      placeholder="Search"
      aria-label="Search this repository"
      data-global-scope-placeholder="Search GitHub"
      data-repo-scope-placeholder="Search"
      tabindex="1"
      autocapitalize="off">
  </label>
</form>
    </div>

      <ul class="header-nav left" role="navigation">
          <li class="header-nav-item">
            <a class="header-nav-link" href="/explore" data-ga-click="(Logged out) Header, go to explore, text:explore">Explore</a>
          </li>
          <li class="header-nav-item">
            <a class="header-nav-link" href="/features" data-ga-click="(Logged out) Header, go to features, text:features">Features</a>
          </li>
          <li class="header-nav-item">
            <a class="header-nav-link" href="https://enterprise.github.com/" data-ga-click="(Logged out) Header, go to enterprise, text:enterprise">Enterprise</a>
          </li>
          <li class="header-nav-item">
            <a class="header-nav-link" href="/pricing" data-ga-click="(Logged out) Header, go to pricing, text:pricing">Pricing</a>
          </li>
      </ul>

  </div>
</div>



      <div id="start-of-content" class="accessibility-aid"></div>
          <div class="site" itemscope itemtype="http://schema.org/WebPage">
    <div id="js-flash-container">
      
    </div>
    <div class="pagehead repohead instapaper_ignore readability-menu">
      <div class="container">

        <div class="clearfix">
          
<ul class="pagehead-actions">

  <li>
      <a href="/login?return_to=%2Fmapsforge%2Fmapsforge"
    class="btn btn-sm btn-with-count tooltipped tooltipped-n"
    aria-label="You must be signed in to watch a repository" rel="nofollow">
    <span class="octicon octicon-eye"></span>
    Watch
  </a>
  <a class="social-count" href="/mapsforge/mapsforge/watchers">
    35
  </a>

  </li>

  <li>
      <a href="/login?return_to=%2Fmapsforge%2Fmapsforge"
    class="btn btn-sm btn-with-count tooltipped tooltipped-n"
    aria-label="You must be signed in to star a repository" rel="nofollow">
    <span class="octicon octicon-star"></span>
    Star
  </a>

    <a class="social-count js-social-count" href="/mapsforge/mapsforge/stargazers">
      161
    </a>

  </li>

    <li>
      <a href="/login?return_to=%2Fmapsforge%2Fmapsforge"
        class="btn btn-sm btn-with-count tooltipped tooltipped-n"
        aria-label="You must be signed in to fork a repository" rel="nofollow">
        <span class="octicon octicon-repo-forked"></span>
        Fork
      </a>
      <a href="/mapsforge/mapsforge/network" class="social-count">
        82
      </a>
    </li>
</ul>

          <h1 itemscope itemtype="http://data-vocabulary.org/Breadcrumb" class="entry-title public ">
  <span class="mega-octicon octicon-repo"></span>
  <span class="author"><a href="/mapsforge" class="url fn" itemprop="url" rel="author"><span itemprop="title">mapsforge</span></a></span><!--
--><span class="path-divider">/</span><!--
--><strong><a href="/mapsforge/mapsforge" data-pjax="#js-repo-pjax-container">mapsforge</a></strong>

  <span class="page-context-loader">
    <img alt="" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
  </span>

</h1>
        
        </div>
      </div>
    </div>

    <div class="container">
      <div class="repository-with-sidebar repo-container new-discussion-timeline ">
        <div class="repository-sidebar clearfix">
          
<nav class="sunken-menu repo-nav js-repo-nav js-sidenav-container-pjax js-octicon-loaders"
     role="navigation"
     data-pjax="#js-repo-pjax-container"
     data-issue-count-url="/mapsforge/mapsforge/issues/counts">
  <ul class="sunken-menu-group">
    <li class="tooltipped tooltipped-w" aria-label="Code">
      <a href="/mapsforge/mapsforge" aria-label="Code" class="js-selected-navigation-item sunken-menu-item" data-hotkey="g c" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches /mapsforge/mapsforge">
        <span class="octicon octicon-code"></span> <span class="full-word">Code</span>
        <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
</a>    </li>

      <li class="tooltipped tooltipped-w" aria-label="Issues">
        <a href="/mapsforge/mapsforge/issues" aria-label="Issues" class="js-selected-navigation-item sunken-menu-item" data-hotkey="g i" data-selected-links="repo_issues repo_labels repo_milestones /mapsforge/mapsforge/issues">
          <span class="octicon octicon-issue-opened"></span> <span class="full-word">Issues</span>
          <span class="js-issue-replace-counter"></span>
          <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>

    <li class="tooltipped tooltipped-w" aria-label="Pull requests">
      <a href="/mapsforge/mapsforge/pulls" aria-label="Pull requests" aria-selected="true" class="js-selected-navigation-item selected sunken-menu-item" data-hotkey="g p" data-selected-links="repo_pulls /mapsforge/mapsforge/pulls">
          <span class="octicon octicon-git-pull-request"></span> <span class="full-word">Pull requests</span>
          <span class="js-pull-replace-counter"></span>
          <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
</a>    </li>

      <li class="tooltipped tooltipped-w" aria-label="Wiki">
        <a href="/mapsforge/mapsforge/wiki" aria-label="Wiki" class="js-selected-navigation-item sunken-menu-item" data-hotkey="g w" data-selected-links="repo_wiki /mapsforge/mapsforge/wiki">
          <span class="octicon octicon-book"></span> <span class="full-word">Wiki</span>
          <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>
  </ul>
  <div class="sunken-menu-separator"></div>
  <ul class="sunken-menu-group">

    <li class="tooltipped tooltipped-w" aria-label="Pulse">
      <a href="/mapsforge/mapsforge/pulse" aria-label="Pulse" class="js-selected-navigation-item sunken-menu-item" data-selected-links="pulse /mapsforge/mapsforge/pulse">
        <span class="octicon octicon-pulse"></span> <span class="full-word">Pulse</span>
        <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
</a>    </li>

    <li class="tooltipped tooltipped-w" aria-label="Graphs">
      <a href="/mapsforge/mapsforge/graphs" aria-label="Graphs" class="js-selected-navigation-item sunken-menu-item" data-selected-links="repo_graphs repo_contributors /mapsforge/mapsforge/graphs">
        <span class="octicon octicon-graph"></span> <span class="full-word">Graphs</span>
        <img alt="" class="mini-loader" height="16" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif" width="16" />
</a>    </li>
  </ul>


</nav>

            <div class="only-with-full-nav">
                
<div class="js-clone-url clone-url open"
  data-protocol-type="http">
  <h3><span class="text-emphasized">HTTPS</span> clone URL</h3>
  <div class="input-group js-zeroclipboard-container">
    <input type="text" class="input-mini input-monospace js-url-field js-zeroclipboard-target"
           value="https://github.com/mapsforge/mapsforge.git" readonly="readonly" aria-label="HTTPS clone URL">
    <span class="input-group-button">
      <button aria-label="Copy to clipboard" class="js-zeroclipboard btn btn-sm zeroclipboard-button tooltipped tooltipped-s" data-copied-hint="Copied!" type="button"><span class="octicon octicon-clippy"></span></button>
    </span>
  </div>
</div>

  
<div class="js-clone-url clone-url "
  data-protocol-type="subversion">
  <h3><span class="text-emphasized">Subversion</span> checkout URL</h3>
  <div class="input-group js-zeroclipboard-container">
    <input type="text" class="input-mini input-monospace js-url-field js-zeroclipboard-target"
           value="https://github.com/mapsforge/mapsforge" readonly="readonly" aria-label="Subversion checkout URL">
    <span class="input-group-button">
      <button aria-label="Copy to clipboard" class="js-zeroclipboard btn btn-sm zeroclipboard-button tooltipped tooltipped-s" data-copied-hint="Copied!" type="button"><span class="octicon octicon-clippy"></span></button>
    </span>
  </div>
</div>



  <div class="clone-options">You can clone with
    <!-- </textarea> --><!-- '"` --><form accept-charset="UTF-8" action="/users/set_protocol?protocol_selector=http&amp;protocol_type=clone" class="inline-form js-clone-selector-form " data-form-nonce="696f0c93ae318cad79a449edc754d07f345c39e1" data-remote="true" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="m1JfX+JfjZGFQFamHOV89oJJdCqb2XhMrThgr1kLgYYgRse0CLpjfnPvxv7mtkEFbfHC4jy3xO1w8v1DZbCm2g==" /></div><button class="btn-link js-clone-selector" data-protocol="http" type="submit">HTTPS</button></form> or <!-- </textarea> --><!-- '"` --><form accept-charset="UTF-8" action="/users/set_protocol?protocol_selector=subversion&amp;protocol_type=clone" class="inline-form js-clone-selector-form " data-form-nonce="696f0c93ae318cad79a449edc754d07f345c39e1" data-remote="true" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="rR7DFC4SPvpz1QHA/hqOIqm0GCRnOywC6SKetN7AQWQLzG+Uv1RAa8yAN5PPXqh9lzQlCD41xpHaawb2oTnpiw==" /></div><button class="btn-link js-clone-selector" data-protocol="subversion" type="submit">Subversion</button></form>.
    <a href="https://help.github.com/articles/which-remote-url-should-i-use" class="help tooltipped tooltipped-n" aria-label="Get help on which URL is right for you.">
      <span class="octicon octicon-question"></span>
    </a>
  </div>

              <a href="/mapsforge/mapsforge/archive/master.zip"
                 class="btn btn-sm sidebar-button"
                 aria-label="Download the contents of mapsforge/mapsforge as a zip file"
                 title="Download the contents of mapsforge/mapsforge as a zip file"
                 rel="nofollow">
                <span class="octicon octicon-cloud-download"></span>
                Download ZIP
              </a>
            </div>
        </div>
        <div id="js-repo-pjax-container" class="repository-content context-loader-container" data-pjax-container>

          

<!-- base sha1: &quot;22dfed85f21d87f5fdc9bfe4f93c49dcf91a75be&quot; -->
<!-- head sha1: &quot;8ca5512f3901939b98380b444ff1ec978fa2e742&quot; -->

<div class="issues-listing" data-pjax>
  <div class="context-loader large-format-loader">
  <p><img alt="" height="64" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-128.gif" width="64" /></p>
  <p>Loading…</p>
</div>

  <div class='view-pull-request clearfix js-issues-results'>

  
  <div
    id="partial-discussion-header"
    class="gh-header js-details-container js-socket-channel js-updatable-content pull request"
    data-channel="mapsforge/mapsforge:pull_request:26409872"
    data-url="/mapsforge/mapsforge/pull/557/show_partial?partial=pull_requests%2Ftitle">

  <div class="gh-header-show ">
      <div class="gh-header-actions">
      </div>

    <h1 class="gh-header-title">
      <span class="js-issue-title">Persistent cache 2</span>
      <span class="gh-header-number">#557</span>
    </h1>
  </div>


  <div class="flex-table gh-header-meta">
    <div class="flex-table-item">
        <div class="state state-closed">
          <span class="octicon octicon-git-pull-request"></span>
          Closed
        </div>
    </div>
    <div class="flex-table-item flex-table-item-primary">
          <a href="/mvglasow" class="author pull-header-username css-truncate css-truncate-target expandable">
    mvglasow
  </a>
   wants to merge 3 commits into

<span class="commit-ref current-branch css-truncate js-selectable-text expandable"><span class="css-truncate-target user">mapsforge</span>:<span class="css-truncate-target">dev</span></span>

from

<span class="commit-ref current-branch css-truncate js-selectable-text expandable"><span class="css-truncate-target user">mvglasow</span>:<span class="css-truncate-target">persistent-cache-2</span></span>



    </div>
  </div>
</div>


  <div class="tabnav tabnav-pr js-socket-channel js-pull-request-tabs"
    data-channel="mapsforge/mapsforge:branch:persistent-cache-2"
    data-url=/mapsforge/mapsforge/pull/557/show_partial?partial=pull_requests%2Ftabs>
    <div class="tabnav-extra right">
      <span class="diffstat" id="diffstat">
        <span class="text-diff-added">
          +866
        </span>
        <span class="text-diff-deleted">
          −111
        </span>
        <span class="diffstat-bar tooltipped tooltipped-s" aria-label="977 lines changed">
          <span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span>&#xf053;
        </span>
      </span>
    </div>
  <nav class="tabnav-tabs">
    <a href="/mapsforge/mapsforge/pull/557" data-container-id="discussion_bucket" class="tabnav-tab selected js-pull-request-tab">
      <span class="octicon octicon-comment-discussion"></span>
      Conversation

      <span id="conversation_tab_counter" class="counter">
        22
      </span>
    </a>
    <a href="/mapsforge/mapsforge/pull/557/commits" data-container-id="commits_bucket" class="tabnav-tab  js-pull-request-tab">
      <span class="octicon octicon-git-commit"></span>
      Commits

      <span id="commits_tab_counter" class="counter">
        3
      </span>
    </a>
    <a href="/mapsforge/mapsforge/pull/557/files" data-container-id="files_bucket" class="tabnav-tab  js-pull-request-tab">
      <span class="octicon octicon-diff"></span>
      Files changed

      <span id="files_tab_counter" class="counter">
          23
      </span>

    </a>
  </nav>
</div>


    <div id="discussion_bucket" class="tab-content clearfix pull-request-tab-content is-visible">
      <div class="discussion-sidebar ">
  <div id="partial-discussion-stats"
     class="discussion-stats js-socket-channel js-updatable-content"
     data-channel="mapsforge/mapsforge:issue:52546719"
     data-url="/mapsforge/mapsforge/issues/557/show_partial?partial=issues%2Fdiscussion_stats">
</div>

<div class="discussion-sidebar-item sidebar-labels js-discussion-sidebar-item">
  <!-- </textarea> --><!-- '"` --><form accept-charset="UTF-8" action="/mapsforge/mapsforge/issues/557?partial=issues%2Fsidebar%2Fshow%2Flabels" class="js-issue-sidebar-form" data-form-nonce="696f0c93ae318cad79a449edc754d07f345c39e1" data-remote="true" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="_method" type="hidden" value="put" /><input name="authenticity_token" type="hidden" value="X9wKCvgqedxzZnaMCUFv72Bf9/FmUxgzKo8XTqfyMGKboKG56BeBx9CnmFsqvukGLlAL+HisYdE24tYxCcqNZw==" /></div>
      
  <h3 class="discussion-sidebar-heading">
    Labels
  </h3>


    <div class="labels css-truncate">
      <a href="/mapsforge/mapsforge/labels/enhancement" class="label css-truncate-target linked-labelstyle-84b6eb" title="enhancement">enhancement</a>

</div>

</form></div>

<div class="discussion-sidebar-item sidebar-milestone js-discussion-sidebar-item">
  <!-- </textarea> --><!-- '"` --><form accept-charset="UTF-8" action="/mapsforge/mapsforge/issues/557/set_milestone?partial=issues%2Fsidebar%2Fshow%2Fmilestone" class="js-issue-sidebar-form" data-form-nonce="696f0c93ae318cad79a449edc754d07f345c39e1" data-remote="true" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="_method" type="hidden" value="put" /><input name="authenticity_token" type="hidden" value="zDmuiai6bl8AqU/vu7ml45/Ja2g/M2IAz8L90f2GOYBc70OSQEYQRC7sdCwPk5VRHSeNB+godAf5udiHddbngw==" /></div>
    
  <h3 class="discussion-sidebar-heading">
    Milestone
  </h3>


      No milestone

</form></div>

<div class="discussion-sidebar-item sidebar-assignee js-discussion-sidebar-item">
  <!-- </textarea> --><!-- '"` --><form accept-charset="UTF-8" action="/mapsforge/mapsforge/issues/557?partial=issues%2Fsidebar%2Fshow%2Fassignee" class="js-issue-sidebar-form" data-form-nonce="696f0c93ae318cad79a449edc754d07f345c39e1" data-remote="true" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="_method" type="hidden" value="put" /><input name="authenticity_token" type="hidden" value="jP0+0XssF9F//AGRHimsn9ASHK+NpVnb9OA9eMha2pGuLuqsCdVthbMT3k57FA1vmjT2HV/ty/hReYufuNbTLg==" /></div>
    
  <h3 class="discussion-sidebar-heading">
    Assignee
  </h3>


    <span class="css-truncate">
      No one assigned
</span>

</form></div>


<div id="partial-users-participants" class="discussion-sidebar-item js-socket-channel js-updatable-content"
    data-channel="mapsforge/mapsforge:issue:52546719"
      data-url="/mapsforge/mapsforge/issues/557/show_partial?partial=issues%2Fparticipants"
  >
  <div class="participation">

    <h3 class="discussion-sidebar-heading">
      4 participants
    </h3>
    <div class="participation-avatars">
        <a class="participant-avatar tooltipped tooltipped-s" aria-label="mvglasow" href="/mvglasow"><img alt="@mvglasow" class="avatar" height="20" src="https://avatars0.githubusercontent.com/u/2377496?v=3&amp;s=40" width="20" /> </a>
        <a class="participant-avatar tooltipped tooltipped-s" aria-label="devemux86" href="/devemux86"><img alt="@devemux86" class="avatar" height="20" src="https://avatars3.githubusercontent.com/u/3484020?v=3&amp;s=40" width="20" /> </a>
        <a class="participant-avatar tooltipped tooltipped-s" aria-label="applantation" href="/applantation"><img alt="@applantation" class="avatar" height="20" src="https://avatars3.githubusercontent.com/u/2268671?v=3&amp;s=40" width="20" /> </a>
        <a class="participant-avatar tooltipped tooltipped-s" aria-label="ludwigb" href="/ludwigb"><img alt="@ludwigb" class="avatar" height="20" src="https://avatars2.githubusercontent.com/u/9587769?v=3&amp;s=40" width="20" /> </a>
    </div>
  </div>
</div>




</div>

<div class="discussion-timeline pull-discussion-timeline js-quote-selection-container">

  <div class="js-discussion js-socket-channel" data-channel="mapsforge/mapsforge:marked-as-read:26409872">
    

  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/mvglasow"><img alt="@mvglasow" class="timeline-comment-avatar" height="48" src="https://avatars0.githubusercontent.com/u/2377496?v=3&amp;s=96" width="48" /></a>
    <div id="issue-52546719"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container "
     data-body-version="49316ad4a7f9d3a6f4dde2114af37023">

  <div class="timeline-comment-header ">




  <div class="timeline-comment-header-text">

    <strong>
      <a href="/mvglasow" class="author">mvglasow</a>
    </strong>

    commented

    <a href="#issue-52546719" class="timestamp">
      <time datetime="2014-12-20T01:29:23Z" is="relative-time">Dec 20, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body markdown-format js-comment-body">
          <p>Includes improvements discussed with Emux and Ludwig:</p>

<ul>
<li>Read entire cache dir when initializing a persistent cache</li>
<li>Reliably enforce cache size for persistent cache (data from previous instances is now included in the count)</li>
<li>Fixed NPE which occasionally occurred in FileSystemTileCache#containsKey() when persistence was enabled</li>
<li>Added test case for persistent tile cache</li>
<li>Added missing compatibility constructors and helper methods for apps migrating from 0.5.0</li>
<li>Use file timestamp to determine age of map file</li>
<li>Changed TTL to TimeToLive in identifiers</li>
<li>Comment for default TTL (86400000 millis = 1 day)</li>
<li>Changed default Mapnik TTL to 8279s (current OSM setting) and added comment</li>
</ul>

<p>As mentioned before, in order to enforce cache size (and also to fix the NPE Ludwig found) I now examine the entire cache dir when the cache is initialized and enter anything I find there in the lruCache. This might affect startup performance if the cache dir holds a large number of files.</p>
      </div>
    </div>

  </div>
</div>

  </div>
  
<div class="discussion-item discussion-commits" id="commits-pushed-d86672b">
    <div class="discussion-item-header">
      <span class="octicon octicon-repo-push discussion-item-icon"></span>
      <span class="author" truncate="true">mvglasow</span>
      added
        some commits
      <a href="#commits-pushed-d86672b" class="timestamp">
        <time datetime="2014-12-16T20:42:47Z" is="relative-time">Dec 16, 2014</time>
      </a>
    </div>
  <div class="discussion-item-body">
    <table class="timeline-commits">
      

<tr class="commit js-details-container js-socket-channel js-updatable-content"
    data-channel="mapsforge/mapsforge:commit:d86672b46a44ed6bb1371072d5c56944ca5dfe2e"
    data-url="/mapsforge/mapsforge/commit/d86672b46a44ed6bb1371072d5c56944ca5dfe2e/show_partial?partial=commit%2Fcondensed"
  >

  <td class="commit-icon">
      <span class="octicon octicon-git-commit"></span>
  </td>

    <td class="commit-gravatar">
      <img alt="" class="avatar avatar-small" height="16" src="https://2.gravatar.com/avatar/9a9d13c2a8f8e3bd2cf8b75590c095cf?d=https%3A%2F%2Fassets-cdn.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png&amp;r=x&amp;s=140" width="16" />
    </td>

    <td class="commit-author">
      <strong><span class="author">mvglasow</span></strong>
    </td>

  <td class="commit-message">
      <code><a href="/mvglasow/mapsforge/commit/d86672b46a44ed6bb1371072d5c56944ca5dfe2e" class="message" data-pjax="true" title="Persistent Cache: cleaned up version

Signed-off-by: mvglasow &lt;michael -at- vonglasow.com&gt;">Persistent Cache: cleaned up version</a></code>

        <span class="hidden-text-expander inline">
          <a href="#" class="js-details-target">&hellip;</a>
        </span>
        <div class="commit-desc"><pre>Signed-off-by: mvglasow &lt;michael -at- vonglasow.com&gt;</pre></div>

  </td>

  <td class="commit-meta">

        


      <code><a href="/mvglasow/mapsforge/commit/d86672b46a44ed6bb1371072d5c56944ca5dfe2e" class="commit-id">d86672b</a></code>
  </td>
</tr>


<tr class="commit js-details-container js-socket-channel js-updatable-content"
    data-channel="mapsforge/mapsforge:commit:e318562ab34f9c37e9205434d9e0af11c76b7b06"
    data-url="/mapsforge/mapsforge/commit/e318562ab34f9c37e9205434d9e0af11c76b7b06/show_partial?partial=commit%2Fcondensed"
  >

  <td class="commit-icon">
      <span class="octicon octicon-git-commit"></span>
  </td>

    <td class="commit-gravatar">
      <img alt="" class="avatar avatar-small" height="16" src="https://2.gravatar.com/avatar/9a9d13c2a8f8e3bd2cf8b75590c095cf?d=https%3A%2F%2Fassets-cdn.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png&amp;r=x&amp;s=140" width="16" />
    </td>

    <td class="commit-author">
      <strong><span class="author">mvglasow</span></strong>
    </td>

  <td class="commit-message">
      <code><a href="/mvglasow/mapsforge/commit/e318562ab34f9c37e9205434d9e0af11c76b7b06" class="message" data-pjax="true" title="Persistent cache: Improvements based on feedback

Read entire cache dir when initializing a persistent tile cache
Obey cache size with persistence enabled
Fix potential NPE in FileSystemTileCache#containsKey() with persistence on
Compatibility constructors for apps developed for 0.5.0
Use file timestamp to determine age of map file
Rename TTL to TimeToLive in all identifiers
Comment for default TTL
Change Mapnik default TTL to 8279 sec and add comment

Signed-off-by: mvglasow &lt;michael -at- vonglasow.com&gt;">Persistent cache: Improvements based on feedback</a></code>

        <span class="hidden-text-expander inline">
          <a href="#" class="js-details-target">&hellip;</a>
        </span>
        <div class="commit-desc"><pre>Read entire cache dir when initializing a persistent tile cache
Obey cache size with persistence enabled
Fix potential NPE in FileSystemTileCache#containsKey() with persistence on
Compatibility constructors for apps developed for 0.5.0
Use file timestamp to determine age of map file
Rename TTL to TimeToLive in all identifiers
Comment for default TTL
Change Mapnik default TTL to 8279 sec and add comment

Signed-off-by: mvglasow &lt;michael -at- vonglasow.com&gt;</pre></div>

  </td>

  <td class="commit-meta">

        


      <code><a href="/mvglasow/mapsforge/commit/e318562ab34f9c37e9205434d9e0af11c76b7b06" class="commit-id">e318562</a></code>
  </td>
</tr>

    </table>
  </div>
</div>

  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/devemux86"><img alt="@devemux86" class="timeline-comment-avatar" height="48" src="https://avatars3.githubusercontent.com/u/3484020?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-67731466"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container collaborator-comment"
     data-body-version="5db0fea55fe73e7a9e993b6027a91d4d">

  <div class="timeline-comment-header ">


    <span class="timeline-comment-label">Collaborator</span>


  <div class="timeline-comment-header-text">

    <strong>
      <a href="/devemux86" class="author">devemux86</a>
    </strong>

    commented

    <a href="#issuecomment-67731466" class="timestamp">
      <time datetime="2014-12-20T10:24:19Z" is="relative-time">Dec 20, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body markdown-format js-comment-body">
          <p>Thanks Michael for the report and for keeping the 2nd commit separate (we can check more easily the changes).</p>

<ul>
<li><p>I think at <code>AndroidUtil.createTileCache</code> methods we should have also unchanged ones for compatibility reasons.<br>
So some additions / modifications could be needed in order to have the old 4 ones and 2 new with all the thread and persistent options (now the methods that are not using the <code>screenRatio</code> are all changed).</p></li>
<li><p>In the file system the tile cache follows the z/x/y pattern.<br>
(The <code>TileStoreLayer</code> has as default the z/y/x pattern)</p></li>
<li><p>For the startup performance we need to be as fast as possible.<br>
Maybe using a threaded approach?</p></li>
</ul>
      </div>
    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/applantation"><img alt="@applantation" class="timeline-comment-avatar" height="48" src="https://avatars3.githubusercontent.com/u/2268671?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-67731490"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container collaborator-comment"
     data-body-version="ef1ae07ec9f47efa20469e881798dcd7">

  <div class="timeline-comment-header ">


    <span class="timeline-comment-label">Collaborator</span>


  <div class="timeline-comment-header-text">
      <a href="#issuecomment-67731490" class="comment-type-icon octicon octicon-mail-read" title="This comment left via email reply."></a>

    <strong>
      <a href="/applantation" class="author">applantation</a>
    </strong>

    commented

    <a href="#issuecomment-67731490" class="timestamp">
      <time datetime="2014-12-20T10:25:29Z" is="relative-time">Dec 20, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body email-format js-comment-body">
          <div class="email-fragment">I am just looking at it now, will comment later.</div>
<span class="email-hidden-toggle"><a href="#">…</a></span><div class="email-hidden-reply" style="display:none">
<div class="email-quoted-reply">On 20 December 2014 at 11:24, Emux &lt;notifications@github.com&gt; wrote:

 Thanks Michael for the report and for keeping the 2nd commit separate (we
 can check more easily the changes).

    -

    I think at AndroidUtil.createTileCache methods we should have also
    unchanged ones for compatibility reasons.
    So some additions / modifications could be needed in order to have the
    old 4 ones and 2 new with all the thread and persistent options (now the
    methods that are not using the screenRatio are all changed).
    -

    In the file system the tile cache follows the z/x/y pattern.
    (The TileStoreLayer has as default the z/y/x pattern)
    -

    For the startup performance we need to be as fast as possible.
    Maybe using a threaded approach?

 —
 Reply to this email directly or view it on GitHub
 &lt;<a href="https://github.com/mapsforge/mapsforge/pull/557#issuecomment-67731466">https://github.com/mapsforge/mapsforge/pull/557#issuecomment-67731466</a>&gt;.
</div>
</div>
      </div>
    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/mvglasow"><img alt="@mvglasow" class="timeline-comment-avatar" height="48" src="https://avatars0.githubusercontent.com/u/2377496?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-67734566"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container "
     data-body-version="8d3f05bb67a529774a5688dd806ffa87">

  <div class="timeline-comment-header ">




  <div class="timeline-comment-header-text">

    <strong>
      <a href="/mvglasow" class="author">mvglasow</a>
    </strong>

    commented

    <a href="#issuecomment-67734566" class="timestamp">
      <time datetime="2014-12-20T12:41:42Z" is="relative-time">Dec 20, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body markdown-format js-comment-body">
          <ul>
<li><p><code>AndroidUtil.createTileCache</code>: I missed those, will add compatibility methods here too. I'll go through the code once more to make sure there are no other methods that need to be adapted for full API compatibility.</p></li>
<li><p>File system tile cache: I understand that this is merely a documentation issue, right? Out of curiosity – why the z/y/x pattern for <code>TileStoreLayer</code>? The TMS standard, to which the docs refer, specifies z/x/y (see <a href="http://wiki.osgeo.org/wiki/Tile_Map_Service_Specification#Tile_Resources">http://wiki.osgeo.org/wiki/Tile_Map_Service_Specification#Tile_Resources</a>), and I see that confimed by briefly glimpsing at some OpenLayers-based web page.</p></li>
<li><p>Startup performance and threading: I can try to reuse more of the standard code, so reading data from the previous instance will happen in a separate thread if the cache is threaded. Maybe I can set up a test case to measure performance (create a tile cache, load m×n tiles at zoom level k as well as all their parent tiles, destroy it, create a new one and measure how long rebuilding takes.)</p></li>
</ul>
      </div>
    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/devemux86"><img alt="@devemux86" class="timeline-comment-avatar" height="48" src="https://avatars3.githubusercontent.com/u/3484020?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-67735140"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container collaborator-comment"
     data-body-version="6d8ed8aba525af40bf65476a56ecd94d">

  <div class="timeline-comment-header ">


    <span class="timeline-comment-label">Collaborator</span>


  <div class="timeline-comment-header-text">

    <strong>
      <a href="/devemux86" class="author">devemux86</a>
    </strong>

    commented

    <a href="#issuecomment-67735140" class="timestamp">
      <time datetime="2014-12-20T13:03:20Z" is="relative-time">Dec 20, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body markdown-format js-comment-body">
          <p>My thoughts about the pattern have emerged due to <a href="https://github.com/mvglasow/mapsforge/commit/e318562ab34f9c37e9205434d9e0af11c76b7b06#diff-187ae3feaa74b08b44371bbc1c7288bbR397" class="commit-link">mvglasow@<tt>e318562</tt>#diff-187ae3feaa74b08b44371bbc1c7288bbR397</a> where the reading of the cache directory takes place and eventually the construction of the keys.<br>
I'd suggest to follow the default pattern here.</p>

<p>Yes the common practice is z/x/y<br>
<a href="http://wiki.openstreetmap.org/wiki/Slippy_map_tilenames">http://wiki.openstreetmap.org/wiki/Slippy_map_tilenames</a><br>
<a href="http://www.maptiler.org/google-maps-coordinates-tile-bounds-projection/">http://www.maptiler.org/google-maps-coordinates-tile-bounds-projection/</a><br>
and in <code>TileStoreLayer</code> we have indeed as "default" the z/y/x pattern (something that confused me too first).</p>
      </div>
    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/mvglasow"><img alt="@mvglasow" class="timeline-comment-avatar" height="48" src="https://avatars0.githubusercontent.com/u/2377496?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-67735513"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container "
     data-body-version="105d43e9116645d047a1a4496abb1a15">

  <div class="timeline-comment-header ">




  <div class="timeline-comment-header-text">

    <strong>
      <a href="/mvglasow" class="author">mvglasow</a>
    </strong>

    commented

    <a href="#issuecomment-67735513" class="timestamp">
      <time datetime="2014-12-20T13:17:00Z" is="relative-time">Dec 20, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body markdown-format js-comment-body">
          <p>In reality, I probably should remove the reference to z/x/y from the comment because the code is agnostic to that. If the cache directory is at <code>/path/to/cache/dir</code> and the method finds a tile at <code>/path/to/cache/dir/3/2/1.tile</code>, it will create an entry with key <code>3/2/1</code>.</p>

<p>At that point it doesn't matter whether the convention is z/x/y or z/y/x or even x/y/z – the code will handle anything gracefully, as long as the path depth is correct (two levels of subdirs from the cache path) and the file has the correct extension. So the following would be rejected:</p>

<ul>
<li> <code>/path/to/cache/dir/3/2.tile</code> – incorrect path depth</li>
<li> <code>/path/to/cache/dir/3/2/1/0.tile</code> – incorrect path depth</li>
<li> <code>/path/to/cache/dir/3/2/1.png</code> – incorrect extension</li>
</ul>
      </div>
    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/devemux86"><img alt="@devemux86" class="timeline-comment-avatar" height="48" src="https://avatars3.githubusercontent.com/u/3484020?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-67735752"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container collaborator-comment"
     data-body-version="7015440590904d38e35615ff0672d21c">

  <div class="timeline-comment-header ">


    <span class="timeline-comment-label">Collaborator</span>


  <div class="timeline-comment-header-text">

    <strong>
      <a href="/devemux86" class="author">devemux86</a>
    </strong>

    commented

    <a href="#issuecomment-67735752" class="timestamp">
      <time datetime="2014-12-20T13:25:41Z" is="relative-time">Dec 20, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body markdown-format js-comment-body">
          <p>+1</p>
      </div>
    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/applantation"><img alt="@applantation" class="timeline-comment-avatar" height="48" src="https://avatars3.githubusercontent.com/u/2268671?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-67735758"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container collaborator-comment"
     data-body-version="4564c7a6d99e83510b17c9d95cdcd648">

  <div class="timeline-comment-header ">


    <span class="timeline-comment-label">Collaborator</span>


  <div class="timeline-comment-header-text">
      <a href="#issuecomment-67735758" class="comment-type-icon octicon octicon-mail-read" title="This comment left via email reply."></a>

    <strong>
      <a href="/applantation" class="author">applantation</a>
    </strong>

    commented

    <a href="#issuecomment-67735758" class="timestamp">
      <time datetime="2014-12-20T13:25:56Z" is="relative-time">Dec 20, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body email-format js-comment-body">
          <div class="email-fragment">I would prefer
private void readCacheDirectory() {
...
}

to be rewritten with a bit more code reuse and not to have logging on dead
branches.
The code duplication for validFile and valid Directory should go into
separate methods (cleaner, easier to change).

I am just testing, but I only have another few minutes, so I am sending
this off now. More later.</div>
<span class="email-hidden-toggle"><a href="#">…</a></span><div class="email-hidden-reply" style="display:none">
<div class="email-quoted-reply">On 20 December 2014 at 13:41, mvglasow &lt;notifications@github.com&gt; wrote:


    -

    AndroidUtil.createTileCache: I missed those, will add compatibility
    methods here too. I'll go through the code once more to make sure there are
    no other methods that need to be adapted for full API compatibility.
    -

    File system tile cache: I understand that this is merely a
    documentation issue, right? Out of curiosity – why the z/y/x pattern for
    TileStoreLayer? The TMS standard, to which the docs refer, specifies
    z/x/y (see
    <a href="http://wiki.osgeo.org/wiki/Tile_Map_Service_Specification#Tile_Resources">http://wiki.osgeo.org/wiki/Tile_Map_Service_Specification#Tile_Resources</a>),
    and I see that confimed by briefly glimpsing at some OpenLayers-based web
    page.
    -

    Startup performance and threading: I can try to reuse more of the
    standard code, so reading data from the previous instance will happen in a
    separate thread if the cache is threaded. Maybe I can set up a test case to
    measure performance (create a tile cache, load m×n tiles at zoom level k as
    well as all their parent tiles, destroy it, create a new one and measure
    how long rebuilding takes.)

 —
 Reply to this email directly or view it on GitHub
 &lt;<a href="https://github.com/mapsforge/mapsforge/pull/557#issuecomment-67734566">https://github.com/mapsforge/mapsforge/pull/557#issuecomment-67734566</a>&gt;.
</div>
</div>
      </div>
    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/ludwigb"><img alt="@ludwigb" class="timeline-comment-avatar" height="48" src="https://avatars2.githubusercontent.com/u/9587769?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-67740942"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container collaborator-comment"
     data-body-version="4c64c666ea0d806aac5df7d35da6dea9">

  <div class="timeline-comment-header ">


    <span class="timeline-comment-label">Collaborator</span>


  <div class="timeline-comment-header-text">
      <a href="#issuecomment-67740942" class="comment-type-icon octicon octicon-mail-read" title="This comment left via email reply."></a>

    <strong>
      <a href="/ludwigb" class="author">ludwigb</a>
    </strong>

    commented

    <a href="#issuecomment-67740942" class="timestamp">
      <time datetime="2014-12-20T16:29:41Z" is="relative-time">Dec 20, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body email-format js-comment-body">
          <div class="email-fragment">Just found an interesting problem, that totally confused me for quite some
time today.

It is replicable with the Samples app:

   1. Start Samples/RenderthemeV4 app and let it create the tiles
   2. Go to Settings and see that the options for the RenderthemeStyleMenu
   are there. They are (at the bottom of the Settings menu).
   3. Go back to the map and return to main Samples menu.
   4. Enter RenderthemeV4 example again. The tiles will now all come from
   the persistent tile cache.
   5. Go to Settings and the RenderthemeStyleMenu (at the bottom of
   Settings) is gone.

The problem is that the style menu is only created when the Rendertheme is
being parsed, but when all the tiles come from the cache, the rendertheme
does not get created in the Databaserenderer TileBitmap
executeJob(RendererJob rendererJob) {

I do not really have a good solution right now. I always thought that that
part is a bit messed up, but until now it never showed. At least I now
understand the reason.

Ludwig</div>
<span class="email-hidden-toggle"><a href="#">…</a></span><div class="email-hidden-reply" style="display:none">
<div class="email-quoted-reply">On 20 December 2014 at 14:25, Ludwig &lt;notifications@github.com&gt; wrote: &gt; &gt; I would prefer &gt; private void readCacheDirectory() { &gt; ... &gt; } &gt; &gt; to be rewritten with a bit more code reuse and not to have logging on dead &gt; branches. &gt; The code duplication for validFile and valid Directory should go into &gt; separate methods (cleaner, easier to change). &gt; &gt; I am just testing, but I only have another few minutes, so I am sending &gt; this off now. More later. &gt; &gt; &gt; On 20 December 2014 at 13:41, mvglasow &lt;notifications@github.com&gt; wrote:
 &gt;
 &gt;
 &gt; -
 &gt;
 &gt; AndroidUtil.createTileCache: I missed those, will add compatibility
 &gt; methods here too. I'll go through the code once more to make sure there
 are
 &gt; no other methods that need to be adapted for full API compatibility.
 &gt; -
 &gt;
 &gt; File system tile cache: I understand that this is merely a
 &gt; documentation issue, right? Out of curiosity – why the z/y/x pattern for
 &gt; TileStoreLayer? The TMS standard, to which the docs refer, specifies
 &gt; z/x/y (see
 &gt; <a href="http://wiki.osgeo.org/wiki/Tile_Map_Service_Specification#Tile_Resources">http://wiki.osgeo.org/wiki/Tile_Map_Service_Specification#Tile_Resources</a>),

 &gt; and I see that confimed by briefly glimpsing at some OpenLayers-based
 web
 &gt; page.
 &gt; -
 &gt;
 &gt; Startup performance and threading: I can try to reuse more of the
 &gt; standard code, so reading data from the previous instance will happen in
 a
 &gt; separate thread if the cache is threaded. Maybe I can set up a test case
 to
 &gt; measure performance (create a tile cache, load m×n tiles at zoom level k
 as
 &gt; well as all their parent tiles, destroy it, create a new one and measure
 &gt; how long rebuilding takes.)
 &gt;
 &gt; —
 &gt; Reply to this email directly or view it on GitHub
 &gt; &lt;<a href="https://github.com/mapsforge/mapsforge/pull/557#issuecomment-67734566">https://github.com/mapsforge/mapsforge/pull/557#issuecomment-67734566</a>&gt;.

 &gt;

 —
 Reply to this email directly or view it on GitHub
 &lt;<a href="https://github.com/mapsforge/mapsforge/pull/557#issuecomment-67735758">https://github.com/mapsforge/mapsforge/pull/557#issuecomment-67735758</a>&gt;.
</div>
</div>
      </div>
    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/mvglasow"><img alt="@mvglasow" class="timeline-comment-avatar" height="48" src="https://avatars0.githubusercontent.com/u/2377496?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-67773771"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container "
     data-body-version="9e867a241e639880c9538e1226348e27">

  <div class="timeline-comment-header ">




  <div class="timeline-comment-header-text">

    <strong>
      <a href="/mvglasow" class="author">mvglasow</a>
    </strong>

    commented

    <a href="#issuecomment-67773771" class="timestamp">
      <time datetime="2014-12-21T15:29:56Z" is="relative-time">Dec 21, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body markdown-format js-comment-body">
          <p><a href="https://github.com/applantation" class="user-mention">@applantation</a> what do you mean by "dead branches"? Those that don't refer to valid dirs/files? I've dropped that while adding <code>isValidDirectory()</code> and <code>isValidFile()</code> methods.</p>

<p>Since the two new methods allow their <code>file</code> argument to be null, I've also added a null check to <code>isValidCacheDirectory</code>.</p>

<p>About the Samples app: is there anything that needs to be fixed in my code?</p>
      </div>
    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/ludwigb"><img alt="@ludwigb" class="timeline-comment-avatar" height="48" src="https://avatars2.githubusercontent.com/u/9587769?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-67776854"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container collaborator-comment"
     data-body-version="c08be1d6ac65076688083a0d55ffeea9">

  <div class="timeline-comment-header ">


    <span class="timeline-comment-label">Collaborator</span>


  <div class="timeline-comment-header-text">
      <a href="#issuecomment-67776854" class="comment-type-icon octicon octicon-mail-read" title="This comment left via email reply."></a>

    <strong>
      <a href="/ludwigb" class="author">ludwigb</a>
    </strong>

    commented

    <a href="#issuecomment-67776854" class="timestamp">
      <time datetime="2014-12-21T17:07:36Z" is="relative-time">Dec 21, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body email-format js-comment-body">
          <div class="email-fragment">I am just trying to fix this render theme problem, which I hope will be a
fix that does not affect your patch.

Will look at your changes a bit later.

Ludwig</div>
<span class="email-hidden-toggle"><a href="#">…</a></span><div class="email-hidden-reply" style="display:none">
<div class="email-quoted-reply">On 21 December 2014 at 16:29, mvglasow &lt;notifications@github.com&gt; wrote:

 <a href="https://github.com/applantation" class="user-mention">@applantation</a> &lt;<a href="https://github.com/applantation">https://github.com/applantation</a>&gt; what do you mean by "dead
 branches"? Those that don't refer to valid dirs/files? I've dropped that
 while adding isValidDirectory() and isValidFile() methods.

 Since the two new methods allow their file argument to be null, I've also
 added a null check to isValidCacheDirectory.

 About the Samples app: is there anything that needs to be fixed in my code?

 —
 Reply to this email directly or view it on GitHub
 &lt;<a href="https://github.com/mapsforge/mapsforge/pull/557#issuecomment-67773771">https://github.com/mapsforge/mapsforge/pull/557#issuecomment-67773771</a>&gt;.
</div>
</div>
      </div>
    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/applantation"><img alt="@applantation" class="timeline-comment-avatar" height="48" src="https://avatars3.githubusercontent.com/u/2268671?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-67788141"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container collaborator-comment"
     data-body-version="69c53b8fb02f4dfe7afc31f0de14bdb2">

  <div class="timeline-comment-header ">


    <span class="timeline-comment-label">Collaborator</span>


  <div class="timeline-comment-header-text">
      <a href="#issuecomment-67788141" class="comment-type-icon octicon octicon-mail-read" title="This comment left via email reply."></a>

    <strong>
      <a href="/applantation" class="author">applantation</a>
    </strong>

    commented

    <a href="#issuecomment-67788141" class="timestamp">
      <time datetime="2014-12-21T22:40:00Z" is="relative-time">Dec 21, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body email-format js-comment-body">
          <div class="email-fragment">I just pushed a fix for the problem I described to dev, it moves the
parsing of the rendertheme into the creation of the TileRendererLayer,
rather than delay it to the point when tiles are rendered. This does not
change any user code. (The only real disadvantage is that this happens now
on the UI thread, but moving the parsing into a separate thread is possible
(via some sort of future) and I will look into that.

It looks like that this does not affect your pull request, but it needs to
be rebased on dev, I did this:

git fetch origin refs/pull/557/head:refs/remotes/pr/557

git checkout pr/557

git rebase dev

Ludwig</div>
<span class="email-hidden-toggle"><a href="#">…</a></span><div class="email-hidden-reply" style="display:none">
<div class="email-quoted-reply">On 21 December 2014 at 18:07, ludwigb &lt;notifications@github.com&gt; wrote: &gt; &gt; I am just trying to fix this render theme problem, which I hope will be a &gt; fix that does not affect your patch. &gt; &gt; Will look at your changes a bit later. &gt; &gt; Ludwig &gt; &gt; On 21 December 2014 at 16:29, mvglasow &lt;notifications@github.com&gt; wrote:
 &gt;
 &gt; <a href="https://github.com/applantation" class="user-mention">@applantation</a> &lt;<a href="https://github.com/applantation">https://github.com/applantation</a>&gt; what do you mean by
 "dead
 &gt; branches"? Those that don't refer to valid dirs/files? I've dropped that
 &gt; while adding isValidDirectory() and isValidFile() methods.
 &gt;
 &gt; Since the two new methods allow their file argument to be null, I've
 also
 &gt; added a null check to isValidCacheDirectory.
 &gt;
 &gt; About the Samples app: is there anything that needs to be fixed in my
 code?
 &gt;
 &gt; —
 &gt; Reply to this email directly or view it on GitHub
 &gt; &lt;<a href="https://github.com/mapsforge/mapsforge/pull/557#issuecomment-67773771">https://github.com/mapsforge/mapsforge/pull/557#issuecomment-67773771</a>&gt;.

 &gt;

 —
 Reply to this email directly or view it on GitHub
 &lt;<a href="https://github.com/mapsforge/mapsforge/pull/557#issuecomment-67776854">https://github.com/mapsforge/mapsforge/pull/557#issuecomment-67776854</a>&gt;.
</div>
</div>
      </div>
    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/devemux86"><img alt="@devemux86" class="timeline-comment-avatar" height="48" src="https://avatars3.githubusercontent.com/u/3484020?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-67822182"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container collaborator-comment"
     data-body-version="6a5eda2b5a6f4d7e94a4c01d96bf92c1">

  <div class="timeline-comment-header ">


    <span class="timeline-comment-label">Collaborator</span>


  <div class="timeline-comment-header-text">

    <strong>
      <a href="/devemux86" class="author">devemux86</a>
    </strong>

    commented

    <a href="#issuecomment-67822182" class="timestamp">
      <time datetime="2014-12-22T10:24:40Z" is="relative-time">Dec 22, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body markdown-format js-comment-body">
          <p>Yes I think I can see a performance hit on the rendering because of the render theme's parsing move.</p>
      </div>
    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/ludwigb"><img alt="@ludwigb" class="timeline-comment-avatar" height="48" src="https://avatars2.githubusercontent.com/u/9587769?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-67824988"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container collaborator-comment"
     data-body-version="5af92c7ebdfd1280c04538b605cadb95">

  <div class="timeline-comment-header ">


    <span class="timeline-comment-label">Collaborator</span>


  <div class="timeline-comment-header-text">
      <a href="#issuecomment-67824988" class="comment-type-icon octicon octicon-mail-read" title="This comment left via email reply."></a>

    <strong>
      <a href="/ludwigb" class="author">ludwigb</a>
    </strong>

    commented

    <a href="#issuecomment-67824988" class="timestamp">
      <time datetime="2014-12-22T10:57:10Z" is="relative-time">Dec 22, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body email-format js-comment-body">
          <div class="email-fragment">Yes, I think that is when the UI thread gets blocked. Moving that into a
separate thread (but one that will run whether or not a tile gets rendered)
should remove that again.</div>
<span class="email-hidden-toggle"><a href="#">…</a></span><div class="email-hidden-reply" style="display:none">
<div class="email-quoted-reply">On 22 December 2014 at 11:24, Emux &lt;notifications@github.com&gt; wrote:

 Yes I think I can see a performance hit on the first rendering because of
 the render theme's parsing move.

 —
 Reply to this email directly or view it on GitHub
 &lt;<a href="https://github.com/mapsforge/mapsforge/pull/557#issuecomment-67822182">https://github.com/mapsforge/mapsforge/pull/557#issuecomment-67822182</a>&gt;.
</div>
</div>
      </div>
    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/mvglasow"><img alt="@mvglasow" class="timeline-comment-avatar" height="48" src="https://avatars0.githubusercontent.com/u/2377496?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-67832703"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container "
     data-body-version="86a7ba9e7fef678268d2dad7cc340e40">

  <div class="timeline-comment-header ">




  <div class="timeline-comment-header-text">

    <strong>
      <a href="/mvglasow" class="author">mvglasow</a>
    </strong>

    commented

    <a href="#issuecomment-67832703" class="timestamp">
      <time datetime="2014-12-22T12:40:26Z" is="relative-time">Dec 22, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body markdown-format js-comment-body">
          <p>Talking about threads: I looked through the code again, hoping that I could use the existing worker thread for my purposes. However, only creating the list entries one by one could be offloaded into the worker thread if I did it that way. The bulk of the work is to parse the directory tree, though, and that would have remained in the main thread.</p>

<p>To clarify: at this stage I am just feeding key/file mappings into <code>lruCache</code> – no parsing of actual tile data takes place here.</p>

<p>To get a feeling for startup performance when reading data from a previous instance, I set up a test that populates a cache with the area of a city rendered at zoom level 16 and all lower ones, then has another instance re-read the cache. I did some test runs on my machine, and rebuilding a cache of ~4600 tiles took somewhere in the range of 100–150 ms.</p>

<p>Would such a delay be acceptable? If not, I'd probably need a hand with the thread stuff – I'd like to see Ludwig's commit for moving render theme parsing into a separate thread so I could copy from his code.</p>
      </div>
    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/applantation"><img alt="@applantation" class="timeline-comment-avatar" height="48" src="https://avatars3.githubusercontent.com/u/2268671?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-67835243"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container collaborator-comment"
     data-body-version="66f2ddbc42d8b447dd42369d1998badf">

  <div class="timeline-comment-header ">


    <span class="timeline-comment-label">Collaborator</span>


  <div class="timeline-comment-header-text">
      <a href="#issuecomment-67835243" class="comment-type-icon octicon octicon-mail-read" title="This comment left via email reply."></a>

    <strong>
      <a href="/applantation" class="author">applantation</a>
    </strong>

    commented

    <a href="#issuecomment-67835243" class="timestamp">
      <time datetime="2014-12-22T13:10:43Z" is="relative-time">Dec 22, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body email-format js-comment-body">
          <div class="email-fragment">The general rule for Android is not to have anything long-running or
blocking, e.g. I/O ops, on the UI-thread. What may seem acceptable
behaviour on a fast device, might trigger an ANR on others, which is
something to avoid.

I was just working on a solution with futures for the Rendertheme parsing,
but I now have something else to do, so will not be able to fix this today.

Ludwig</div>
<span class="email-hidden-toggle"><a href="#">…</a></span><div class="email-hidden-reply" style="display:none">
<div class="email-quoted-reply">On 22 December 2014 at 13:40, mvglasow &lt;notifications@github.com&gt; wrote:

 Talking about threads: I looked through the code again, hoping that I
 could use the existing worker thread for my purposes. However, only
 creating the list entries one by one could be offloaded into the worker
 thread if I did it that way. The bulk of the work is to parse the directory
 tree, though, and that would have remained in the main thread.

 To clarify: at this stage I am just feeding key/file mappings into
 lruCache – no parsing of actual tile data takes place here.

 To get a feeling for startup performance when reading data from a previous
 instance, I set up a test that populates a cache with the area of a city
 rendered at zoom level 16 and all lower ones, then has another instance
 re-read the cache. I did some test runs on my machine, and rebuilding a
 cache of ~4600 tiles took somewhere in the range of 100–150 ms.

 Would such a delay be acceptable? If not, I'd probably need a hand with
 the thread stuff – I'd like to see Ludwig's commit for moving render theme
 parsing into a separate thread so I could copy from his code.

 —
 Reply to this email directly or view it on GitHub
 &lt;<a href="https://github.com/mapsforge/mapsforge/pull/557#issuecomment-67832703">https://github.com/mapsforge/mapsforge/pull/557#issuecomment-67832703</a>&gt;.
</div>
</div>
      </div>
    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/mvglasow"><img alt="@mvglasow" class="timeline-comment-avatar" height="48" src="https://avatars0.githubusercontent.com/u/2377496?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-67842086"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container "
     data-body-version="c46b87209004f8f128eb64180636657e">

  <div class="timeline-comment-header ">




  <div class="timeline-comment-header-text">
      <a href="#issuecomment-67842086" class="comment-type-icon octicon octicon-mail-read" title="This comment left via email reply."></a>

    <strong>
      <a href="/mvglasow" class="author">mvglasow</a>
    </strong>

    commented

    <a href="#issuecomment-67842086" class="timestamp">
      <time datetime="2014-12-22T14:25:23Z" is="relative-time">Dec 22, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body email-format js-comment-body">
          <div class="email-fragment">No problem, I might not get around to doing a lot of coding myself over
the next few days, so I'll just wait.</div>
      </div>
    </div>

  </div>
</div>

  </div>
  
<div class="discussion-item discussion-commits" id="commits-pushed-8ca5512">
  <div class="discussion-item-body">
    <table class="timeline-commits">
      

<tr class="commit js-details-container js-socket-channel js-updatable-content"
    data-channel="mapsforge/mapsforge:commit:8ca5512f3901939b98380b444ff1ec978fa2e742"
    data-url="/mapsforge/mapsforge/commit/8ca5512f3901939b98380b444ff1ec978fa2e742/show_partial?partial=commit%2Fcondensed"
  >

  <td class="commit-icon">
      <span class="octicon octicon-git-commit"></span>
  </td>

    <td class="commit-gravatar">
      <img alt="" class="avatar avatar-small" height="16" src="https://2.gravatar.com/avatar/9a9d13c2a8f8e3bd2cf8b75590c095cf?d=https%3A%2F%2Fassets-cdn.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png&amp;r=x&amp;s=140" width="16" />
    </td>

    <td class="commit-author">
      <strong><span class="author">mvglasow</span></strong>
    </td>

  <td class="commit-message">
      <code><a href="/mvglasow/mapsforge/commit/8ca5512f3901939b98380b444ff1ec978fa2e742" class="message" data-pjax="true" title="Further persistent-cache improvements

Compatibility versions for all changed methods in AndroidUtil
isValidDirectory and isValidFile methods for FSTC
Improved documentation of readCacheDirectory

Signed-off-by: mvglasow &lt;michael -at- vonglasow.com&gt;">Further persistent-cache improvements</a></code>

        <span class="hidden-text-expander inline">
          <a href="#" class="js-details-target">&hellip;</a>
        </span>
        <div class="commit-desc"><pre>Compatibility versions for all changed methods in AndroidUtil
isValidDirectory and isValidFile methods for FSTC
Improved documentation of readCacheDirectory

Signed-off-by: mvglasow &lt;michael -at- vonglasow.com&gt;</pre></div>

  </td>

  <td class="commit-meta">

        


      <code><a href="/mvglasow/mapsforge/commit/8ca5512f3901939b98380b444ff1ec978fa2e742" class="commit-id">8ca5512</a></code>
  </td>
</tr>

    </table>
  </div>
</div>

  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/mvglasow"><img alt="@mvglasow" class="timeline-comment-avatar" height="48" src="https://avatars0.githubusercontent.com/u/2377496?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-67850090"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container "
     data-body-version="4ba73f8512a7f17118ccb55679615e9d">

  <div class="timeline-comment-header ">




  <div class="timeline-comment-header-text">

    <strong>
      <a href="/mvglasow" class="author">mvglasow</a>
    </strong>

    commented

    <a href="#issuecomment-67850090" class="timestamp">
      <time datetime="2014-12-22T15:34:48Z" is="relative-time">Dec 22, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body markdown-format js-comment-body">
          <p>PS: I just pushed the changes I have made so far (excluding the cache rebuild speed test) in a separate commit.</p>
      </div>
    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/applantation"><img alt="@applantation" class="timeline-comment-avatar" height="48" src="https://avatars3.githubusercontent.com/u/2268671?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-67941672"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container collaborator-comment"
     data-body-version="66b14f20fb632279e742e8a5b446e705">

  <div class="timeline-comment-header ">


    <span class="timeline-comment-label">Collaborator</span>


  <div class="timeline-comment-header-text">
      <a href="#issuecomment-67941672" class="comment-type-icon octicon octicon-mail-read" title="This comment left via email reply."></a>

    <strong>
      <a href="/applantation" class="author">applantation</a>
    </strong>

    commented

    <a href="#issuecomment-67941672" class="timestamp">
      <time datetime="2014-12-23T11:15:36Z" is="relative-time">Dec 23, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body email-format js-comment-body">
          <div class="email-fragment">I have just pushed a changes that moves the rendertheme parsing into a
Future (so it does not block the UI thread anymore and runs on a separate
thread in the background).

This seems to be working very well with the persistent cache changes: now
at startup we pull old tiles from the cache while the rendertheme gets
parsed in the background and is ready when the first new tiles need to get
rendered.

So far I have not seen any concurrency issues, but I will continue to test
(minus Christmas break).

This feels like a big improvement in user perceived performance, which is a
very welcome improvement.

Thanks.

Ludwig</div>
<span class="email-hidden-toggle"><a href="#">…</a></span><div class="email-hidden-reply" style="display:none">
<div class="email-quoted-reply">On 22 December 2014 at 16:34, mvglasow &lt;notifications@github.com&gt; wrote:

 PS: I just pushed the changes I have made so far (excluding the cache
 rebuild speed test) in a separate commit.

 —
 Reply to this email directly or view it on GitHub
 &lt;<a href="https://github.com/mapsforge/mapsforge/pull/557#issuecomment-67850090">https://github.com/mapsforge/mapsforge/pull/557#issuecomment-67850090</a>&gt;.
</div>
</div>
      </div>
    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/devemux86"><img alt="@devemux86" class="timeline-comment-avatar" height="48" src="https://avatars3.githubusercontent.com/u/3484020?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-67944693"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container collaborator-comment"
     data-body-version="bda49280703542070f21e8e50c957061">

  <div class="timeline-comment-header ">


    <span class="timeline-comment-label">Collaborator</span>


  <div class="timeline-comment-header-text">

    <strong>
      <a href="/devemux86" class="author">devemux86</a>
    </strong>

    commented

    <a href="#issuecomment-67944693" class="timestamp">
      <time datetime="2014-12-23T12:02:46Z" is="relative-time">Dec 23, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body markdown-format js-comment-body">
          <p>(We should probably move the conversation about the render theme parsing in mailing list, as it involves the whole library)</p>

<p>I integrated the new commit Ludwig but I still see the performance hit at 1st rendering (compared with 0.5), will continue the tests.</p>
      </div>
    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/ludwigb"><img alt="@ludwigb" class="timeline-comment-avatar" height="48" src="https://avatars2.githubusercontent.com/u/9587769?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-68182610"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container collaborator-comment"
     data-body-version="d12fb1b76fe1408f80f09322ba29990d">

  <div class="timeline-comment-header ">


    <span class="timeline-comment-label">Collaborator</span>


  <div class="timeline-comment-header-text">
      <a href="#issuecomment-68182610" class="comment-type-icon octicon octicon-mail-read" title="This comment left via email reply."></a>

    <strong>
      <a href="/ludwigb" class="author">ludwigb</a>
    </strong>

    commented

    <a href="#issuecomment-68182610" class="timestamp">
      <time datetime="2014-12-27T16:13:48Z" is="relative-time">Dec 27, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body email-format js-comment-body">
          <div class="email-fragment">I have just pushed the changes that Michael proposed and implemented in his
pull-request for a persistent cache feature
<a href="https://github.com/mapsforge/mapsforge/pull/557">https://github.com/mapsforge/mapsforge/pull/557</a>.
Thanks to Michael for putting up with our many change requests.</div>
<span class="email-hidden-toggle"><a href="#">…</a></span><div class="email-hidden-reply" style="display:none">
<div class="email-quoted-reply">On top of Michael's change I have pushed two more changes:     - reading of the tile cache directory in a separate thread to move this    I/O operation off the UI thread    - integration into Samples app with a setting (see    Settings-&gt;Tilecache-&gt;Persistence) whether you want to activate it. Changing    it to False will purge the cache.  What is currently missing is a purge-cache operation if any of the Rendertheme Stylemenu options change (then all the tiles will need to be re-rendered). Might do that later, time permitting.  My impression from limited testing is that particularly for larger-screen devices (such as tablets) the perceptual performance improves as tiles are just reloaded from disk when the activity is restarted.  Ludwig  On 23 December 2014 at 13:02, Emux &lt;notifications@github.com&gt; wrote:
 (We should probably move the conversation about the render theme parsing
 in mailing list, as it involves the whole library)

 I integrated the new commit Ludwig but I still see the performance hit at
 1st rendering (compared with 0.5), will continue the tests.

 —
 Reply to this email directly or view it on GitHub
 &lt;<a href="https://github.com/mapsforge/mapsforge/pull/557#issuecomment-67944693">https://github.com/mapsforge/mapsforge/pull/557#issuecomment-67944693</a>&gt;.
</div>
</div>
      </div>
    </div>

  </div>
</div>

  </div>
  


      


  <div class="discussion-item discussion-item-closed">
    <div class="discussion-item-header" id="event-212280099">

      <span class="octicon octicon-circle-slash discussion-item-icon"></span>
      <img alt="@ludwigb" class="avatar" height="16" src="https://avatars1.githubusercontent.com/u/9587769?v=3&amp;s=32" width="16" />
      <a href="/ludwigb" class="author">ludwigb</a>
      closed this   <a href="https://github.com/mapsforge/mapsforge/pull/557#event-212280099" class="timestamp"><time class="timestamp" datetime="2014-12-28T14:04:50Z" is="relative-time">Dec 28, 2014</time></a>
    </div>
  </div>

  <div class="closed-banner"></div>


  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/mvglasow"><img alt="@mvglasow" class="timeline-comment-avatar" height="48" src="https://avatars0.githubusercontent.com/u/2377496?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-68208893"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container "
     data-body-version="173b3ac4281cfc9a86819431105e145d">

  <div class="timeline-comment-header ">




  <div class="timeline-comment-header-text">
      <a href="#issuecomment-68208893" class="comment-type-icon octicon octicon-mail-read" title="This comment left via email reply."></a>

    <strong>
      <a href="/mvglasow" class="author">mvglasow</a>
    </strong>

    commented

    <a href="#issuecomment-68208893" class="timestamp">
      <time datetime="2014-12-28T14:42:07Z" is="relative-time">Dec 28, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body email-format js-comment-body">
          <div class="email-fragment">Thanks for the merge and the improvements! Glad to finally have the code
in dev!</div>
      </div>
    </div>

  </div>
</div>

  </div>
  <div class="timeline-comment-wrapper js-comment-container">
    <a href="/devemux86"><img alt="@devemux86" class="timeline-comment-avatar" height="48" src="https://avatars3.githubusercontent.com/u/3484020?v=3&amp;s=96" width="48" /></a>
    <div id="issuecomment-68208971"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container collaborator-comment"
     data-body-version="b37c10cf5af69011f69410cb765ebc96">

  <div class="timeline-comment-header ">


    <span class="timeline-comment-label">Collaborator</span>


  <div class="timeline-comment-header-text">

    <strong>
      <a href="/devemux86" class="author">devemux86</a>
    </strong>

    commented

    <a href="#issuecomment-68208971" class="timestamp">
      <time datetime="2014-12-28T14:45:16Z" is="relative-time">Dec 28, 2014</time>
    </a>
  </div>
</div>


  <div class="comment-content">

    <div class="edit-comment-hide">
      <div class="comment-body markdown-body markdown-format js-comment-body">
          <p>I have pushed on dev an addition for complete methods of tile cache creation.</p>

<p>Thanks <a href="https://github.com/mvglasow" class="user-mention">@mvglasow</a> for the PR.</p>
      </div>
    </div>

  </div>
</div>

  </div>
  


      


  <div class="discussion-item discussion-item-labeled">
    <div class="discussion-item-header" id="event-361033383">

      <span class="octicon octicon-tag discussion-item-icon"></span>
      <img alt="@devemux86" class="avatar" height="16" src="https://avatars0.githubusercontent.com/u/3484020?v=3&amp;s=32" width="16" />
      <a href="/devemux86" class="author">devemux86</a>
      added the <span class="label-color" style="background-color: #84b6eb;"><a href="/mapsforge/mapsforge/labels/enhancement" style="color: #1c2733">enhancement</a></span> label <a href="https://github.com/mapsforge/mapsforge/pull/557#event-361033383" class="timestamp"><time class="timestamp" datetime="2015-07-21T11:10:59Z" is="relative-time">Jul 21, 2015</time></a>
    </div>
  </div>






<!-- Rendered timeline since 2015-07-21 04:10:59 -->
<div id="partial-timeline-marker"
      class="js-timeline-marker js-socket-channel js-updatable-content"
      data-channel="mapsforge/mapsforge:pull_request:26409872"
      data-url="/mapsforge/mapsforge/pull/557/show_partial?partial=pull_requests%2Ftimeline_marker&amp;since=1437477059"
      data-last-modified="Tue, 21 Jul 2015 11:10:59 GMT">

    <!-- </textarea> --><!-- '"` --><form accept-charset="UTF-8" action="/mapsforge/mapsforge/notifications/mark?ids=53163288" class="hidden js-timeline-marker-form" data-form-nonce="696f0c93ae318cad79a449edc754d07f345c39e1" data-remote="true" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="CcOOaJbJyxJitUQJxWg20j9nl/L+U0vp2Ryjv6YNq6e0M4SY6FfI7y2sY+PFtLLHIH1cq6RUOh4PwHDv2MdQaw==" /></div>
</form></div>


  </div>

    <div class="discussion-timeline-actions">
          <div class="signed-out-comment">
	<a href="/join" class="btn btn-primary" rel="nofollow">Sign up for free</a>
	<strong>to join this conversation on GitHub</strong>.
	Already have an account?
	<a href="/login?return_to=https%3A%2F%2Fgithub.com%2Fmapsforge%2Fmapsforge%2Fpull%2F557" rel="nofollow">Sign in to comment</a>
</div>


    </div>
</div>

    </div>

  


    <div id="commits_bucket" class="tab-content pull-request-tab-content ">
      
        <div
     class="js-socket-channel js-updatable-content"
     data-channel="mapsforge/mapsforge:branch:persistent-cache-2"
     data-url="/mapsforge/mapsforge/pull/557/show_partial?partial=pull_requests%2Fcommits"
  >

  




    <div class="commits-listing commits-listing-padded js-navigation-container js-active-navigation-container" data-navigation-scroll="page">
      
<div class="commit-group-title">
  <span class="octicon octicon-git-commit"></span>Commits on Dec 16, 2014
</div>

<ol class="commit-group table-list table-list-bordered">
    
<li class="commit commits-list-item table-list-item js-navigation-item js-details-container js-socket-channel js-updatable-content"
      data-channel="mapsforge/mapsforge:commit:d86672b46a44ed6bb1371072d5c56944ca5dfe2e"
      data-url="/mapsforge/mapsforge/commit/d86672b46a44ed6bb1371072d5c56944ca5dfe2e/show_partial?partial=commits%2Fcommits_list_item"
    >

  <div class="table-list-cell commit-avatar-cell">
    <div class="avatar-parent-child">
    <img alt="" class="avatar" height="36" src="https://2.gravatar.com/avatar/9a9d13c2a8f8e3bd2cf8b75590c095cf?d=https%3A%2F%2Fassets-cdn.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png&amp;r=x&amp;s=140" width="36" />
    </div>
  </div>
  <div class="table-list-cell">
    <p class="commit-title ">
        <a href="/mvglasow/mapsforge/commit/d86672b46a44ed6bb1371072d5c56944ca5dfe2e" class="message" data-pjax="true" title="Persistent Cache: cleaned up version

Signed-off-by: mvglasow &lt;michael -at- vonglasow.com&gt;">Persistent Cache: cleaned up version</a>

    <span class="hidden-text-expander inline"><a href="#" class="js-details-target">…</a></span>
    </p>

    <div class="commit-meta">
        <span class="commit-author">mvglasow</span>
 authored <time datetime="2014-12-16T20:42:47Z" is="relative-time">Dec 16, 2014</time>


    </div>

      <div class="commit-desc"><pre>Signed-off-by: mvglasow &lt;michael -at- vonglasow.com&gt;</pre></div>
  </div>
  <div class="commit-links-cell table-list-cell">
    <div class="commit-links-group btn-group">
      <button aria-label="Copy the full SHA" class="js-zeroclipboard btn btn-outline zeroclipboard-button tooltipped tooltipped-s" data-clipboard-text="d86672b46a44ed6bb1371072d5c56944ca5dfe2e" data-copied-hint="Copied!" type="button"><span class="octicon octicon-clippy"></span></button>
      <a href="/mvglasow/mapsforge/commit/d86672b46a44ed6bb1371072d5c56944ca5dfe2e" class="sha btn btn-outline">
        d86672b
      </a>
    </div>
    <a href="/mapsforge/mapsforge/tree/d86672b46a44ed6bb1371072d5c56944ca5dfe2e" aria-label="Browse the repository at this point in the history" class="btn btn-outline tooltipped tooltipped-s" rel="nofollow"><span class="octicon octicon-code"></span></a>
  </div>

</li>

</ol>

      
<div class="commit-group-title">
  <span class="octicon octicon-git-commit"></span>Commits on Dec 20, 2014
</div>

<ol class="commit-group table-list table-list-bordered">
    
<li class="commit commits-list-item table-list-item js-navigation-item js-details-container js-socket-channel js-updatable-content"
      data-channel="mapsforge/mapsforge:commit:e318562ab34f9c37e9205434d9e0af11c76b7b06"
      data-url="/mapsforge/mapsforge/commit/e318562ab34f9c37e9205434d9e0af11c76b7b06/show_partial?partial=commits%2Fcommits_list_item"
    >

  <div class="table-list-cell commit-avatar-cell">
    <div class="avatar-parent-child">
    <img alt="" class="avatar" height="36" src="https://2.gravatar.com/avatar/9a9d13c2a8f8e3bd2cf8b75590c095cf?d=https%3A%2F%2Fassets-cdn.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png&amp;r=x&amp;s=140" width="36" />
    </div>
  </div>
  <div class="table-list-cell">
    <p class="commit-title ">
        <a href="/mvglasow/mapsforge/commit/e318562ab34f9c37e9205434d9e0af11c76b7b06" class="message" data-pjax="true" title="Persistent cache: Improvements based on feedback

Read entire cache dir when initializing a persistent tile cache
Obey cache size with persistence enabled
Fix potential NPE in FileSystemTileCache#containsKey() with persistence on
Compatibility constructors for apps developed for 0.5.0
Use file timestamp to determine age of map file
Rename TTL to TimeToLive in all identifiers
Comment for default TTL
Change Mapnik default TTL to 8279 sec and add comment

Signed-off-by: mvglasow &lt;michael -at- vonglasow.com&gt;">Persistent cache: Improvements based on feedback</a>

    <span class="hidden-text-expander inline"><a href="#" class="js-details-target">…</a></span>
    </p>

    <div class="commit-meta">
        <span class="commit-author">mvglasow</span>
 authored <time datetime="2014-12-20T01:13:26Z" is="relative-time">Dec 20, 2014</time>


    </div>

      <div class="commit-desc"><pre>Read entire cache dir when initializing a persistent tile cache
Obey cache size with persistence enabled
Fix potential NPE in FileSystemTileCache#containsKey() with persistence on
Compatibility constructors for apps developed for 0.5.0
Use file timestamp to determine age of map file
Rename TTL to TimeToLive in all identifiers
Comment for default TTL
Change Mapnik default TTL to 8279 sec and add comment

Signed-off-by: mvglasow &lt;michael -at- vonglasow.com&gt;</pre></div>
  </div>
  <div class="commit-links-cell table-list-cell">
    <div class="commit-links-group btn-group">
      <button aria-label="Copy the full SHA" class="js-zeroclipboard btn btn-outline zeroclipboard-button tooltipped tooltipped-s" data-clipboard-text="e318562ab34f9c37e9205434d9e0af11c76b7b06" data-copied-hint="Copied!" type="button"><span class="octicon octicon-clippy"></span></button>
      <a href="/mvglasow/mapsforge/commit/e318562ab34f9c37e9205434d9e0af11c76b7b06" class="sha btn btn-outline">
        e318562
      </a>
    </div>
    <a href="/mapsforge/mapsforge/tree/e318562ab34f9c37e9205434d9e0af11c76b7b06" aria-label="Browse the repository at this point in the history" class="btn btn-outline tooltipped tooltipped-s" rel="nofollow"><span class="octicon octicon-code"></span></a>
  </div>

</li>

</ol>

      
<div class="commit-group-title">
  <span class="octicon octicon-git-commit"></span>Commits on Dec 22, 2014
</div>

<ol class="commit-group table-list table-list-bordered">
    
<li class="commit commits-list-item table-list-item js-navigation-item js-details-container js-socket-channel js-updatable-content"
      data-channel="mapsforge/mapsforge:commit:8ca5512f3901939b98380b444ff1ec978fa2e742"
      data-url="/mapsforge/mapsforge/commit/8ca5512f3901939b98380b444ff1ec978fa2e742/show_partial?partial=commits%2Fcommits_list_item"
    >

  <div class="table-list-cell commit-avatar-cell">
    <div class="avatar-parent-child">
    <img alt="" class="avatar" height="36" src="https://2.gravatar.com/avatar/9a9d13c2a8f8e3bd2cf8b75590c095cf?d=https%3A%2F%2Fassets-cdn.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png&amp;r=x&amp;s=140" width="36" />
    </div>
  </div>
  <div class="table-list-cell">
    <p class="commit-title ">
        <a href="/mvglasow/mapsforge/commit/8ca5512f3901939b98380b444ff1ec978fa2e742" class="message" data-pjax="true" title="Further persistent-cache improvements

Compatibility versions for all changed methods in AndroidUtil
isValidDirectory and isValidFile methods for FSTC
Improved documentation of readCacheDirectory

Signed-off-by: mvglasow &lt;michael -at- vonglasow.com&gt;">Further persistent-cache improvements</a>

    <span class="hidden-text-expander inline"><a href="#" class="js-details-target">…</a></span>
    </p>

    <div class="commit-meta">
        <span class="commit-author">mvglasow</span>
 authored <time datetime="2014-12-22T15:32:36Z" is="relative-time">Dec 22, 2014</time>


    </div>

      <div class="commit-desc"><pre>Compatibility versions for all changed methods in AndroidUtil
isValidDirectory and isValidFile methods for FSTC
Improved documentation of readCacheDirectory

Signed-off-by: mvglasow &lt;michael -at- vonglasow.com&gt;</pre></div>
  </div>
  <div class="commit-links-cell table-list-cell">
    <div class="commit-links-group btn-group">
      <button aria-label="Copy the full SHA" class="js-zeroclipboard btn btn-outline zeroclipboard-button tooltipped tooltipped-s" data-clipboard-text="8ca5512f3901939b98380b444ff1ec978fa2e742" data-copied-hint="Copied!" type="button"><span class="octicon octicon-clippy"></span></button>
      <a href="/mvglasow/mapsforge/commit/8ca5512f3901939b98380b444ff1ec978fa2e742" class="sha btn btn-outline">
        8ca5512
      </a>
    </div>
    <a href="/mapsforge/mapsforge/tree/8ca5512f3901939b98380b444ff1ec978fa2e742" aria-label="Browse the repository at this point in the history" class="btn btn-outline tooltipped tooltipped-s" rel="nofollow"><span class="octicon octicon-code"></span></a>
  </div>

</li>

</ol>

    </div>
</div>

    </div>


  


    <div id="files_bucket" class="files-bucket tab-content pull-request-tab-content ">

      <div class="flash flash-warn stale-files-tab js-pull-request-stale-files js-socket-channel"
   data-channel="mapsforge/mapsforge:pull_request:26409872:diff"
   data-url="https://github.com/mapsforge/mapsforge/pull/557/live_update">
    This page is out of date. <a href="https://github.com/mapsforge/mapsforge/pull/557/files">Refresh</a> to see the latest.
</div>


      




      <div id='diff' class="uncommentable">
        <div id="toc" class="details-collapse table-of-contents js-details-container">
  <div class="btn-group right" data-ga-load="Diff, view, Viewed Unified Diff">
  <a class="btn btn-sm selected" href="https://github.com/mapsforge/mapsforge/pull/557/files?diff=unified">
    Unified
  </a>
  <a class="btn btn-sm" href="https://github.com/mapsforge/mapsforge/pull/557/files?diff=split">
    Split
  </a>
</div>


  <div class="toc-diff-stats">
    <span class="octicon octicon-diff"></span>
    Showing
    <button type="button" class="btn-link js-details-target">
      23 changed files
    </button>
    with
    <strong>866 additions</strong>
    and <strong>111 deletions</strong>.
  </div>

  <ol class="content collapse js-transitionable">
    <li>
      <span class="diffstat right">
          <span class="text-diff-added">
            +48
          </span>
          <span class="text-diff-deleted">
            −1
          </span>
          <a href="#diff-934094fcfef8211fa2336ddff801bfe0" class="tooltipped tooltipped-s" aria-label="49 lines changed">
            <span class="diffstat-bar">
              <span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span>&#xf053;
            </span>
          </a>
      </span>
      <span class="octicon octicon-diff-modified" title="modified"></span>
      <a href="#diff-934094fcfef8211fa2336ddff801bfe0">mapsforge-core/src/main/java/org/mapsforge/core/graphics/TileBitmap.java</a>
    </li>
    <li>
      <span class="diffstat right">
          <span class="text-diff-added">
            +25
          </span>
          <span class="text-diff-deleted">
            −0
          </span>
          <a href="#diff-bce27ee5d09265cb47b433226184b8b8" class="tooltipped tooltipped-s" aria-label="25 lines changed">
            <span class="diffstat-bar">
              <span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span>
            </span>
          </a>
      </span>
      <span class="octicon octicon-diff-modified" title="modified"></span>
      <a href="#diff-bce27ee5d09265cb47b433226184b8b8">mapsforge-map-android/src/main/java/org/mapsforge/map/android/graphics/AndroidTileBitmap.java</a>
    </li>
    <li>
      <span class="diffstat right">
          <span class="text-diff-added">
            +151
          </span>
          <span class="text-diff-deleted">
            −44
          </span>
          <a href="#diff-f1bd231b9bd80b15bf450608da356fe8" class="tooltipped tooltipped-s" aria-label="195 lines changed">
            <span class="diffstat-bar">
              <span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-deleted">&#xf053;</span>&#xf053;
            </span>
          </a>
      </span>
      <span class="octicon octicon-diff-modified" title="modified"></span>
      <a href="#diff-f1bd231b9bd80b15bf450608da356fe8">mapsforge-map-android/src/main/java/org/mapsforge/map/android/util/AndroidUtil.java</a>
    </li>
    <li>
      <span class="diffstat right">
          <span class="text-diff-added">
            +25
          </span>
          <span class="text-diff-deleted">
            −0
          </span>
          <a href="#diff-d678e176aac57e3f56a607659993ed9b" class="tooltipped tooltipped-s" aria-label="25 lines changed">
            <span class="diffstat-bar">
              <span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span>
            </span>
          </a>
      </span>
      <span class="octicon octicon-diff-modified" title="modified"></span>
      <a href="#diff-d678e176aac57e3f56a607659993ed9b">mapsforge-map-awt/src/main/java/org/mapsforge/map/awt/AwtTileBitmap.java</a>
    </li>
    <li>
      <span class="diffstat right">
          <span class="text-diff-added">
            +9
          </span>
          <span class="text-diff-deleted">
            −0
          </span>
          <a href="#diff-8112c3a1fffdbc45bf0f75c2c775ecc2" class="tooltipped tooltipped-s" aria-label="9 lines changed">
            <span class="diffstat-bar">
              <span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span>
            </span>
          </a>
      </span>
      <span class="octicon octicon-diff-modified" title="modified"></span>
      <a href="#diff-8112c3a1fffdbc45bf0f75c2c775ecc2">mapsforge-map-reader/src/main/java/org/mapsforge/map/reader/MapDataStore.java</a>
    </li>
    <li>
      <span class="diffstat right">
          <span class="text-diff-added">
            +14
          </span>
          <span class="text-diff-deleted">
            −0
          </span>
          <a href="#diff-d00e8260acc0de904ed29411507005d8" class="tooltipped tooltipped-s" aria-label="14 lines changed">
            <span class="diffstat-bar">
              <span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span>
            </span>
          </a>
      </span>
      <span class="octicon octicon-diff-modified" title="modified"></span>
      <a href="#diff-d00e8260acc0de904ed29411507005d8">mapsforge-map-reader/src/main/java/org/mapsforge/map/reader/MapFile.java</a>
    </li>
    <li>
      <span class="diffstat right">
          <span class="text-diff-added">
            +32
          </span>
          <span class="text-diff-deleted">
            −0
          </span>
          <a href="#diff-2516a2d577b03c0e475ed1c757fb587b" class="tooltipped tooltipped-s" aria-label="32 lines changed">
            <span class="diffstat-bar">
              <span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span>
            </span>
          </a>
      </span>
      <span class="octicon octicon-diff-modified" title="modified"></span>
      <a href="#diff-2516a2d577b03c0e475ed1c757fb587b">mapsforge-map-reader/src/main/java/org/mapsforge/map/reader/MultiMapDataStore.java</a>
    </li>
    <li>
      <span class="diffstat right">
          <span class="text-diff-added">
            +30
          </span>
          <span class="text-diff-deleted">
            −2
          </span>
          <a href="#diff-8eb1af077962acbc82aef148b53c6bd1" class="tooltipped tooltipped-s" aria-label="32 lines changed">
            <span class="diffstat-bar">
              <span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span>&#xf053;
            </span>
          </a>
      </span>
      <span class="octicon octicon-diff-modified" title="modified"></span>
      <a href="#diff-8eb1af077962acbc82aef148b53c6bd1">mapsforge-map/src/main/java/org/mapsforge/map/layer/TileLayer.java</a>
    </li>
    <li>
      <span class="diffstat right">
          <span class="text-diff-added">
            +227
          </span>
          <span class="text-diff-deleted">
            −50
          </span>
          <a href="#diff-187ae3feaa74b08b44371bbc1c7288bb" class="tooltipped tooltipped-s" aria-label="277 lines changed">
            <span class="diffstat-bar">
              <span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span>&#xf053;
            </span>
          </a>
      </span>
      <span class="octicon octicon-diff-modified" title="modified"></span>
      <a href="#diff-187ae3feaa74b08b44371bbc1c7288bb">mapsforge-map/src/main/java/org/mapsforge/map/layer/cache/FileSystemTileCache.java</a>
    </li>
    <li>
      <span class="diffstat right">
          <span class="text-diff-added">
            +8
          </span>
          <span class="text-diff-deleted">
            −7
          </span>
          <a href="#diff-c2587b61ae32241ee17b7de175cf9ba0" class="tooltipped tooltipped-s" aria-label="15 lines changed">
            <span class="diffstat-bar">
              <span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-deleted">&#xf053;</span><span class="text-diff-deleted">&#xf053;</span>&#xf053;
            </span>
          </a>
      </span>
      <span class="octicon octicon-diff-modified" title="modified"></span>
      <a href="#diff-c2587b61ae32241ee17b7de175cf9ba0">mapsforge-map/src/main/java/org/mapsforge/map/layer/cache/InMemoryTileCache.java</a>
    </li>
    <li>
      <span class="diffstat right">
          <span class="text-diff-added">
            +24
          </span>
          <span class="text-diff-deleted">
            −4
          </span>
          <a href="#diff-ed646d42409dc157b8055fa062eab87e" class="tooltipped tooltipped-s" aria-label="28 lines changed">
            <span class="diffstat-bar">
              <span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span>&#xf053;
            </span>
          </a>
      </span>
      <span class="octicon octicon-diff-modified" title="modified"></span>
      <a href="#diff-ed646d42409dc157b8055fa062eab87e">mapsforge-map/src/main/java/org/mapsforge/map/layer/cache/TileCache.java</a>
    </li>
    <li>
      <span class="diffstat right">
          <span class="text-diff-added">
            +4
          </span>
          <span class="text-diff-deleted">
            −0
          </span>
          <a href="#diff-3866bef689eb8fa6114dbcbbe36159b8" class="tooltipped tooltipped-s" aria-label="4 lines changed">
            <span class="diffstat-bar">
              <span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span>&#xf053;
            </span>
          </a>
      </span>
      <span class="octicon octicon-diff-modified" title="modified"></span>
      <a href="#diff-3866bef689eb8fa6114dbcbbe36159b8">mapsforge-map/src/main/java/org/mapsforge/map/layer/cache/TileStore.java</a>
    </li>
    <li>
      <span class="diffstat right">
          <span class="text-diff-added">
            +6
          </span>
          <span class="text-diff-deleted">
            −0
          </span>
          <a href="#diff-fc9e0f1d296a25ad900113312f9482d6" class="tooltipped tooltipped-s" aria-label="6 lines changed">
            <span class="diffstat-bar">
              <span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span>
            </span>
          </a>
      </span>
      <span class="octicon octicon-diff-modified" title="modified"></span>
      <a href="#diff-fc9e0f1d296a25ad900113312f9482d6">mapsforge-map/src/main/java/org/mapsforge/map/layer/cache/TwoLevelTileCache.java</a>
    </li>
    <li>
      <span class="diffstat right">
          <span class="text-diff-added">
            +60
          </span>
          <span class="text-diff-deleted">
            −0
          </span>
          <a href="#diff-76bae2dbc83d1e48052fb53f800374c0" class="tooltipped tooltipped-s" aria-label="60 lines changed">
            <span class="diffstat-bar">
              <span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span>
            </span>
          </a>
      </span>
      <span class="octicon octicon-diff-modified" title="modified"></span>
      <a href="#diff-76bae2dbc83d1e48052fb53f800374c0">mapsforge-map/src/main/java/org/mapsforge/map/layer/download/TileDownloadLayer.java</a>
    </li>
    <li>
      <span class="diffstat right">
          <span class="text-diff-added">
            +3
          </span>
          <span class="text-diff-deleted">
            −1
          </span>
          <a href="#diff-01960c4dcc5dec9fb85dd74b633a01d0" class="tooltipped tooltipped-s" aria-label="4 lines changed">
            <span class="diffstat-bar">
              <span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-deleted">&#xf053;</span>&#xf053;
            </span>
          </a>
      </span>
      <span class="octicon octicon-diff-modified" title="modified"></span>
      <a href="#diff-01960c4dcc5dec9fb85dd74b633a01d0">mapsforge-map/src/main/java/org/mapsforge/map/layer/download/TileDownloader.java</a>
    </li>
    <li>
      <span class="diffstat right">
          <span class="text-diff-added">
            +24
          </span>
          <span class="text-diff-deleted">
            −1
          </span>
          <a href="#diff-d669bae8664848b350ce57cbe63f6b34" class="tooltipped tooltipped-s" aria-label="25 lines changed">
            <span class="diffstat-bar">
              <span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span>&#xf053;
            </span>
          </a>
      </span>
      <span class="octicon octicon-diff-modified" title="modified"></span>
      <a href="#diff-d669bae8664848b350ce57cbe63f6b34">mapsforge-map/src/main/java/org/mapsforge/map/layer/download/tilesource/AbstractTileSource.java</a>
    </li>
    <li>
      <span class="diffstat right">
          <span class="text-diff-added">
            +12
          </span>
          <span class="text-diff-deleted">
            −1
          </span>
          <a href="#diff-ad33d28d492eaa2c045e576d17ab372c" class="tooltipped tooltipped-s" aria-label="13 lines changed">
            <span class="diffstat-bar">
              <span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span>&#xf053;
            </span>
          </a>
      </span>
      <span class="octicon octicon-diff-modified" title="modified"></span>
      <a href="#diff-ad33d28d492eaa2c045e576d17ab372c">mapsforge-map/src/main/java/org/mapsforge/map/layer/download/tilesource/OpenStreetMapMapnik.java</a>
    </li>
    <li>
      <span class="diffstat right">
          <span class="text-diff-added">
            +5
          </span>
          <span class="text-diff-deleted">
            −0
          </span>
          <a href="#diff-3e97f983404ba33481d4cb82b4dac079" class="tooltipped tooltipped-s" aria-label="5 lines changed">
            <span class="diffstat-bar">
              <span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span>
            </span>
          </a>
      </span>
      <span class="octicon octicon-diff-modified" title="modified"></span>
      <a href="#diff-3e97f983404ba33481d4cb82b4dac079">mapsforge-map/src/main/java/org/mapsforge/map/layer/download/tilesource/TileSource.java</a>
    </li>
    <li>
      <span class="diffstat right">
          <span class="text-diff-added">
            +1
          </span>
          <span class="text-diff-deleted">
            −0
          </span>
          <a href="#diff-f7c2910b8c1dba496c98e5108c8119d1" class="tooltipped tooltipped-s" aria-label="1 line changed">
            <span class="diffstat-bar">
              <span class="text-diff-added">&#xf053;</span>&#xf053;&#xf053;&#xf053;&#xf053;
            </span>
          </a>
      </span>
      <span class="octicon octicon-diff-modified" title="modified"></span>
      <a href="#diff-f7c2910b8c1dba496c98e5108c8119d1">mapsforge-map/src/main/java/org/mapsforge/map/layer/renderer/DatabaseRenderer.java</a>
    </li>
    <li>
      <span class="diffstat right">
          <span class="text-diff-added">
            +25
          </span>
          <span class="text-diff-deleted">
            −0
          </span>
          <a href="#diff-d45c135464ff3bf28bcc4ba6c78435aa" class="tooltipped tooltipped-s" aria-label="25 lines changed">
            <span class="diffstat-bar">
              <span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span>
            </span>
          </a>
      </span>
      <span class="octicon octicon-diff-modified" title="modified"></span>
      <a href="#diff-d45c135464ff3bf28bcc4ba6c78435aa">mapsforge-map/src/main/java/org/mapsforge/map/layer/renderer/TileRendererLayer.java</a>
    </li>
    <li>
      <span class="diffstat right">
          <span class="text-diff-added">
            +15
          </span>
          <span class="text-diff-deleted">
            −0
          </span>
          <a href="#diff-9016c0aa280b7db90ee97980af5a984d" class="tooltipped tooltipped-s" aria-label="15 lines changed">
            <span class="diffstat-bar">
              <span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span>
            </span>
          </a>
      </span>
      <span class="octicon octicon-diff-modified" title="modified"></span>
      <a href="#diff-9016c0aa280b7db90ee97980af5a984d">mapsforge-map/src/main/java/org/mapsforge/map/layer/tilestore/TileStoreLayer.java</a>
    </li>
    <li>
      <span class="diffstat right">
          <span class="text-diff-added">
            +113
          </span>
          <span class="text-diff-deleted">
            −0
          </span>
          <a href="#diff-82478367ef5e26c6da0e6ca5af9de9c6" class="tooltipped tooltipped-s" aria-label="113 lines changed">
            <span class="diffstat-bar">
              <span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span>
            </span>
          </a>
      </span>
      <span class="octicon octicon-diff-modified" title="modified"></span>
      <a href="#diff-82478367ef5e26c6da0e6ca5af9de9c6">mapsforge-map/src/test/java/org/mapsforge/map/layer/cache/FileSystemTileCacheTest.java</a>
    </li>
    <li>
      <span class="diffstat right">
          <span class="text-diff-added">
            +5
          </span>
          <span class="text-diff-deleted">
            −0
          </span>
          <a href="#diff-8d035d0d9b392884d24644d9a5b0cb7b" class="tooltipped tooltipped-s" aria-label="5 lines changed">
            <span class="diffstat-bar">
              <span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span>
            </span>
          </a>
      </span>
      <span class="octicon octicon-diff-modified" title="modified"></span>
      <a href="#diff-8d035d0d9b392884d24644d9a5b0cb7b">mapsforge-map/src/test/java/org/mapsforge/map/layer/download/InvalidTileSource.java</a>
    </li>
  </ol>
</div>

        <div id="files" class="diff-view ">
    
      <a name="diff-934094fcfef8211fa2336ddff801bfe0"></a>
      <div id="diff-0"
           class="file js-details-container
                   
                   
                   
                   
                   show-inline-notes
                 ">
        <div class="file-header" data-path="mapsforge-core/src/main/java/org/mapsforge/core/graphics/TileBitmap.java">
          <div class="file-actions">
              <span class="show-file-notes">
                <label>
                  <input type="checkbox" checked="checked" class="js-toggle-file-notes">
                  Show notes
                </label>
              </span>

                <a href="/mvglasow/mapsforge/blob/8ca5512f3901939b98380b444ff1ec978fa2e742/mapsforge-core/src/main/java/org/mapsforge/core/graphics/TileBitmap.java" class="btn btn-sm tooltipped tooltipped-n" rel="nofollow" aria-label="View the whole file at version 8ca5512 ">View</a>


          </div>
          <div class="file-info">
              <span class="diffstat tooltipped tooltipped-e" aria-label="48 additions &amp; 1 deletion">49 <span class="diffstat-bar"><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span>&#xf053;</span></span>

            <span class="js-selectable-text" title="mapsforge-core/src/main/java/org/mapsforge/core/graphics/TileBitmap.java">
              mapsforge-core/src/main/java/org/mapsforge/core/graphics/TileBitmap.java
            </span>
            
          </div>
        </div>

            <div class="data highlight blob-wrapper">
              <table class="diff-table tab-size  " data-tab-size="8">
                
      <tr class="js-expandable-line" data-position="0">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-934094fcfef8211fa2336ddff801bfe0"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/c1e04fda09ba28fa366575b04df01c90d59a279a?diff=unified&amp;left_hunk_size=5&amp;mode=100644&amp;next_line_num_left=15&amp;next_line_num_right=15&amp;path=mapsforge-core%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fcore%2Fgraphics%2FTileBitmap.java&amp;prev_line_num_left=&amp;prev_line_num_right=&amp;right_hunk_size=52"
            data-left-range="1-14" data-right-range="1-14">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -15,5 +15,52 @@</td>
  </tr>

    

<tr>
    <td id="diff-934094fcfef8211fa2336ddff801bfe0L15" data-line-number="15"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R15" data-line-number="15"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-k">package</span> <span class="pl-smi">org.mapsforge.core.graphics</span>;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-934094fcfef8211fa2336ddff801bfe0L16" data-line-number="16"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R16" data-line-number="16"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-934094fcfef8211fa2336ddff801bfe0L17" data-line-number="17"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R17" data-line-number="17"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-k">public</span> <span class="pl-k">interface</span> <span class="pl-en">TileBitmap</span> <span class="pl-k">extends</span> <span class="pl-e">Bitmap</span> {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-934094fcfef8211fa2336ddff801bfe0L18" data-line-number="18"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-	<span class="pl-c">// only different behaviour</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R18" data-line-number="18"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R19" data-line-number="19"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R20" data-line-number="20"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Returns the timestamp of the tile in milliseconds since January 1, 1970 GMT or 0 if this timestamp is unknown.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R21" data-line-number="21"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R22" data-line-number="22"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * The timestamp indicates when the tile was created and can be used together with a TTL in order to determine</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R23" data-line-number="23"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * whether to treat it as expired.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R24" data-line-number="24"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R25" data-line-number="25"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">public</span> <span class="pl-k">long</span> <span class="pl-en">getTimestamp</span>();</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R26" data-line-number="26"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R27" data-line-number="27"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R28" data-line-number="28"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Whether the TileBitmap has expired.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R29" data-line-number="29"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R30" data-line-number="30"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * When a tile has expired, the requester should try to replace it with a fresh copy as soon as possible. The</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R31" data-line-number="31"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * expired tile may still be displayed to the user until the fresh copy is available. This may be desirable if</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R32" data-line-number="32"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * obtaining a fresh copy is time-consuming or a fresh copy is currently unavailable (e.g. because no network</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R33" data-line-number="33"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * connection is available for a {@link org.mapsforge.map.layer.download.tilesource.TileSource}).</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R34" data-line-number="34"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * </span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R35" data-line-number="35"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @return {@code true} if expired, {@code false} otherwise.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R36" data-line-number="36"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R37" data-line-number="37"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">public</span> <span class="pl-k">boolean</span> <span class="pl-en">isExpired</span>();</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R38" data-line-number="38"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R39" data-line-number="39"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R40" data-line-number="40"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Returns the timestamp when this tile will be expired in milliseconds since January 1, 1970 GMT or 0 if this</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R41" data-line-number="41"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * timestamp is unknown.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R42" data-line-number="42"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R43" data-line-number="43"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * The timestamp indicates when the tile should be treated it as expired, i.e. {@link #isExpired()} will return</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R44" data-line-number="44"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * {@code true}. For a downloaded tile, pass the value returned by</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R45" data-line-number="45"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * {@link java.net.HttpURLConnection#getExpiration()}, if set by the server. In all other cases you can pass current</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R46" data-line-number="46"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * time plus a fixed TTL in order to have the tile expire after the specified time.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R47" data-line-number="47"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R48" data-line-number="48"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">setExpiration</span>(<span class="pl-k">long</span> <span class="pl-v">expiration</span>);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R49" data-line-number="49"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R50" data-line-number="50"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R51" data-line-number="51"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Sets the timestamp of the tile in milliseconds since January 1, 1970 GMT.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R52" data-line-number="52"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R53" data-line-number="53"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * The timestamp indicates when the information to create the tile was last retrieved from the source. It can be</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R54" data-line-number="54"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * used together with a TTL in order to determine whether to treat it as expired.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R55" data-line-number="55"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R56" data-line-number="56"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * The timestamp of a locally rendered tile should be set to the timestamp of the map database used to render it, as</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R57" data-line-number="57"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * returned by {@link org.mapsforge.map.reader.header.MapFileInfo#mapDate}. For a tile read from a disk cache, it</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R58" data-line-number="58"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * should be the file&#39;s timestamp. In all other cases (including downloaded tiles), the timestamp should be set to</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R59" data-line-number="59"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * wall clock time (as returned by {@link java.lang.System#currentTimeMillis()}) when the tile is created.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R60" data-line-number="60"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R61" data-line-number="61"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Classes that implement this interface should call {@link java.lang.System#currentTimeMillis()} upon creating an</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R62" data-line-number="62"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * instance, store the result and return it unless {@code setTimestamp()} has been called for that instance.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R63" data-line-number="63"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R64" data-line-number="64"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">setTimestamp</span>(<span class="pl-k">long</span> <span class="pl-v">timestamp</span>);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R65" data-line-number="65"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td id="diff-934094fcfef8211fa2336ddff801bfe0L19" data-line-number="19"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-934094fcfef8211fa2336ddff801bfe0R66" data-line-number="66"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> }</span>

  </td>
</tr>



              </table>
            </div>
      </div>

      <a name="diff-bce27ee5d09265cb47b433226184b8b8"></a>
      <div id="diff-1"
           class="file js-details-container
                   
                   
                   
                   
                   show-inline-notes
                 ">
        <div class="file-header" data-path="mapsforge-map-android/src/main/java/org/mapsforge/map/android/graphics/AndroidTileBitmap.java">
          <div class="file-actions">
              <span class="show-file-notes">
                <label>
                  <input type="checkbox" checked="checked" class="js-toggle-file-notes">
                  Show notes
                </label>
              </span>

                <a href="/mvglasow/mapsforge/blob/8ca5512f3901939b98380b444ff1ec978fa2e742/mapsforge-map-android/src/main/java/org/mapsforge/map/android/graphics/AndroidTileBitmap.java" class="btn btn-sm tooltipped tooltipped-n" rel="nofollow" aria-label="View the whole file at version 8ca5512 ">View</a>


          </div>
          <div class="file-info">
              <span class="diffstat tooltipped tooltipped-e" aria-label="25 additions &amp; 0 deletions">25 <span class="diffstat-bar"><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span></span></span>

            <span class="js-selectable-text" title="mapsforge-map-android/src/main/java/org/mapsforge/map/android/graphics/AndroidTileBitmap.java">
              ...forge-map-android/src/main/java/org/mapsforge/map/android/graphics/AndroidTileBitmap.java
            </span>
            
          </div>
        </div>

            <div class="data highlight blob-wrapper">
              <table class="diff-table tab-size  " data-tab-size="8">
                
      <tr class="js-expandable-line" data-position="0">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-bce27ee5d09265cb47b433226184b8b8"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/773cf9b5d1a5f7ea0acc60bebbd24d79871113f0?diff=unified&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=96&amp;next_line_num_right=96&amp;path=mapsforge-map-android%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Fandroid%2Fgraphics%2FAndroidTileBitmap.java&amp;prev_line_num_left=&amp;prev_line_num_right=&amp;right_hunk_size=9"
            data-left-range="1-95" data-right-range="1-95">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -96,6 +96,9 @@ private static int composeHash(int tileSize, boolean isTransparent) {</td>
  </tr>

    

<tr>
    <td id="diff-bce27ee5d09265cb47b433226184b8b8L96" data-line-number="96"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bce27ee5d09265cb47b433226184b8b8R96" data-line-number="96"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-k">return</span> bitmap;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-bce27ee5d09265cb47b433226184b8b8L97" data-line-number="97"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bce27ee5d09265cb47b433226184b8b8R97" data-line-number="97"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-bce27ee5d09265cb47b433226184b8b8L98" data-line-number="98"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bce27ee5d09265cb47b433226184b8b8R98" data-line-number="98"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bce27ee5d09265cb47b433226184b8b8R99" data-line-number="99"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">private</span> <span class="pl-k">long</span> expiration <span class="pl-k">=</span> <span class="pl-c1">0</span>;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bce27ee5d09265cb47b433226184b8b8R100" data-line-number="100"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">private</span> <span class="pl-k">long</span> timestamp <span class="pl-k">=</span> <span class="pl-smi">System</span><span class="pl-k">.</span>currentTimeMillis();</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bce27ee5d09265cb47b433226184b8b8R101" data-line-number="101"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td id="diff-bce27ee5d09265cb47b433226184b8b8L99" data-line-number="99"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bce27ee5d09265cb47b433226184b8b8R102" data-line-number="102"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-c">/*</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-bce27ee5d09265cb47b433226184b8b8L100" data-line-number="100"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bce27ee5d09265cb47b433226184b8b8R103" data-line-number="103"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 * THIS CAN THROW AN IllegalArgumentException or SocketTimeoutException The inputStream can be corrupt for various</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-bce27ee5d09265cb47b433226184b8b8L101" data-line-number="101"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bce27ee5d09265cb47b433226184b8b8R104" data-line-number="104"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 * reasons (slow download or slow access to file system) and will then raise an exception. This exception must be</span></span>

  </td>
</tr>


      <tr class="js-expandable-line" data-position="10">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-bce27ee5d09265cb47b433226184b8b8"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/773cf9b5d1a5f7ea0acc60bebbd24d79871113f0?diff=unified&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=144&amp;next_line_num_right=147&amp;path=mapsforge-map-android%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Fandroid%2Fgraphics%2FAndroidTileBitmap.java&amp;prev_line_num_left=101&amp;prev_line_num_right=104&amp;right_hunk_size=28"
            data-left-range="102-143" data-right-range="105-146">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -144,6 +147,28 @@ private static int composeHash(int tileSize, boolean isTransparent) {</td>
  </tr>

    

<tr>
    <td id="diff-bce27ee5d09265cb47b433226184b8b8L144" data-line-number="144"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bce27ee5d09265cb47b433226184b8b8R147" data-line-number="147"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-bce27ee5d09265cb47b433226184b8b8L145" data-line-number="145"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bce27ee5d09265cb47b433226184b8b8R148" data-line-number="148"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-bce27ee5d09265cb47b433226184b8b8L146" data-line-number="146"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bce27ee5d09265cb47b433226184b8b8R149" data-line-number="149"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">@Override</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bce27ee5d09265cb47b433226184b8b8R150" data-line-number="150"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">public</span> <span class="pl-k">long</span> <span class="pl-en">getTimestamp</span>() {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bce27ee5d09265cb47b433226184b8b8R151" data-line-number="151"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">return</span> timestamp;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bce27ee5d09265cb47b433226184b8b8R152" data-line-number="152"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bce27ee5d09265cb47b433226184b8b8R153" data-line-number="153"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bce27ee5d09265cb47b433226184b8b8R154" data-line-number="154"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">@Override</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bce27ee5d09265cb47b433226184b8b8R155" data-line-number="155"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">public</span> <span class="pl-k">boolean</span> <span class="pl-en">isExpired</span>() {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bce27ee5d09265cb47b433226184b8b8R156" data-line-number="156"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">if</span> (expiration <span class="pl-k">==</span> <span class="pl-c1">0</span>)</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bce27ee5d09265cb47b433226184b8b8R157" data-line-number="157"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-k">return</span> <span class="pl-c1">false</span>;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bce27ee5d09265cb47b433226184b8b8R158" data-line-number="158"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">return</span> (expiration <span class="pl-k">&gt;=</span> <span class="pl-smi">System</span><span class="pl-k">.</span>currentTimeMillis());</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bce27ee5d09265cb47b433226184b8b8R159" data-line-number="159"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bce27ee5d09265cb47b433226184b8b8R160" data-line-number="160"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bce27ee5d09265cb47b433226184b8b8R161" data-line-number="161"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">@Override</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bce27ee5d09265cb47b433226184b8b8R162" data-line-number="162"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">setExpiration</span>(<span class="pl-k">long</span> <span class="pl-v">expiration</span>) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bce27ee5d09265cb47b433226184b8b8R163" data-line-number="163"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-v">this</span><span class="pl-k">.</span>expiration <span class="pl-k">=</span> expiration;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bce27ee5d09265cb47b433226184b8b8R164" data-line-number="164"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bce27ee5d09265cb47b433226184b8b8R165" data-line-number="165"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bce27ee5d09265cb47b433226184b8b8R166" data-line-number="166"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">@Override</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bce27ee5d09265cb47b433226184b8b8R167" data-line-number="167"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">setTimestamp</span>(<span class="pl-k">long</span> <span class="pl-v">timestamp</span>) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bce27ee5d09265cb47b433226184b8b8R168" data-line-number="168"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-v">this</span><span class="pl-k">.</span>timestamp <span class="pl-k">=</span> timestamp;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bce27ee5d09265cb47b433226184b8b8R169" data-line-number="169"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bce27ee5d09265cb47b433226184b8b8R170" data-line-number="170"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-bce27ee5d09265cb47b433226184b8b8R171" data-line-number="171"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">@Override</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-bce27ee5d09265cb47b433226184b8b8L147" data-line-number="147"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bce27ee5d09265cb47b433226184b8b8R172" data-line-number="172"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">protected</span> <span class="pl-k">void</span> <span class="pl-en">destroy</span>() {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-bce27ee5d09265cb47b433226184b8b8L148" data-line-number="148"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bce27ee5d09265cb47b433226184b8b8R173" data-line-number="173"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-v">super</span><span class="pl-k">.</span>destroy();</span>

  </td>
</tr>


    

<tr>
    <td id="diff-bce27ee5d09265cb47b433226184b8b8L149" data-line-number="149"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-bce27ee5d09265cb47b433226184b8b8R174" data-line-number="174"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-k">if</span> (<span class="pl-smi">AndroidGraphicFactory</span><span class="pl-c1"><span class="pl-k">.</span>DEBUG_BITMAPS</span>) {</span>

  </td>
</tr>


  <tr class="js-expandable-line">
   <td class="blob-num blob-num-expandable" colspan="2">
     <a href="#diff-bce27ee5d09265cb47b433226184b8b8"
          class="diff-expander js-expand" title="Expand" aria-label="Expand"
          data-url="/mapsforge/mapsforge/blob_excerpt/773cf9b5d1a5f7ea0acc60bebbd24d79871113f0?diff=unified&amp;mode=100644&amp;path=mapsforge-map-android%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Fandroid%2Fgraphics%2FAndroidTileBitmap.java&amp;prev_line_num_left=149&amp;prev_line_num_right=174"
          data-left-range="150-225"
          data-right-range="175-225">
       <span class="octicon octicon-unfold"></span>
     </a>
   </td>
   <td class="blob-code blob-code-expandable"></td>
  </tr>

              </table>
            </div>
      </div>

      <a name="diff-f1bd231b9bd80b15bf450608da356fe8"></a>
      <div id="diff-2"
           class="file js-details-container
                   
                   
                   
                   
                   show-inline-notes
                 ">
        <div class="file-header" data-path="mapsforge-map-android/src/main/java/org/mapsforge/map/android/util/AndroidUtil.java">
          <div class="file-actions">
              <span class="show-file-notes">
                <label>
                  <input type="checkbox" checked="checked" class="js-toggle-file-notes">
                  Show notes
                </label>
              </span>

                <a href="/mvglasow/mapsforge/blob/8ca5512f3901939b98380b444ff1ec978fa2e742/mapsforge-map-android/src/main/java/org/mapsforge/map/android/util/AndroidUtil.java" class="btn btn-sm tooltipped tooltipped-n" rel="nofollow" aria-label="View the whole file at version 8ca5512 ">View</a>


          </div>
          <div class="file-info">
              <span class="diffstat tooltipped tooltipped-e" aria-label="151 additions &amp; 44 deletions">195 <span class="diffstat-bar"><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-deleted">&#xf053;</span>&#xf053;</span></span>

            <span class="js-selectable-text" title="mapsforge-map-android/src/main/java/org/mapsforge/map/android/util/AndroidUtil.java">
              mapsforge-map-android/src/main/java/org/mapsforge/map/android/util/AndroidUtil.java
            </span>
            
          </div>
        </div>

            <div class="data highlight blob-wrapper">
              <table class="diff-table tab-size  " data-tab-size="8">
                
      <tr class="js-expandable-line" data-position="0">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-f1bd231b9bd80b15bf450608da356fe8"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/98d66f1875ead6974eceb55f90d756bf0bb57199?diff=unified&amp;left_hunk_size=15&amp;mode=100644&amp;next_line_num_left=47&amp;next_line_num_right=47&amp;path=mapsforge-map-android%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Fandroid%2Futil%2FAndroidUtil.java&amp;prev_line_num_left=&amp;prev_line_num_right=&amp;right_hunk_size=56"
            data-left-range="1-46" data-right-range="1-46">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -47,15 +47,56 @@</td>
  </tr>

    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L47" data-line-number="47"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R47" data-line-number="47"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-k">public</span> <span class="pl-k">final</span> <span class="pl-k">class</span> <span class="pl-en">AndroidUtil</span> {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L48" data-line-number="48"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R48" data-line-number="48"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L49" data-line-number="49"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R49" data-line-number="49"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-k">final</span> <span class="pl-k">boolean</span> <span class="pl-c1">HONEYCOMB_PLUS</span> <span class="pl-k">=</span> <span class="pl-smi">Build</span><span class="pl-c1"><span class="pl-k">.</span>VERSION<span class="pl-k">.</span>SDK_INT</span> <span class="pl-k">&gt;=</span> <span class="pl-smi">Build</span><span class="pl-c1"><span class="pl-k">.</span>VERSION_CODES<span class="pl-k">.</span>HONEYCOMB</span>;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R50" data-line-number="50"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R51" data-line-number="51"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R52" data-line-number="52"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Creates a two-level tile cache.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R53" data-line-number="53"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R54" data-line-number="54"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * This is a utility function which creates a two-level tile cache along with its backends.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R55" data-line-number="55"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * </span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R56" data-line-number="56"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param c</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R57" data-line-number="57"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            the Android context</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R58" data-line-number="58"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param id</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R59" data-line-number="59"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            name for the directory, which will be created as a subdirectory of the default cache directory (as</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R60" data-line-number="60"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            returned by {@link android.content.Context#getExternalCacheDir()}).</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R61" data-line-number="61"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param firstLevelSize</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R62" data-line-number="62"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            size of the first level cache</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R63" data-line-number="63"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param tileSize</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R64" data-line-number="64"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            tile size</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R65" data-line-number="65"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param threaded</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R66" data-line-number="66"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            if a background thread is employed to store tile data</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R67" data-line-number="67"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param queueSize</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R68" data-line-number="68"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            maximum length of queue before the put operation blocks</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R69" data-line-number="69"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @return a new cache created on the external storage</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R70" data-line-number="70"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R71" data-line-number="71"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-smi">TileCache</span> <span class="pl-en">createExternalStorageTileCache</span>(<span class="pl-smi">Context</span> <span class="pl-v">c</span>, <span class="pl-smi">String</span> <span class="pl-v">id</span>, <span class="pl-k">int</span> <span class="pl-v">firstLevelSize</span>, <span class="pl-k">int</span> <span class="pl-v">tileSize</span>,</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R72" data-line-number="72"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-k">boolean</span> <span class="pl-v">threaded</span>, <span class="pl-k">int</span> <span class="pl-v">queueSize</span>) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R73" data-line-number="73"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">return</span> createExternalStorageTileCache(c, id, firstLevelSize, tileSize, threaded, queueSize, <span class="pl-c1">false</span>);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R74" data-line-number="74"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L50" data-line-number="50"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R75" data-line-number="75"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L51" data-line-number="51"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R76" data-line-number="76"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L52" data-line-number="52"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * @param c              the Android context</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L53" data-line-number="53"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * @param id             name for the directory</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L54" data-line-number="54"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * @param firstLevelSize size of the first level cache</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L55" data-line-number="55"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * @param tileSize       tile size</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R77" data-line-number="77"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Creates a two-level tile cache.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R78" data-line-number="78"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R79" data-line-number="79"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * This is a utility function which creates a two-level tile cache along with its backends.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R80" data-line-number="80"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * </span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R81" data-line-number="81"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param c</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R82" data-line-number="82"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            the Android context</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R83" data-line-number="83"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param id</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R84" data-line-number="84"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            name for the directory, which will be created as a subdirectory of the default cache directory (as</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R85" data-line-number="85"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            returned by {@link android.content.Context#getExternalCacheDir()}).</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R86" data-line-number="86"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param firstLevelSize</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R87" data-line-number="87"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            size of the first level cache</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R88" data-line-number="88"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param tileSize</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R89" data-line-number="89"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            tile size</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R90" data-line-number="90"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param threaded</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R91" data-line-number="91"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            if a background thread is employed to store tile data</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R92" data-line-number="92"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param queueSize</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R93" data-line-number="93"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            maximum length of queue before the put operation blocks</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R94" data-line-number="94"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param persistent</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R95" data-line-number="95"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            whether the second level tile cache should be persistent</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L56" data-line-number="56"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R96" data-line-number="96"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 * @return a new cache created on the external storage</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L57" data-line-number="57"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R97" data-line-number="97"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L58" data-line-number="58"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-	<span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-smi">TileCache</span> <span class="pl-en">createExternalStorageTileCache</span>(<span class="pl-smi">Context</span> <span class="pl-v">c</span>, <span class="pl-smi">String</span> <span class="pl-v">id</span>, <span class="pl-k">int</span> <span class="pl-v">firstLevelSize</span>, <span class="pl-k">int</span> <span class="pl-v">tileSize</span>, <span class="pl-k">boolean</span> <span class="pl-v">threaded</span>, <span class="pl-k">int</span> <span class="pl-v">queueSize</span>) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R98" data-line-number="98"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-smi">TileCache</span> <span class="pl-en">createExternalStorageTileCache</span>(<span class="pl-smi">Context</span> <span class="pl-v">c</span>, <span class="pl-smi">String</span> <span class="pl-v">id</span>, <span class="pl-k">int</span> <span class="pl-v">firstLevelSize</span>, <span class="pl-k">int</span> <span class="pl-v">tileSize</span>,</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R99" data-line-number="99"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	                                                       <span class="pl-k">boolean</span> <span class="pl-v">threaded</span>, <span class="pl-k">int</span> <span class="pl-v">queueSize</span>, <span class="pl-k">boolean</span> <span class="pl-v">persistent</span>) {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L59" data-line-number="59"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R100" data-line-number="100"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-smi">Log</span><span class="pl-k">.</span>d(<span class="pl-s"><span class="pl-pds">&quot;</span>TILECACHE INMEMORY SIZE<span class="pl-pds">&quot;</span></span>, <span class="pl-smi">Integer</span><span class="pl-k">.</span>toString(firstLevelSize));</span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L60" data-line-number="60"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R101" data-line-number="101"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-smi">TileCache</span> firstLevelTileCache <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">InMemoryTileCache</span>(firstLevelSize);</span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L61" data-line-number="61"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R102" data-line-number="102"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-smi">File</span> cacheDir <span class="pl-k">=</span> c<span class="pl-k">.</span>getExternalCacheDir();</span>

  </td>
</tr>


      <tr class="js-expandable-line" data-position="62">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-f1bd231b9bd80b15bf450608da356fe8"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/98d66f1875ead6974eceb55f90d756bf0bb57199?diff=unified&amp;left_hunk_size=7&amp;mode=100644&amp;next_line_num_left=70&amp;next_line_num_right=111&amp;path=mapsforge-map-android%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Fandroid%2Futil%2FAndroidUtil.java&amp;prev_line_num_left=61&amp;prev_line_num_right=102&amp;right_hunk_size=8"
            data-left-range="62-69" data-right-range="103-110">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -70,7 +111,8 @@ public static TileCache createExternalStorageTileCache(Context c, String id, int</td>
  </tr>

    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L70" data-line-number="70"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R111" data-line-number="111"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 						<span class="pl-smi">Log</span><span class="pl-k">.</span>d(<span class="pl-s"><span class="pl-pds">&quot;</span>TILECACHE FILECACHE SIZE<span class="pl-pds">&quot;</span></span>, <span class="pl-smi">Integer</span><span class="pl-k">.</span>toString(tileCacheFiles));</span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L71" data-line-number="71"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R112" data-line-number="112"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L72" data-line-number="72"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R113" data-line-number="113"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 						<span class="pl-smi">TileCache</span> secondLevelTileCache <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">FileSystemTileCache</span>(tileCacheFiles, cacheDirectory,</span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L73" data-line-number="73"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-								<span class="pl-smi">org.mapsforge.map.android.graphics<span class="pl-k">.</span>AndroidGraphicFactory</span><span class="pl-c1"><span class="pl-k">.</span>INSTANCE</span>, threaded, queueSize);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R114" data-line-number="114"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+								<span class="pl-smi">org.mapsforge.map.android.graphics<span class="pl-k">.</span>AndroidGraphicFactory</span><span class="pl-c1"><span class="pl-k">.</span>INSTANCE</span>, threaded, queueSize,</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R115" data-line-number="115"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+								persistent);</span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L74" data-line-number="74"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R116" data-line-number="116"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 						<span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-smi">TwoLevelTileCache</span>(firstLevelTileCache, secondLevelTileCache);</span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L75" data-line-number="75"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R117" data-line-number="117"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 					} <span class="pl-k">catch</span> (<span class="pl-smi">IllegalArgumentException</span> e) {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L76" data-line-number="76"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R118" data-line-number="118"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 						<span class="pl-smi">Log</span><span class="pl-k">.</span>w(<span class="pl-s"><span class="pl-pds">&quot;</span>TILECACHE<span class="pl-pds">&quot;</span></span>, e<span class="pl-k">.</span>toString());</span>

  </td>
</tr>


      <tr class="js-expandable-line" data-position="72">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-f1bd231b9bd80b15bf450608da356fe8"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/98d66f1875ead6974eceb55f90d756bf0bb57199?diff=unified&amp;left_hunk_size=71&amp;mode=100644&amp;next_line_num_left=82&amp;next_line_num_right=124&amp;path=mapsforge-map-android%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Fandroid%2Futil%2FAndroidUtil.java&amp;prev_line_num_left=76&amp;prev_line_num_right=118&amp;right_hunk_size=136"
            data-left-range="77-81" data-right-range="119-123">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -82,71 +124,136 @@ public static TileCache createExternalStorageTileCache(Context c, String id, int</td>
  </tr>

    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L82" data-line-number="82"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R124" data-line-number="124"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L83" data-line-number="83"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R125" data-line-number="125"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L84" data-line-number="84"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R126" data-line-number="126"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R127" data-line-number="127"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Creates a two-level tile cache with the right size.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R128" data-line-number="128"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L85" data-line-number="85"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R129" data-line-number="129"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 * Utility function to create a two-level tile cache with the right size. When the cache is created we do not</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L86" data-line-number="86"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R130" data-line-number="130"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 * actually know the size of the mapview, so the screenRatio is an approximation of the required size.</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L87" data-line-number="87"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R131" data-line-number="131"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 *</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L88" data-line-number="88"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * @param c           the Android context</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L89" data-line-number="89"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * @param id          name for the storage directory</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L90" data-line-number="90"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * @param tileSize    tile size</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L91" data-line-number="91"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * @param screenRatio part of the screen the view takes up</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L92" data-line-number="92"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * @param overdraw    overdraw allowance</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L93" data-line-number="93"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * @param threaded    if a background thread is employed to store tile data</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L94" data-line-number="94"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * @param queueSize   maximum length of queue before the put operation blocks</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R132" data-line-number="132"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param c</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R133" data-line-number="133"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            the Android context</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R134" data-line-number="134"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param id</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R135" data-line-number="135"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            name for the storage directory</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R136" data-line-number="136"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param tileSize</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R137" data-line-number="137"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            tile size</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R138" data-line-number="138"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param screenRatio</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R139" data-line-number="139"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            part of the screen the view takes up</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R140" data-line-number="140"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param overdraw</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R141" data-line-number="141"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            overdraw allowance</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R142" data-line-number="142"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param threaded</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R143" data-line-number="143"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            if a background thread is employed to store tile data</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R144" data-line-number="144"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param queueSize</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R145" data-line-number="145"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            maximum length of queue before the put operation blocks</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R146" data-line-number="146"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param persistent</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R147" data-line-number="147"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            whether the second level tile cache should be persistent</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L95" data-line-number="95"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R148" data-line-number="148"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 * @return a new cache created on the external storage</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L96" data-line-number="96"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R149" data-line-number="149"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L97" data-line-number="97"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-	<span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-smi">TileCache</span> <span class="pl-en">createTileCache</span>(<span class="pl-smi">Context</span> <span class="pl-v">c</span>, <span class="pl-smi">String</span> <span class="pl-v">id</span>, <span class="pl-k">int</span> <span class="pl-v">tileSize</span>, <span class="pl-k">float</span> <span class="pl-v">screenRatio</span>, <span class="pl-k">double</span> <span class="pl-v">overdraw</span>, <span class="pl-k">boolean</span> <span class="pl-v">threaded</span>, <span class="pl-k">int</span> <span class="pl-v">queueSize</span>) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R150" data-line-number="150"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-smi">TileCache</span> <span class="pl-en">createTileCache</span>(<span class="pl-smi">Context</span> <span class="pl-v">c</span>, <span class="pl-smi">String</span> <span class="pl-v">id</span>, <span class="pl-k">int</span> <span class="pl-v">tileSize</span>, <span class="pl-k">float</span> <span class="pl-v">screenRatio</span>, <span class="pl-k">double</span> <span class="pl-v">overdraw</span>,</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R151" data-line-number="151"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	                                        <span class="pl-k">boolean</span> <span class="pl-v">threaded</span>, <span class="pl-k">int</span> <span class="pl-v">queueSize</span>, <span class="pl-k">boolean</span> <span class="pl-v">persistent</span>) {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L98" data-line-number="98"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R152" data-line-number="152"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-k">int</span> cacheSize <span class="pl-k">=</span> <span class="pl-smi">Math</span><span class="pl-k">.</span>round(getMinimumCacheSize(c, tileSize, overdraw, screenRatio));</span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L99" data-line-number="99"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-		<span class="pl-k">return</span> createExternalStorageTileCache(c, id, cacheSize, tileSize, threaded, queueSize);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R153" data-line-number="153"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">return</span> createExternalStorageTileCache(c, id, cacheSize, tileSize, threaded, queueSize<span class="x x-first x-last">, persistent</span>);</span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L100" data-line-number="100"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R154" data-line-number="154"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L101" data-line-number="101"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R155" data-line-number="155"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L102" data-line-number="102"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R156" data-line-number="156"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L103" data-line-number="103"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R157" data-line-number="157"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 * Utility function to create a two-level tile cache with the right size. When the cache is created we do not</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L104" data-line-number="104"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * actually know the size of the mapview, so the screenRatio is an approximation of the required size.</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L105" data-line-number="105"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * This is the compatibility version that by default creates a non-threaded cache.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R158" data-line-number="158"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * actually know the size of the mapview, so the screenRatio is an approximation of the required size. This is the</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R159" data-line-number="159"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * compatibility version that by default creates a non-persistent cache.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R160" data-line-number="160"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * </span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R161" data-line-number="161"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param c</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R162" data-line-number="162"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            the Android context</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R163" data-line-number="163"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param id</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R164" data-line-number="164"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            name for the storage directory</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R165" data-line-number="165"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param tileSize</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R166" data-line-number="166"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            tile size</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R167" data-line-number="167"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param screenRatio</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R168" data-line-number="168"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            part of the screen the view takes up</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R169" data-line-number="169"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param overdraw</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R170" data-line-number="170"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            overdraw allowance</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R171" data-line-number="171"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param threaded</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R172" data-line-number="172"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            if a background thread is employed to store tile data</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R173" data-line-number="173"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param queueSize</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R174" data-line-number="174"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            maximum length of queue before the put operation blocks</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R175" data-line-number="175"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @return a new cache created on the external storage</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R176" data-line-number="176"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R177" data-line-number="177"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-smi">TileCache</span> <span class="pl-en">createTileCache</span>(<span class="pl-smi">Context</span> <span class="pl-v">c</span>, <span class="pl-smi">String</span> <span class="pl-v">id</span>, <span class="pl-k">int</span> <span class="pl-v">tileSize</span>, <span class="pl-k">float</span> <span class="pl-v">screenRatio</span>, <span class="pl-k">double</span> <span class="pl-v">overdraw</span>,</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R178" data-line-number="178"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+            <span class="pl-k">boolean</span> <span class="pl-v">threaded</span>, <span class="pl-k">int</span> <span class="pl-v">queueSize</span>) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R179" data-line-number="179"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">return</span> createTileCache(c, id, tileSize, screenRatio, overdraw, threaded, queueSize, <span class="pl-c1">false</span>);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R180" data-line-number="180"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R181" data-line-number="181"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R182" data-line-number="182"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R183" data-line-number="183"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Utility function to create a two-level tile cache with the right size. When the cache is created we do not</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R184" data-line-number="184"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * actually know the size of the mapview, so the screenRatio is an approximation of the required size. This is the</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R185" data-line-number="185"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * compatibility version that by default creates a non-threaded and non-persistent cache.</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L106" data-line-number="106"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R186" data-line-number="186"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 *</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L107" data-line-number="107"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * @param c           the Android context</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L108" data-line-number="108"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * @param id          name for the storage directory</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L109" data-line-number="109"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * @param tileSize    tile size</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L110" data-line-number="110"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * @param screenRatio part of the screen the view takes up</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L111" data-line-number="111"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * @param overdraw    overdraw allowance</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R187" data-line-number="187"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param c</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R188" data-line-number="188"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            the Android context</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R189" data-line-number="189"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param id</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R190" data-line-number="190"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            name for the storage directory</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R191" data-line-number="191"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param tileSize</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R192" data-line-number="192"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            tile size</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R193" data-line-number="193"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param screenRatio</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R194" data-line-number="194"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            part of the screen the view takes up</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R195" data-line-number="195"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param overdraw</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R196" data-line-number="196"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            overdraw allowance</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L112" data-line-number="112"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R197" data-line-number="197"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 * @return a new cache created on the external storage</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L113" data-line-number="113"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R198" data-line-number="198"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L114" data-line-number="114"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R199" data-line-number="199"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-smi">TileCache</span> <span class="pl-en">createTileCache</span>(<span class="pl-smi">Context</span> <span class="pl-v">c</span>, <span class="pl-smi">String</span> <span class="pl-v">id</span>, <span class="pl-k">int</span> <span class="pl-v">tileSize</span>, <span class="pl-k">float</span> <span class="pl-v">screenRatio</span>, <span class="pl-k">double</span> <span class="pl-v">overdraw</span>) {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L115" data-line-number="115"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-		<span class="pl-k">return</span> createTileCache(c, id, tileSize, screenRatio, overdraw, <span class="pl-c1">false</span>, <span class="pl-c1">0</span>);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R200" data-line-number="200"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">return</span> createTileCache(c, id, tileSize, screenRatio, overdraw, <span class="pl-c1">false</span>, <span class="pl-c1">0</span><span class="x x-first">, </span><span class="pl-c1 x x-last">false</span>);</span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L116" data-line-number="116"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R201" data-line-number="201"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L117" data-line-number="117"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R202" data-line-number="202"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L118" data-line-number="118"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R203" data-line-number="203"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L119" data-line-number="119"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R204" data-line-number="204"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 * Utility function to create a two-level tile cache with the right size, using the size of the map view.</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L120" data-line-number="120"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R205" data-line-number="205"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 *</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L121" data-line-number="121"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * @param c           the Android context</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L122" data-line-number="122"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * @param id          name for the storage directory</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L123" data-line-number="123"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * @param tileSize    tile size</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L124" data-line-number="124"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * @param width       the width of the map view</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L125" data-line-number="125"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * @param height      the height of the map view</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L126" data-line-number="126"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * @param overdraw    overdraw allowance</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L127" data-line-number="127"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * @param threaded    if a background thread is employed to store tile data</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L128" data-line-number="128"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * @param queueSize   maximum length of queue before the put operation blocks</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R206" data-line-number="206"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param c</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R207" data-line-number="207"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            the Android context</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R208" data-line-number="208"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param id</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R209" data-line-number="209"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            name for the storage directory</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R210" data-line-number="210"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param tileSize</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R211" data-line-number="211"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            tile size</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R212" data-line-number="212"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param width</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R213" data-line-number="213"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            the width of the map view</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R214" data-line-number="214"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param height</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R215" data-line-number="215"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            the height of the map view</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R216" data-line-number="216"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param overdraw</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R217" data-line-number="217"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            overdraw allowance</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R218" data-line-number="218"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param threaded</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R219" data-line-number="219"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            if a background thread is employed to store tile data</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R220" data-line-number="220"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param queueSize</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R221" data-line-number="221"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            maximum length of queue before the put operation blocks</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R222" data-line-number="222"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param persistent</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R223" data-line-number="223"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            whether the cache should be persistent</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L129" data-line-number="129"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R224" data-line-number="224"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 * @return a new cache created on the external storage</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L130" data-line-number="130"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R225" data-line-number="225"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L131" data-line-number="131"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-	<span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-smi">TileCache</span> <span class="pl-en">createTileCache</span>(<span class="pl-smi">Context</span> <span class="pl-v">c</span>, <span class="pl-smi">String</span> <span class="pl-v">id</span>, <span class="pl-k">int</span> <span class="pl-v">tileSize</span>, <span class="pl-k">int</span> <span class="pl-v">width</span>, <span class="pl-k">int</span> <span class="pl-v">height</span>, <span class="pl-k">double</span> <span class="pl-v">overdraw</span>, <span class="pl-k">boolean</span> <span class="pl-v">threaded</span>, <span class="pl-k">int</span> <span class="pl-v">queueSize</span>) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R226" data-line-number="226"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-smi">TileCache</span> <span class="pl-en">createTileCache</span>(<span class="pl-smi">Context</span> <span class="pl-v">c</span>, <span class="pl-smi">String</span> <span class="pl-v">id</span>, <span class="pl-k">int</span> <span class="pl-v">tileSize</span>, <span class="pl-k">int</span> <span class="pl-v">width</span>, <span class="pl-k">int</span> <span class="pl-v">height</span>, <span class="pl-k">double</span> <span class="pl-v">overdraw</span>,</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R227" data-line-number="227"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	                                        <span class="pl-k">boolean</span> <span class="pl-v">threaded</span>, <span class="pl-k">int</span> <span class="pl-v">queueSize</span>, <span class="pl-k">boolean</span> <span class="pl-v">persistent</span>) {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L132" data-line-number="132"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R228" data-line-number="228"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-k">int</span> cacheSize <span class="pl-k">=</span> <span class="pl-smi">Math</span><span class="pl-k">.</span>round(getMinimumCacheSize(tileSize, overdraw, width, height));</span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L133" data-line-number="133"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-		<span class="pl-k">return</span> createExternalStorageTileCache(c, id, cacheSize, tileSize, threaded, queueSize);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R229" data-line-number="229"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">return</span> createExternalStorageTileCache(c, id, cacheSize, tileSize, threaded, queueSize<span class="x x-first x-last">, persistent</span>);</span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L134" data-line-number="134"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R230" data-line-number="230"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L135" data-line-number="135"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R231" data-line-number="231"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L136" data-line-number="136"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R232" data-line-number="232"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L137" data-line-number="137"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * Utility function to create a two-level tile cache with the right size, using the size of the map view.</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L138" data-line-number="138"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * This is the compatibility version that by default creates a non-threaded cache.</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L139" data-line-number="139"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 *</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L140" data-line-number="140"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * @param c           the Android context</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L141" data-line-number="141"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * @param id          name for the storage directory</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L142" data-line-number="142"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * @param tileSize    tile size</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L143" data-line-number="143"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * @param width       the width of the map view</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L144" data-line-number="144"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * @param height       the height of the map view</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L145" data-line-number="145"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * @param overdraw    overdraw allowance</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R233" data-line-number="233"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Utility function to create a two-level tile cache with the right size, using the size of the map view. This is</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R234" data-line-number="234"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * the compatibility version that by default creates a non-threaded cache.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R235" data-line-number="235"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * </span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R236" data-line-number="236"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param c</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R237" data-line-number="237"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            the Android context</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R238" data-line-number="238"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param id</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R239" data-line-number="239"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            name for the storage directory</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R240" data-line-number="240"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param tileSize</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R241" data-line-number="241"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            tile size</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R242" data-line-number="242"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param width</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R243" data-line-number="243"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            the width of the map view</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R244" data-line-number="244"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param height</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R245" data-line-number="245"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            the height of the map view</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R246" data-line-number="246"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param overdraw</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R247" data-line-number="247"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            overdraw allowance</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R248" data-line-number="248"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param threaded</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R249" data-line-number="249"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            if a background thread is employed to store tile data</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R250" data-line-number="250"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param queueSize</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R251" data-line-number="251"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            maximum length of queue before the put operation blocks</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L146" data-line-number="146"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R252" data-line-number="252"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 * @return a new cache created on the external storage</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L147" data-line-number="147"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R253" data-line-number="253"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L148" data-line-number="148"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-	<span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-smi">TileCache</span> <span class="pl-en">createTileCache</span>(<span class="pl-smi">Context</span> <span class="pl-v">c</span>, <span class="pl-smi">String</span> <span class="pl-v">id</span>, <span class="pl-k">int</span> <span class="pl-v">tileSize</span>, <span class="pl-k">int</span> <span class="pl-v">width</span>, <span class="pl-k">int</span> <span class="pl-v">height</span>, <span class="pl-k">double</span> <span class="pl-v">overdraw</span>) {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L149" data-line-number="149"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-		<span class="pl-k">return</span> createTileCache(c, id, tileSize, width, height, overdraw, <span class="pl-c1">false</span>, <span class="pl-c1">0</span>);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R254" data-line-number="254"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-smi">TileCache</span> <span class="pl-en">createTileCache</span>(<span class="pl-smi">Context</span> <span class="pl-v">c</span>, <span class="pl-smi">String</span> <span class="pl-v">id</span>, <span class="pl-k">int</span> <span class="pl-v">tileSize</span>, <span class="pl-k">int</span> <span class="pl-v">width</span>, <span class="pl-k">int</span> <span class="pl-v">height</span>, <span class="pl-k">double</span> <span class="pl-v">overdraw</span>,</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R255" data-line-number="255"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-k">boolean</span> <span class="pl-v">threaded</span>, <span class="pl-k">int</span> <span class="pl-v">queueSize</span>) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R256" data-line-number="256"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">return</span> createTileCache(c, id, tileSize, width, height, overdraw, threaded, queueSize, <span class="pl-c1">false</span>);</span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L150" data-line-number="150"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R257" data-line-number="257"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L151" data-line-number="151"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R258" data-line-number="258"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-f1bd231b9bd80b15bf450608da356fe8L152" data-line-number="152"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f1bd231b9bd80b15bf450608da356fe8R259" data-line-number="259"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-c">/**</span></span>

  </td>
</tr>


  <tr class="js-expandable-line">
   <td class="blob-num blob-num-expandable" colspan="2">
     <a href="#diff-f1bd231b9bd80b15bf450608da356fe8"
          class="diff-expander js-expand" title="Expand" aria-label="Expand"
          data-url="/mapsforge/mapsforge/blob_excerpt/98d66f1875ead6974eceb55f90d756bf0bb57199?diff=unified&amp;mode=100644&amp;path=mapsforge-map-android%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Fandroid%2Futil%2FAndroidUtil.java&amp;prev_line_num_left=152&amp;prev_line_num_right=259"
          data-left-range="153-446"
          data-right-range="260-446">
       <span class="octicon octicon-unfold"></span>
     </a>
   </td>
   <td class="blob-code blob-code-expandable"></td>
  </tr>

              </table>
            </div>
      </div>

      <a name="diff-d678e176aac57e3f56a607659993ed9b"></a>
      <div id="diff-3"
           class="file js-details-container
                   
                   
                   
                   
                   show-inline-notes
                 ">
        <div class="file-header" data-path="mapsforge-map-awt/src/main/java/org/mapsforge/map/awt/AwtTileBitmap.java">
          <div class="file-actions">
              <span class="show-file-notes">
                <label>
                  <input type="checkbox" checked="checked" class="js-toggle-file-notes">
                  Show notes
                </label>
              </span>

                <a href="/mvglasow/mapsforge/blob/8ca5512f3901939b98380b444ff1ec978fa2e742/mapsforge-map-awt/src/main/java/org/mapsforge/map/awt/AwtTileBitmap.java" class="btn btn-sm tooltipped tooltipped-n" rel="nofollow" aria-label="View the whole file at version 8ca5512 ">View</a>


          </div>
          <div class="file-info">
              <span class="diffstat tooltipped tooltipped-e" aria-label="25 additions &amp; 0 deletions">25 <span class="diffstat-bar"><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span></span></span>

            <span class="js-selectable-text" title="mapsforge-map-awt/src/main/java/org/mapsforge/map/awt/AwtTileBitmap.java">
              mapsforge-map-awt/src/main/java/org/mapsforge/map/awt/AwtTileBitmap.java
            </span>
            
          </div>
        </div>

            <div class="data highlight blob-wrapper">
              <table class="diff-table tab-size  " data-tab-size="8">
                
      <tr class="js-expandable-line" data-position="0">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-d678e176aac57e3f56a607659993ed9b"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/3470c6e06bf48cf922467a5000ed577323020490?diff=unified&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=25&amp;next_line_num_right=25&amp;path=mapsforge-map-awt%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Fawt%2FAwtTileBitmap.java&amp;prev_line_num_left=&amp;prev_line_num_right=&amp;right_hunk_size=9"
            data-left-range="1-24" data-right-range="1-24">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -25,6 +25,9 @@</td>
  </tr>

    

<tr>
    <td id="diff-d678e176aac57e3f56a607659993ed9bL25" data-line-number="25"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d678e176aac57e3f56a607659993ed9bR25" data-line-number="25"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-d678e176aac57e3f56a607659993ed9bL26" data-line-number="26"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d678e176aac57e3f56a607659993ed9bR26" data-line-number="26"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">AwtTileBitmap</span> <span class="pl-k">extends</span> <span class="pl-e">AwtBitmap</span> <span class="pl-k">implements</span> <span class="pl-e">TileBitmap</span> {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d678e176aac57e3f56a607659993ed9bL27" data-line-number="27"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d678e176aac57e3f56a607659993ed9bR27" data-line-number="27"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d678e176aac57e3f56a607659993ed9bR28" data-line-number="28"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">private</span> <span class="pl-k">long</span> expiration <span class="pl-k">=</span> <span class="pl-c1">0</span>;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d678e176aac57e3f56a607659993ed9bR29" data-line-number="29"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">private</span> <span class="pl-k">long</span> timestamp <span class="pl-k">=</span> <span class="pl-smi">System</span><span class="pl-k">.</span>currentTimeMillis();</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d678e176aac57e3f56a607659993ed9bR30" data-line-number="30"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d678e176aac57e3f56a607659993ed9bL28" data-line-number="28"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d678e176aac57e3f56a607659993ed9bR31" data-line-number="31"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">public</span> <span class="pl-en">AwtTileBitmap</span>(<span class="pl-smi">InputStream</span> <span class="pl-v">inputStream</span>) <span class="pl-k">throws</span> <span class="pl-smi">IOException</span> {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d678e176aac57e3f56a607659993ed9bL29" data-line-number="29"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d678e176aac57e3f56a607659993ed9bR32" data-line-number="32"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-v">super</span>(inputStream);</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d678e176aac57e3f56a607659993ed9bL30" data-line-number="30"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d678e176aac57e3f56a607659993ed9bR33" data-line-number="33"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>


      <tr class="js-expandable-line" data-position="10">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-d678e176aac57e3f56a607659993ed9b"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/3470c6e06bf48cf922467a5000ed577323020490?diff=unified&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=33&amp;next_line_num_right=36&amp;path=mapsforge-map-awt%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Fawt%2FAwtTileBitmap.java&amp;prev_line_num_left=30&amp;prev_line_num_right=33&amp;right_hunk_size=28"
            data-left-range="31-32" data-right-range="34-35">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -33,6 +36,28 @@ public AwtTileBitmap(int tileSize) {</td>
  </tr>

    

<tr>
    <td id="diff-d678e176aac57e3f56a607659993ed9bL33" data-line-number="33"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d678e176aac57e3f56a607659993ed9bR36" data-line-number="36"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-v">super</span>(tileSize, tileSize);</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d678e176aac57e3f56a607659993ed9bL34" data-line-number="34"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d678e176aac57e3f56a607659993ed9bR37" data-line-number="37"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d678e176aac57e3f56a607659993ed9bL35" data-line-number="35"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d678e176aac57e3f56a607659993ed9bR38" data-line-number="38"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d678e176aac57e3f56a607659993ed9bR39" data-line-number="39"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">@Override</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d678e176aac57e3f56a607659993ed9bR40" data-line-number="40"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">public</span> <span class="pl-k">long</span> <span class="pl-en">getTimestamp</span>() {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d678e176aac57e3f56a607659993ed9bR41" data-line-number="41"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">return</span> timestamp;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d678e176aac57e3f56a607659993ed9bR42" data-line-number="42"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d678e176aac57e3f56a607659993ed9bR43" data-line-number="43"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d678e176aac57e3f56a607659993ed9bR44" data-line-number="44"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">@Override</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d678e176aac57e3f56a607659993ed9bR45" data-line-number="45"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">public</span> <span class="pl-k">boolean</span> <span class="pl-en">isExpired</span>() {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d678e176aac57e3f56a607659993ed9bR46" data-line-number="46"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">if</span> (expiration <span class="pl-k">==</span> <span class="pl-c1">0</span>)</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d678e176aac57e3f56a607659993ed9bR47" data-line-number="47"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-k">return</span> <span class="pl-c1">false</span>;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d678e176aac57e3f56a607659993ed9bR48" data-line-number="48"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">return</span> (expiration <span class="pl-k">&gt;=</span> <span class="pl-smi">System</span><span class="pl-k">.</span>currentTimeMillis());</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d678e176aac57e3f56a607659993ed9bR49" data-line-number="49"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d678e176aac57e3f56a607659993ed9bR50" data-line-number="50"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d678e176aac57e3f56a607659993ed9bR51" data-line-number="51"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">@Override</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d678e176aac57e3f56a607659993ed9bR52" data-line-number="52"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">setExpiration</span>(<span class="pl-k">long</span> <span class="pl-v">expiration</span>) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d678e176aac57e3f56a607659993ed9bR53" data-line-number="53"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-v">this</span><span class="pl-k">.</span>expiration <span class="pl-k">=</span> expiration;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d678e176aac57e3f56a607659993ed9bR54" data-line-number="54"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d678e176aac57e3f56a607659993ed9bR55" data-line-number="55"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d678e176aac57e3f56a607659993ed9bR56" data-line-number="56"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">@Override</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d678e176aac57e3f56a607659993ed9bR57" data-line-number="57"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">setTimestamp</span>(<span class="pl-k">long</span> <span class="pl-v">timestamp</span>) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d678e176aac57e3f56a607659993ed9bR58" data-line-number="58"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-v">this</span><span class="pl-k">.</span>timestamp <span class="pl-k">=</span> timestamp;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d678e176aac57e3f56a607659993ed9bR59" data-line-number="59"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d678e176aac57e3f56a607659993ed9bR60" data-line-number="60"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d678e176aac57e3f56a607659993ed9bL36" data-line-number="36"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d678e176aac57e3f56a607659993ed9bR61" data-line-number="61"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">public</span> <span class="pl-en">AwtTileBitmap</span>(<span class="pl-k">int</span> <span class="pl-v">tileSize</span>, <span class="pl-k">boolean</span> <span class="pl-v">hasAlpha</span>) {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d678e176aac57e3f56a607659993ed9bL37" data-line-number="37"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d678e176aac57e3f56a607659993ed9bR62" data-line-number="62"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-v">super</span>(tileSize, tileSize, hasAlpha);</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d678e176aac57e3f56a607659993ed9bL38" data-line-number="38"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d678e176aac57e3f56a607659993ed9bR63" data-line-number="63"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>


  <tr class="js-expandable-line">
   <td class="blob-num blob-num-expandable" colspan="2">
     <a href="#diff-d678e176aac57e3f56a607659993ed9b"
          class="diff-expander js-expand" title="Expand" aria-label="Expand"
          data-url="/mapsforge/mapsforge/blob_excerpt/3470c6e06bf48cf922467a5000ed577323020490?diff=unified&amp;mode=100644&amp;path=mapsforge-map-awt%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Fawt%2FAwtTileBitmap.java&amp;prev_line_num_left=38&amp;prev_line_num_right=63"
          data-left-range="39-69"
          data-right-range="64-69">
       <span class="octicon octicon-unfold"></span>
     </a>
   </td>
   <td class="blob-code blob-code-expandable"></td>
  </tr>

              </table>
            </div>
      </div>

      <a name="diff-8112c3a1fffdbc45bf0f75c2c775ecc2"></a>
      <div id="diff-4"
           class="file js-details-container
                   
                   
                   
                   
                   show-inline-notes
                 ">
        <div class="file-header" data-path="mapsforge-map-reader/src/main/java/org/mapsforge/map/reader/MapDataStore.java">
          <div class="file-actions">
              <span class="show-file-notes">
                <label>
                  <input type="checkbox" checked="checked" class="js-toggle-file-notes">
                  Show notes
                </label>
              </span>

                <a href="/mvglasow/mapsforge/blob/8ca5512f3901939b98380b444ff1ec978fa2e742/mapsforge-map-reader/src/main/java/org/mapsforge/map/reader/MapDataStore.java" class="btn btn-sm tooltipped tooltipped-n" rel="nofollow" aria-label="View the whole file at version 8ca5512 ">View</a>


          </div>
          <div class="file-info">
              <span class="diffstat tooltipped tooltipped-e" aria-label="9 additions &amp; 0 deletions">9 <span class="diffstat-bar"><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span></span></span>

            <span class="js-selectable-text" title="mapsforge-map-reader/src/main/java/org/mapsforge/map/reader/MapDataStore.java">
              mapsforge-map-reader/src/main/java/org/mapsforge/map/reader/MapDataStore.java
            </span>
            
          </div>
        </div>

            <div class="data highlight blob-wrapper">
              <table class="diff-table tab-size  " data-tab-size="8">
                
      <tr class="js-expandable-line" data-position="0">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-8112c3a1fffdbc45bf0f75c2c775ecc2"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/5e61c8252e4d2b4be9c28ba55080b1555a04a54a?diff=unified&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=36&amp;next_line_num_right=36&amp;path=mapsforge-map-reader%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Freader%2FMapDataStore.java&amp;prev_line_num_left=&amp;prev_line_num_right=&amp;right_hunk_size=15"
            data-left-range="1-35" data-right-range="1-35">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -36,6 +36,15 @@</td>
  </tr>

    

<tr>
    <td id="diff-8112c3a1fffdbc45bf0f75c2c775ecc2L36" data-line-number="36"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8112c3a1fffdbc45bf0f75c2c775ecc2R36" data-line-number="36"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">void</span> <span class="pl-en">close</span>();</span>

  </td>
</tr>


    

<tr>
    <td id="diff-8112c3a1fffdbc45bf0f75c2c775ecc2L37" data-line-number="37"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8112c3a1fffdbc45bf0f75c2c775ecc2R37" data-line-number="37"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-8112c3a1fffdbc45bf0f75c2c775ecc2L38" data-line-number="38"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8112c3a1fffdbc45bf0f75c2c775ecc2R38" data-line-number="38"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8112c3a1fffdbc45bf0f75c2c775ecc2R39" data-line-number="39"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Returns the timestamp of the data used to render a specific tile.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8112c3a1fffdbc45bf0f75c2c775ecc2R40" data-line-number="40"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8112c3a1fffdbc45bf0f75c2c775ecc2R41" data-line-number="41"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param tile</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8112c3a1fffdbc45bf0f75c2c775ecc2R42" data-line-number="42"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            A tile.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8112c3a1fffdbc45bf0f75c2c775ecc2R43" data-line-number="43"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @return the timestamp of the data used to render the tile</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8112c3a1fffdbc45bf0f75c2c775ecc2R44" data-line-number="44"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8112c3a1fffdbc45bf0f75c2c775ecc2R45" data-line-number="45"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">long</span> <span class="pl-en">getDataTimestamp</span>(<span class="pl-smi">Tile</span> <span class="pl-v">tile</span>);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8112c3a1fffdbc45bf0f75c2c775ecc2R46" data-line-number="46"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8112c3a1fffdbc45bf0f75c2c775ecc2R47" data-line-number="47"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-8112c3a1fffdbc45bf0f75c2c775ecc2L39" data-line-number="39"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8112c3a1fffdbc45bf0f75c2c775ecc2R48" data-line-number="48"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 * Gets the initial map position.</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-8112c3a1fffdbc45bf0f75c2c775ecc2L40" data-line-number="40"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8112c3a1fffdbc45bf0f75c2c775ecc2R49" data-line-number="49"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 * @return the start position, if available.</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-8112c3a1fffdbc45bf0f75c2c775ecc2L41" data-line-number="41"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8112c3a1fffdbc45bf0f75c2c775ecc2R50" data-line-number="50"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 */</span></span>

  </td>
</tr>


  <tr class="js-expandable-line">
   <td class="blob-num blob-num-expandable" colspan="2">
     <a href="#diff-8112c3a1fffdbc45bf0f75c2c775ecc2"
          class="diff-expander js-expand" title="Expand" aria-label="Expand"
          data-url="/mapsforge/mapsforge/blob_excerpt/5e61c8252e4d2b4be9c28ba55080b1555a04a54a?diff=unified&amp;mode=100644&amp;path=mapsforge-map-reader%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Freader%2FMapDataStore.java&amp;prev_line_num_left=41&amp;prev_line_num_right=50"
          data-left-range="42-73"
          data-right-range="51-73">
       <span class="octicon octicon-unfold"></span>
     </a>
   </td>
   <td class="blob-code blob-code-expandable"></td>
  </tr>

              </table>
            </div>
      </div>

      <a name="diff-d00e8260acc0de904ed29411507005d8"></a>
      <div id="diff-5"
           class="file js-details-container
                   
                   
                   
                   
                   show-inline-notes
                 ">
        <div class="file-header" data-path="mapsforge-map-reader/src/main/java/org/mapsforge/map/reader/MapFile.java">
          <div class="file-actions">
              <span class="show-file-notes">
                <label>
                  <input type="checkbox" checked="checked" class="js-toggle-file-notes">
                  Show notes
                </label>
              </span>

                <a href="/mvglasow/mapsforge/blob/8ca5512f3901939b98380b444ff1ec978fa2e742/mapsforge-map-reader/src/main/java/org/mapsforge/map/reader/MapFile.java" class="btn btn-sm tooltipped tooltipped-n" rel="nofollow" aria-label="View the whole file at version 8ca5512 ">View</a>


          </div>
          <div class="file-info">
              <span class="diffstat tooltipped tooltipped-e" aria-label="14 additions &amp; 0 deletions">14 <span class="diffstat-bar"><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span></span></span>

            <span class="js-selectable-text" title="mapsforge-map-reader/src/main/java/org/mapsforge/map/reader/MapFile.java">
              mapsforge-map-reader/src/main/java/org/mapsforge/map/reader/MapFile.java
            </span>
            
          </div>
        </div>

            <div class="data highlight blob-wrapper">
              <table class="diff-table tab-size  " data-tab-size="8">
                
      <tr class="js-expandable-line" data-position="0">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-d00e8260acc0de904ed29411507005d8"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/2e802a17efa1acc4dc713d045c5c35e5bb923771?diff=unified&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=199&amp;next_line_num_right=199&amp;path=mapsforge-map-reader%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Freader%2FMapFile.java&amp;prev_line_num_left=&amp;prev_line_num_right=&amp;right_hunk_size=7"
            data-left-range="1-198" data-right-range="1-198">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -199,6 +199,7 @@</td>
  </tr>

    

<tr>
    <td id="diff-d00e8260acc0de904ed29411507005d8L199" data-line-number="199"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d00e8260acc0de904ed29411507005d8R199" data-line-number="199"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">private</span> <span class="pl-k">final</span> <span class="pl-smi">RandomAccessFile</span> inputFile;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d00e8260acc0de904ed29411507005d8L200" data-line-number="200"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d00e8260acc0de904ed29411507005d8R200" data-line-number="200"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">private</span> <span class="pl-k">final</span> <span class="pl-smi">MapFileHeader</span> mapFileHeader;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d00e8260acc0de904ed29411507005d8L201" data-line-number="201"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d00e8260acc0de904ed29411507005d8R201" data-line-number="201"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">private</span> <span class="pl-k">final</span> <span class="pl-smi">ReadBuffer</span> readBuffer;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d00e8260acc0de904ed29411507005d8R202" data-line-number="202"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">private</span> <span class="pl-k">final</span> <span class="pl-k">long</span> timestamp;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d00e8260acc0de904ed29411507005d8L202" data-line-number="202"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d00e8260acc0de904ed29411507005d8R203" data-line-number="203"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-d00e8260acc0de904ed29411507005d8L203" data-line-number="203"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d00e8260acc0de904ed29411507005d8R204" data-line-number="204"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-d00e8260acc0de904ed29411507005d8L204" data-line-number="204"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d00e8260acc0de904ed29411507005d8R205" data-line-number="205"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-c">/* Only for testing, an empty file. */</span></span>

  </td>
</tr>


      <tr class="js-expandable-line" data-position="8">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-d00e8260acc0de904ed29411507005d8"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/2e802a17efa1acc4dc713d045c5c35e5bb923771?diff=unified&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=244&amp;next_line_num_right=245&amp;path=mapsforge-map-reader%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Freader%2FMapFile.java&amp;prev_line_num_left=204&amp;prev_line_num_right=205&amp;right_hunk_size=8"
            data-left-range="205-243" data-right-range="206-244">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -244,6 +245,8 @@ public MapFile(File mapFile) {</td>
  </tr>

    

<tr>
    <td id="diff-d00e8260acc0de904ed29411507005d8L244" data-line-number="244"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d00e8260acc0de904ed29411507005d8R245" data-line-number="245"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			<span class="pl-v">this</span><span class="pl-k">.</span>mapFileHeader <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">MapFileHeader</span>();</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d00e8260acc0de904ed29411507005d8L245" data-line-number="245"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d00e8260acc0de904ed29411507005d8R246" data-line-number="246"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			<span class="pl-v">this</span><span class="pl-k">.</span>mapFileHeader<span class="pl-k">.</span>readHeader(<span class="pl-v">this</span><span class="pl-k">.</span>readBuffer, <span class="pl-v">this</span><span class="pl-k">.</span>fileSize);</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d00e8260acc0de904ed29411507005d8L246" data-line-number="246"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d00e8260acc0de904ed29411507005d8R247" data-line-number="247"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			<span class="pl-v">this</span><span class="pl-k">.</span>databaseIndexCache <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">IndexCache</span>(<span class="pl-v">this</span><span class="pl-k">.</span>inputFile, <span class="pl-c1">INDEX_CACHE_SIZE</span>);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d00e8260acc0de904ed29411507005d8R248" data-line-number="248"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d00e8260acc0de904ed29411507005d8R249" data-line-number="249"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-v">this</span><span class="pl-k">.</span>timestamp <span class="pl-k">=</span> mapFile<span class="pl-k">.</span>lastModified();</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d00e8260acc0de904ed29411507005d8L247" data-line-number="247"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d00e8260acc0de904ed29411507005d8R250" data-line-number="250"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		} <span class="pl-k">catch</span> (<span class="pl-smi">Exception</span> e) {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d00e8260acc0de904ed29411507005d8L248" data-line-number="248"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d00e8260acc0de904ed29411507005d8R251" data-line-number="251"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			<span class="pl-c1">LOGGER</span><span class="pl-k">.</span>log(<span class="pl-smi">Level</span><span class="pl-c1"><span class="pl-k">.</span>SEVERE</span>, <span class="pl-c1">null</span>, e);</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d00e8260acc0de904ed29411507005d8L249" data-line-number="249"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d00e8260acc0de904ed29411507005d8R252" data-line-number="252"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			<span class="pl-c">// make sure that the file is closed</span></span>

  </td>
</tr>


      <tr class="js-expandable-line" data-position="17">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-d00e8260acc0de904ed29411507005d8"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/2e802a17efa1acc4dc713d045c5c35e5bb923771?diff=unified&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=295&amp;next_line_num_right=298&amp;path=mapsforge-map-reader%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Freader%2FMapFile.java&amp;prev_line_num_left=249&amp;prev_line_num_right=252&amp;right_hunk_size=16"
            data-left-range="250-294" data-right-range="253-297">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -295,6 +298,16 @@ public MapFileInfo getMapFileInfo() {</td>
  </tr>

    

<tr>
    <td id="diff-d00e8260acc0de904ed29411507005d8L295" data-line-number="295"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d00e8260acc0de904ed29411507005d8R298" data-line-number="298"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d00e8260acc0de904ed29411507005d8L296" data-line-number="296"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d00e8260acc0de904ed29411507005d8R299" data-line-number="299"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-d00e8260acc0de904ed29411507005d8L297" data-line-number="297"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d00e8260acc0de904ed29411507005d8R300" data-line-number="300"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d00e8260acc0de904ed29411507005d8R301" data-line-number="301"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Returns the creation timestamp of the map file.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d00e8260acc0de904ed29411507005d8R302" data-line-number="302"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param tile not used, as all tiles will shared the same creation date.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d00e8260acc0de904ed29411507005d8R303" data-line-number="303"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @return the creation timestamp inside the map file.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d00e8260acc0de904ed29411507005d8R304" data-line-number="304"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d00e8260acc0de904ed29411507005d8R305" data-line-number="305"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">@Override</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d00e8260acc0de904ed29411507005d8R306" data-line-number="306"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">public</span> <span class="pl-k">long</span> <span class="pl-en">getDataTimestamp</span>(<span class="pl-smi">Tile</span> <span class="pl-v">tile</span>) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d00e8260acc0de904ed29411507005d8R307" data-line-number="307"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">return</span> <span class="pl-v">this</span><span class="pl-k">.</span>timestamp;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d00e8260acc0de904ed29411507005d8R308" data-line-number="308"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d00e8260acc0de904ed29411507005d8R309" data-line-number="309"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d00e8260acc0de904ed29411507005d8R310" data-line-number="310"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-d00e8260acc0de904ed29411507005d8L298" data-line-number="298"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d00e8260acc0de904ed29411507005d8R311" data-line-number="311"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 * Reads all map data for the area covered by the given tile at the tile zoom level.</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-d00e8260acc0de904ed29411507005d8L299" data-line-number="299"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d00e8260acc0de904ed29411507005d8R312" data-line-number="312"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 *</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-d00e8260acc0de904ed29411507005d8L300" data-line-number="300"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d00e8260acc0de904ed29411507005d8R313" data-line-number="313"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 * @param tile</span></span>

  </td>
</tr>


      <tr class="js-expandable-line" data-position="34">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-d00e8260acc0de904ed29411507005d8"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/2e802a17efa1acc4dc713d045c5c35e5bb923771?diff=unified&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=860&amp;next_line_num_right=873&amp;path=mapsforge-map-reader%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Freader%2FMapFile.java&amp;prev_line_num_left=300&amp;prev_line_num_right=313&amp;right_hunk_size=7"
            data-left-range="301-859" data-right-range="314-872">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -860,6 +873,7 @@ private MapFile() {</td>
  </tr>

    

<tr>
    <td id="diff-d00e8260acc0de904ed29411507005d8L860" data-line-number="860"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d00e8260acc0de904ed29411507005d8R873" data-line-number="873"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		inputFile <span class="pl-k">=</span> <span class="pl-c1">null</span>;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d00e8260acc0de904ed29411507005d8L861" data-line-number="861"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d00e8260acc0de904ed29411507005d8R874" data-line-number="874"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		mapFileHeader <span class="pl-k">=</span> <span class="pl-c1">null</span>;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d00e8260acc0de904ed29411507005d8L862" data-line-number="862"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d00e8260acc0de904ed29411507005d8R875" data-line-number="875"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		readBuffer <span class="pl-k">=</span> <span class="pl-c1">null</span>;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d00e8260acc0de904ed29411507005d8R876" data-line-number="876"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		timestamp <span class="pl-k">=</span> <span class="pl-smi">System</span><span class="pl-k">.</span>currentTimeMillis();</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d00e8260acc0de904ed29411507005d8L863" data-line-number="863"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d00e8260acc0de904ed29411507005d8R877" data-line-number="877"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d00e8260acc0de904ed29411507005d8L864" data-line-number="864"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d00e8260acc0de904ed29411507005d8R878" data-line-number="878"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> }</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d00e8260acc0de904ed29411507005d8L865" data-line-number="865"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d00e8260acc0de904ed29411507005d8R879" data-line-number="879"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>



              </table>
            </div>
      </div>

      <a name="diff-2516a2d577b03c0e475ed1c757fb587b"></a>
      <div id="diff-6"
           class="file js-details-container
                   
                   
                   
                   
                   show-inline-notes
                 ">
        <div class="file-header" data-path="mapsforge-map-reader/src/main/java/org/mapsforge/map/reader/MultiMapDataStore.java">
          <div class="file-actions">
              <span class="show-file-notes">
                <label>
                  <input type="checkbox" checked="checked" class="js-toggle-file-notes">
                  Show notes
                </label>
              </span>

                <a href="/mvglasow/mapsforge/blob/8ca5512f3901939b98380b444ff1ec978fa2e742/mapsforge-map-reader/src/main/java/org/mapsforge/map/reader/MultiMapDataStore.java" class="btn btn-sm tooltipped tooltipped-n" rel="nofollow" aria-label="View the whole file at version 8ca5512 ">View</a>


          </div>
          <div class="file-info">
              <span class="diffstat tooltipped tooltipped-e" aria-label="32 additions &amp; 0 deletions">32 <span class="diffstat-bar"><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span></span></span>

            <span class="js-selectable-text" title="mapsforge-map-reader/src/main/java/org/mapsforge/map/reader/MultiMapDataStore.java">
              mapsforge-map-reader/src/main/java/org/mapsforge/map/reader/MultiMapDataStore.java
            </span>
            
          </div>
        </div>

            <div class="data highlight blob-wrapper">
              <table class="diff-table tab-size  " data-tab-size="8">
                
      <tr class="js-expandable-line" data-position="0">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-2516a2d577b03c0e475ed1c757fb587b"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/6ab0561b4a9d43f130cd0710d3832cbb5b4a75b1?diff=unified&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=84&amp;next_line_num_right=84&amp;path=mapsforge-map-reader%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Freader%2FMultiMapDataStore.java&amp;prev_line_num_left=&amp;prev_line_num_right=&amp;right_hunk_size=38"
            data-left-range="1-83" data-right-range="1-83">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -84,6 +84,38 @@ public void close() {</td>
  </tr>

    

<tr>
    <td id="diff-2516a2d577b03c0e475ed1c757fb587bL84" data-line-number="84"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-2516a2d577b03c0e475ed1c757fb587bR84" data-line-number="84"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-2516a2d577b03c0e475ed1c757fb587bL85" data-line-number="85"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-2516a2d577b03c0e475ed1c757fb587bR85" data-line-number="85"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-2516a2d577b03c0e475ed1c757fb587bL86" data-line-number="86"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-2516a2d577b03c0e475ed1c757fb587bR86" data-line-number="86"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-2516a2d577b03c0e475ed1c757fb587bR87" data-line-number="87"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-2516a2d577b03c0e475ed1c757fb587bR88" data-line-number="88"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Returns the timestamp of the data used to render a specific tile.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-2516a2d577b03c0e475ed1c757fb587bR89" data-line-number="89"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-2516a2d577b03c0e475ed1c757fb587bR90" data-line-number="90"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * If the tile uses data from multiple data stores, the most recent timestamp is returned.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-2516a2d577b03c0e475ed1c757fb587bR91" data-line-number="91"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-2516a2d577b03c0e475ed1c757fb587bR92" data-line-number="92"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param tile</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-2516a2d577b03c0e475ed1c757fb587bR93" data-line-number="93"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            A tile.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-2516a2d577b03c0e475ed1c757fb587bR94" data-line-number="94"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @return the timestamp of the data used to render the tile</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-2516a2d577b03c0e475ed1c757fb587bR95" data-line-number="95"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-2516a2d577b03c0e475ed1c757fb587bR96" data-line-number="96"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">@Override</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-2516a2d577b03c0e475ed1c757fb587bR97" data-line-number="97"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">public</span> <span class="pl-k">long</span> <span class="pl-en">getDataTimestamp</span>(<span class="pl-smi">Tile</span> <span class="pl-v">tile</span>) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-2516a2d577b03c0e475ed1c757fb587bR98" data-line-number="98"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">switch</span> (<span class="pl-v">this</span><span class="pl-k">.</span>dataPolicy) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-2516a2d577b03c0e475ed1c757fb587bR99" data-line-number="99"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-k">case</span> <span class="pl-c1">RETURN_FIRST</span><span class="pl-k">:</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-2516a2d577b03c0e475ed1c757fb587bR100" data-line-number="100"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+				<span class="pl-k">for</span> (<span class="pl-smi">MapDataStore</span> mdb <span class="pl-k">:</span> mapDatabases) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-2516a2d577b03c0e475ed1c757fb587bR101" data-line-number="101"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+					<span class="pl-k">if</span> (mdb<span class="pl-k">.</span>supportsTile(tile)) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-2516a2d577b03c0e475ed1c757fb587bR102" data-line-number="102"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+						<span class="pl-k">return</span> mdb<span class="pl-k">.</span>getDataTimestamp(tile);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-2516a2d577b03c0e475ed1c757fb587bR103" data-line-number="103"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+					}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-2516a2d577b03c0e475ed1c757fb587bR104" data-line-number="104"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+				}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-2516a2d577b03c0e475ed1c757fb587bR105" data-line-number="105"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+				<span class="pl-k">return</span> <span class="pl-c1">0</span>;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-2516a2d577b03c0e475ed1c757fb587bR106" data-line-number="106"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-k">case</span> <span class="pl-c1">RETURN_ALL</span><span class="pl-k">:</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-2516a2d577b03c0e475ed1c757fb587bR107" data-line-number="107"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-k">case</span> <span class="pl-c1">DEDUPLICATE</span><span class="pl-k">:</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-2516a2d577b03c0e475ed1c757fb587bR108" data-line-number="108"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+				<span class="pl-k">long</span> result <span class="pl-k">=</span> <span class="pl-c1">0</span>;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-2516a2d577b03c0e475ed1c757fb587bR109" data-line-number="109"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+				<span class="pl-k">for</span> (<span class="pl-smi">MapDataStore</span> mdb <span class="pl-k">:</span> mapDatabases) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-2516a2d577b03c0e475ed1c757fb587bR110" data-line-number="110"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+					<span class="pl-k">if</span> (mdb<span class="pl-k">.</span>supportsTile(tile)) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-2516a2d577b03c0e475ed1c757fb587bR111" data-line-number="111"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+						result <span class="pl-k">=</span> <span class="pl-smi">Math</span><span class="pl-k">.</span>max(result, mdb<span class="pl-k">.</span>getDataTimestamp(tile));</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-2516a2d577b03c0e475ed1c757fb587bR112" data-line-number="112"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+					}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-2516a2d577b03c0e475ed1c757fb587bR113" data-line-number="113"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+				}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-2516a2d577b03c0e475ed1c757fb587bR114" data-line-number="114"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+				<span class="pl-k">return</span> result;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-2516a2d577b03c0e475ed1c757fb587bR115" data-line-number="115"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-2516a2d577b03c0e475ed1c757fb587bR116" data-line-number="116"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">throw</span> <span class="pl-k">new</span> <span class="pl-smi">IllegalStateException</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>Invalid data policy for multi map database<span class="pl-pds">&quot;</span></span>);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-2516a2d577b03c0e475ed1c757fb587bR117" data-line-number="117"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-2516a2d577b03c0e475ed1c757fb587bR118" data-line-number="118"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td id="diff-2516a2d577b03c0e475ed1c757fb587bL87" data-line-number="87"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-2516a2d577b03c0e475ed1c757fb587bR119" data-line-number="119"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">@Override</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-2516a2d577b03c0e475ed1c757fb587bL88" data-line-number="88"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-2516a2d577b03c0e475ed1c757fb587bR120" data-line-number="120"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">public</span> <span class="pl-smi">MapReadResult</span> <span class="pl-en">readMapData</span>(<span class="pl-smi">Tile</span> <span class="pl-v">tile</span>) {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-2516a2d577b03c0e475ed1c757fb587bL89" data-line-number="89"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-2516a2d577b03c0e475ed1c757fb587bR121" data-line-number="121"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-k">switch</span> (<span class="pl-v">this</span><span class="pl-k">.</span>dataPolicy) {</span>

  </td>
</tr>


  <tr class="js-expandable-line">
   <td class="blob-num blob-num-expandable" colspan="2">
     <a href="#diff-2516a2d577b03c0e475ed1c757fb587b"
          class="diff-expander js-expand" title="Expand" aria-label="Expand"
          data-url="/mapsforge/mapsforge/blob_excerpt/6ab0561b4a9d43f130cd0710d3832cbb5b4a75b1?diff=unified&amp;mode=100644&amp;path=mapsforge-map-reader%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Freader%2FMultiMapDataStore.java&amp;prev_line_num_left=89&amp;prev_line_num_right=121"
          data-left-range="90-204"
          data-right-range="122-204">
       <span class="octicon octicon-unfold"></span>
     </a>
   </td>
   <td class="blob-code blob-code-expandable"></td>
  </tr>

              </table>
            </div>
      </div>

      <a name="diff-8eb1af077962acbc82aef148b53c6bd1"></a>
      <div id="diff-7"
           class="file js-details-container
                   
                   
                   
                   
                   show-inline-notes
                 ">
        <div class="file-header" data-path="mapsforge-map/src/main/java/org/mapsforge/map/layer/TileLayer.java">
          <div class="file-actions">
              <span class="show-file-notes">
                <label>
                  <input type="checkbox" checked="checked" class="js-toggle-file-notes">
                  Show notes
                </label>
              </span>

                <a href="/mvglasow/mapsforge/blob/8ca5512f3901939b98380b444ff1ec978fa2e742/mapsforge-map/src/main/java/org/mapsforge/map/layer/TileLayer.java" class="btn btn-sm tooltipped tooltipped-n" rel="nofollow" aria-label="View the whole file at version 8ca5512 ">View</a>


          </div>
          <div class="file-info">
              <span class="diffstat tooltipped tooltipped-e" aria-label="30 additions &amp; 2 deletions">32 <span class="diffstat-bar"><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span>&#xf053;</span></span>

            <span class="js-selectable-text" title="mapsforge-map/src/main/java/org/mapsforge/map/layer/TileLayer.java">
              mapsforge-map/src/main/java/org/mapsforge/map/layer/TileLayer.java
            </span>
            
          </div>
        </div>

            <div class="data highlight blob-wrapper">
              <table class="diff-table tab-size  " data-tab-size="8">
                
      <tr class="js-expandable-line" data-position="0">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-8eb1af077962acbc82aef148b53c6bd1"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/deebd562e3111277379035dff6c1640b134729f7?diff=unified&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=22&amp;next_line_num_right=22&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2FTileLayer.java&amp;prev_line_num_left=&amp;prev_line_num_right=&amp;right_hunk_size=7"
            data-left-range="1-21" data-right-range="1-21">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -22,6 +22,7 @@</td>
  </tr>

    

<tr>
    <td id="diff-8eb1af077962acbc82aef148b53c6bd1L22" data-line-number="22"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R22" data-line-number="22"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">org.mapsforge.core.graphics.Bitmap</span>;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-8eb1af077962acbc82aef148b53c6bd1L23" data-line-number="23"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R23" data-line-number="23"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">org.mapsforge.core.graphics.Canvas</span>;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-8eb1af077962acbc82aef148b53c6bd1L24" data-line-number="24"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R24" data-line-number="24"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">org.mapsforge.core.graphics.Matrix</span>;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R25" data-line-number="25"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-k">import</span> <span class="pl-smi">org.mapsforge.core.graphics.TileBitmap</span>;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-8eb1af077962acbc82aef148b53c6bd1L25" data-line-number="25"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R26" data-line-number="26"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">org.mapsforge.core.model.BoundingBox</span>;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-8eb1af077962acbc82aef148b53c6bd1L26" data-line-number="26"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R27" data-line-number="27"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">org.mapsforge.core.model.Point</span>;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-8eb1af077962acbc82aef148b53c6bd1L27" data-line-number="27"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R28" data-line-number="28"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">org.mapsforge.core.model.Tile</span>;</span>

  </td>
</tr>


      <tr class="js-expandable-line" data-position="8">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-8eb1af077962acbc82aef148b53c6bd1"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/deebd562e3111277379035dff6c1640b134729f7?diff=unified&amp;left_hunk_size=7&amp;mode=100644&amp;next_line_num_left=92&amp;next_line_num_right=93&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2FTileLayer.java&amp;prev_line_num_left=27&amp;prev_line_num_right=28&amp;right_hunk_size=7"
            data-left-range="28-91" data-right-range="29-92">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -92,7 +93,7 @@ public void draw(BoundingBox boundingBox, byte zoomLevel, Canvas canvas, Point t</td>
  </tr>

    

<tr>
    <td id="diff-8eb1af077962acbc82aef148b53c6bd1L92" data-line-number="92"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R93" data-line-number="93"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			<span class="pl-smi">Point</span> point <span class="pl-k">=</span> tilePosition<span class="pl-k">.</span>point;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-8eb1af077962acbc82aef148b53c6bd1L93" data-line-number="93"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R94" data-line-number="94"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			<span class="pl-smi">Tile</span> tile <span class="pl-k">=</span> tilePosition<span class="pl-k">.</span>tile;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-8eb1af077962acbc82aef148b53c6bd1L94" data-line-number="94"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R95" data-line-number="95"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			<span class="pl-smi">T</span> job <span class="pl-k">=</span> createJob(tile);</span>

  </td>
</tr>


    

<tr>
    <td id="diff-8eb1af077962acbc82aef148b53c6bd1L95" data-line-number="95"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-			<span class="pl-smi x x-first x-last">Bitmap</span> bitmap <span class="pl-k">=</span> <span class="pl-v">this</span><span class="pl-k">.</span>tileCache<span class="pl-k">.</span>getImmediately(job);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R96" data-line-number="96"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-smi x x-first x-last">TileBitmap</span> bitmap <span class="pl-k">=</span> <span class="pl-v">this</span><span class="pl-k">.</span>tileCache<span class="pl-k">.</span>getImmediately(job);</span>

  </td>
</tr>


    

<tr>
    <td id="diff-8eb1af077962acbc82aef148b53c6bd1L96" data-line-number="96"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R97" data-line-number="97"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-8eb1af077962acbc82aef148b53c6bd1L97" data-line-number="97"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R98" data-line-number="98"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			<span class="pl-k">if</span> (bitmap <span class="pl-k">==</span> <span class="pl-c1">null</span>) {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-8eb1af077962acbc82aef148b53c6bd1L98" data-line-number="98"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R99" data-line-number="99"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 				<span class="pl-k">if</span> (<span class="pl-v">this</span><span class="pl-k">.</span>hasJobQueue <span class="pl-k">&amp;&amp;</span> <span class="pl-k">!</span><span class="pl-v">this</span><span class="pl-k">.</span>tileCache<span class="pl-k">.</span>containsKey(job)) {</span>

  </td>
</tr>


      <tr class="js-expandable-line" data-position="17">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-8eb1af077962acbc82aef148b53c6bd1"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/deebd562e3111277379035dff6c1640b134729f7?diff=unified&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=102&amp;next_line_num_right=103&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2FTileLayer.java&amp;prev_line_num_left=98&amp;prev_line_num_right=99&amp;right_hunk_size=9"
            data-left-range="99-101" data-right-range="100-102">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -102,6 +103,9 @@ public void draw(BoundingBox boundingBox, byte zoomLevel, Canvas canvas, Point t</td>
  </tr>

    

<tr>
    <td id="diff-8eb1af077962acbc82aef148b53c6bd1L102" data-line-number="102"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R103" data-line-number="103"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 				}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-8eb1af077962acbc82aef148b53c6bd1L103" data-line-number="103"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R104" data-line-number="104"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 				drawParentTileBitmap(canvas, point, tile);</span>

  </td>
</tr>


    

<tr>
    <td id="diff-8eb1af077962acbc82aef148b53c6bd1L104" data-line-number="104"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R105" data-line-number="105"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			} <span class="pl-k">else</span> {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R106" data-line-number="106"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+				<span class="pl-k">if</span> (isTileStale(tile, bitmap) <span class="pl-k">&amp;&amp;</span> <span class="pl-v">this</span><span class="pl-k">.</span>hasJobQueue <span class="pl-k">&amp;&amp;</span> <span class="pl-k">!</span><span class="pl-v">this</span><span class="pl-k">.</span>tileCache<span class="pl-k">.</span>containsKey(job)) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R107" data-line-number="107"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+					<span class="pl-v">this</span><span class="pl-k">.</span>jobQueue<span class="pl-k">.</span>add(job);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R108" data-line-number="108"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+				}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-8eb1af077962acbc82aef148b53c6bd1L105" data-line-number="105"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R109" data-line-number="109"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 				retrieveLabelsOnly(job);</span>

  </td>
</tr>


    

<tr>
    <td id="diff-8eb1af077962acbc82aef148b53c6bd1L106" data-line-number="106"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R110" data-line-number="110"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 				canvas<span class="pl-k">.</span>drawBitmap(bitmap, (<span class="pl-k">int</span>) <span class="pl-smi">Math</span><span class="pl-k">.</span>round(point<span class="pl-k">.</span>x), (<span class="pl-k">int</span>) <span class="pl-smi">Math</span><span class="pl-k">.</span>round(point<span class="pl-k">.</span>y));</span>

  </td>
</tr>


    

<tr>
    <td id="diff-8eb1af077962acbc82aef148b53c6bd1L107" data-line-number="107"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R111" data-line-number="111"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 				bitmap<span class="pl-k">.</span>decrementRefCount();</span>

  </td>
</tr>


      <tr class="js-expandable-line" data-position="27">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-8eb1af077962acbc82aef148b53c6bd1"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/deebd562e3111277379035dff6c1640b134729f7?diff=unified&amp;left_hunk_size=7&amp;mode=100644&amp;next_line_num_left=127&amp;next_line_num_right=131&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2FTileLayer.java&amp;prev_line_num_left=107&amp;prev_line_num_right=111&amp;right_hunk_size=31"
            data-left-range="108-126" data-right-range="112-130">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -127,7 +131,31 @@ public synchronized void setDisplayModel(DisplayModel displayModel) {</td>
  </tr>

    

<tr>
    <td id="diff-8eb1af077962acbc82aef148b53c6bd1L127" data-line-number="127"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R131" data-line-number="131"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-8eb1af077962acbc82aef148b53c6bd1L128" data-line-number="128"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R132" data-line-number="132"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-8eb1af077962acbc82aef148b53c6bd1L129" data-line-number="129"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R133" data-line-number="133"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">protected</span> <span class="pl-k">abstract</span> <span class="pl-smi">T</span> <span class="pl-en">createJob</span>(<span class="pl-smi">Tile</span> <span class="pl-v">tile</span>);</span>

  </td>
</tr>


    

<tr>
    <td id="diff-8eb1af077962acbc82aef148b53c6bd1L130" data-line-number="130"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-	<span class="pl-k">protected</span> <span class="pl-k">void</span> <span class="pl-en">retrieveLabelsOnly</span>(<span class="pl-smi">T</span> <span class="pl-v">job</span>) {}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R134" data-line-number="134"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R135" data-line-number="135"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R136" data-line-number="136"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Whether the tile is stale and should be refreshed.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R137" data-line-number="137"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R138" data-line-number="138"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * This method is called from {@link #draw(BoundingBox, byte, Canvas, Point)} to determine whether the tile needs to</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R139" data-line-number="139"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * be refreshed. Subclasses must override this method and implement appropriate checks to determine when a tile is</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R140" data-line-number="140"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * stale.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R141" data-line-number="141"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R142" data-line-number="142"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Return {@code false} to use the cached copy without attempting to refresh it.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R143" data-line-number="143"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R144" data-line-number="144"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Return {@code true} to cause the layer to attempt to obtain a fresh copy of the tile. The layer will first</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R145" data-line-number="145"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * display the tile referenced by {@code bitmap} and attempt to obtain a fresh copy in the background. When a fresh</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R146" data-line-number="146"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * copy becomes available, the layer will replace is and update the cache. If a fresh copy cannot be obtained (e.g.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R147" data-line-number="147"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * because the tile is obtained from an online source which cannot be reached), the stale tile will continue to be</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R148" data-line-number="148"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * used until another {@code #draw(BoundingBox, byte, Canvas, Point)} operation requests it again.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R149" data-line-number="149"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R150" data-line-number="150"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param tile</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R151" data-line-number="151"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            A tile.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R152" data-line-number="152"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param bitmap</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R153" data-line-number="153"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            The bitmap for {@code tile} currently held in the layer&#39;s cache.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R154" data-line-number="154"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R155" data-line-number="155"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">protected</span> <span class="pl-k">abstract</span> <span class="pl-k">boolean</span> <span class="pl-en">isTileStale</span>(<span class="pl-smi">Tile</span> <span class="pl-v">tile</span>, <span class="pl-smi">TileBitmap</span> <span class="pl-v">bitmap</span>);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R156" data-line-number="156"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R157" data-line-number="157"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">protected</span> <span class="pl-k">void</span> <span class="pl-en">retrieveLabelsOnly</span>(<span class="pl-smi">T</span> <span class="pl-v">job</span>) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R158" data-line-number="158"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-8eb1af077962acbc82aef148b53c6bd1L131" data-line-number="131"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R159" data-line-number="159"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-8eb1af077962acbc82aef148b53c6bd1L132" data-line-number="132"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R160" data-line-number="160"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">private</span> <span class="pl-k">void</span> <span class="pl-en">drawParentTileBitmap</span>(<span class="pl-smi">Canvas</span> <span class="pl-v">canvas</span>, <span class="pl-smi">Point</span> <span class="pl-v">point</span>, <span class="pl-smi">Tile</span> <span class="pl-v">tile</span>) {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-8eb1af077962acbc82aef148b53c6bd1L133" data-line-number="133"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8eb1af077962acbc82aef148b53c6bd1R161" data-line-number="161"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-smi">Tile</span> cachedParentTile <span class="pl-k">=</span> getCachedParentTile(tile, <span class="pl-c1">4</span>);</span>

  </td>
</tr>


  <tr class="js-expandable-line">
   <td class="blob-num blob-num-expandable" colspan="2">
     <a href="#diff-8eb1af077962acbc82aef148b53c6bd1"
          class="diff-expander js-expand" title="Expand" aria-label="Expand"
          data-url="/mapsforge/mapsforge/blob_excerpt/deebd562e3111277379035dff6c1640b134729f7?diff=unified&amp;mode=100644&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2FTileLayer.java&amp;prev_line_num_left=133&amp;prev_line_num_right=161"
          data-left-range="134-203"
          data-right-range="162-203">
       <span class="octicon octicon-unfold"></span>
     </a>
   </td>
   <td class="blob-code blob-code-expandable"></td>
  </tr>

              </table>
            </div>
      </div>

      <a name="diff-187ae3feaa74b08b44371bbc1c7288bb"></a>
      <div id="diff-8"
           class="file js-details-container
                   
                   
                   
                   
                   show-inline-notes
                 ">
        <div class="file-header" data-path="mapsforge-map/src/main/java/org/mapsforge/map/layer/cache/FileSystemTileCache.java">
          <div class="file-actions">
              <span class="show-file-notes">
                <label>
                  <input type="checkbox" checked="checked" class="js-toggle-file-notes">
                  Show notes
                </label>
              </span>

                <a href="/mvglasow/mapsforge/blob/8ca5512f3901939b98380b444ff1ec978fa2e742/mapsforge-map/src/main/java/org/mapsforge/map/layer/cache/FileSystemTileCache.java" class="btn btn-sm tooltipped tooltipped-n" rel="nofollow" aria-label="View the whole file at version 8ca5512 ">View</a>


          </div>
          <div class="file-info">
              <span class="diffstat tooltipped tooltipped-e" aria-label="227 additions &amp; 50 deletions">277 <span class="diffstat-bar"><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span>&#xf053;</span></span>

            <span class="js-selectable-text" title="mapsforge-map/src/main/java/org/mapsforge/map/layer/cache/FileSystemTileCache.java">
              mapsforge-map/src/main/java/org/mapsforge/map/layer/cache/FileSystemTileCache.java
            </span>
            
          </div>
        </div>

            <div class="data highlight blob-wrapper">
              <table class="diff-table tab-size  " data-tab-size="8">
                
      <tr class="js-expandable-line" data-position="0">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-187ae3feaa74b08b44371bbc1c7288bb"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/375ccbae1ddbffff280106e135b469fb95a3a777?diff=unified&amp;left_hunk_size=59&amp;mode=100644&amp;next_line_num_left=72&amp;next_line_num_right=72&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fcache%2FFileSystemTileCache.java&amp;prev_line_num_left=&amp;prev_line_num_right=&amp;right_hunk_size=107"
            data-left-range="1-71" data-right-range="1-71">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -72,59 +72,107 @@ public int hashCode() {</td>
  </tr>

    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL72" data-line-number="72"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR72" data-line-number="72"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> }</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL73" data-line-number="73"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR73" data-line-number="73"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL74" data-line-number="74"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR74" data-line-number="74"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL75" data-line-number="75"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c"> * A thread-safe cache for image files with a fixed size and LRU policy. The cache writes</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL76" data-line-number="76"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c"> * the data on a separate thread, i.e. when the call to put a job/tile into the cache returns</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL77" data-line-number="77"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c"> * the data is not actually written to disk.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR75" data-line-number="75"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c"> * A thread-safe cache for image files with a fixed size and LRU policy.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR76" data-line-number="76"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c"> * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR77" data-line-number="77"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c"> * A {@code FileSystemTileCache} caches tiles in a dedicated path in the file system, specified in the constructor. The</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR78" data-line-number="78"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c"> * cache writes the data on a separate thread, i.e. when the call to put a job/tile into the cache returns the data is</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR79" data-line-number="79"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c"> * not actually written to disk.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR80" data-line-number="80"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c"> * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR81" data-line-number="81"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c"> * When used for a {@link org.mapsforge.map.layer.renderer.TileRendererLayer}, persistent caching may result in clipped</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR82" data-line-number="82"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c"> * labels when tiles from different instances are used. To work around this, either display labels in a separate</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR83" data-line-number="83"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c"> * {@link org.mapsforge.map.layer.labels.LabelLayer} (experimental) or disable persistence as described in</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR84" data-line-number="84"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c"> * {@link #FileSystemTileCache(int, File, GraphicFactory, boolean, int, boolean)}.</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL78" data-line-number="78"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR85" data-line-number="85"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c"> */</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL79" data-line-number="79"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR86" data-line-number="86"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">FileSystemTileCache</span> <span class="pl-k">extends</span> <span class="pl-e">PausableThread</span> <span class="pl-k">implements</span> <span class="pl-e">TileCache</span> {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL80" data-line-number="80"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR87" data-line-number="87"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">static</span> <span class="pl-k">final</span> <span class="pl-smi">String</span> <span class="pl-c1">FILE_EXTENSION</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>.tile<span class="pl-pds">&quot;</span></span>;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL81" data-line-number="81"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR88" data-line-number="88"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">private</span> <span class="pl-k">static</span> <span class="pl-k">final</span> <span class="pl-smi">Logger</span> <span class="pl-c1">LOGGER</span> <span class="pl-k">=</span> <span class="pl-smi">Logger</span><span class="pl-k">.</span>getLogger(<span class="pl-smi">FileSystemTileCache</span><span class="pl-k">.</span>class<span class="pl-k">.</span>getName());</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL82" data-line-number="82"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR89" data-line-number="89"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR90" data-line-number="90"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR91" data-line-number="91"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Determines whether a File instance refers to a valid cache directory.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR92" data-line-number="92"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR93" data-line-number="93"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * This method checks that {@code file} refers to a directory to which the current process has read and write</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR94" data-line-number="94"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * access. If the directory does not exist, it will be created. For a simpler check that will not create directories</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR95" data-line-number="95"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * or verify write access, use {@link #isValidDirectory(File)} instead.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR96" data-line-number="96"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * </span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR97" data-line-number="97"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param file</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR98" data-line-number="98"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            The File instance to examine. This can be null, which will cause the method to return {@code false}.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR99" data-line-number="99"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL83" data-line-number="83"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR100" data-line-number="100"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">private</span> <span class="pl-k">static</span> <span class="pl-k">boolean</span> <span class="pl-en">isValidCacheDirectory</span>(<span class="pl-smi">File</span> <span class="pl-v">file</span>) {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL84" data-line-number="84"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-		<span class="pl-k">if</span> ((<span class="pl-k">!</span>file<span class="pl-k">.</span>exists() <span class="pl-k">&amp;&amp;</span> <span class="pl-k">!</span>file<span class="pl-k">.</span>mkdirs()) <span class="pl-k">||</span> <span class="pl-k">!</span>file<span class="pl-k">.</span>isDirectory() <span class="pl-k">||</span> <span class="pl-k">!</span>file<span class="pl-k">.</span>canRead() <span class="pl-k">||</span> <span class="pl-k">!</span>file<span class="pl-k">.</span>canWrite()) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR101" data-line-number="101"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">if</span> ((file <span class="pl-k">==</span> <span class="pl-c1">null</span>) <span class="pl-k">||</span> (<span class="pl-k">!</span>file<span class="pl-k">.</span>exists() <span class="pl-k">&amp;&amp;</span> <span class="pl-k">!</span>file<span class="pl-k">.</span>mkdirs()) <span class="pl-k">||</span> <span class="pl-k">!</span>file<span class="pl-k">.</span>isDirectory() <span class="pl-k">||</span> <span class="pl-k">!</span>file<span class="pl-k">.</span>canRead()</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR102" data-line-number="102"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+				<span class="pl-k">||</span> <span class="pl-k">!</span>file<span class="pl-k">.</span>canWrite()) {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL85" data-line-number="85"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR103" data-line-number="103"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			<span class="pl-k">return</span> <span class="pl-c1">false</span>;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL86" data-line-number="86"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR104" data-line-number="104"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL87" data-line-number="87"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR105" data-line-number="105"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-k">return</span> <span class="pl-c1">true</span>;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL88" data-line-number="88"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR106" data-line-number="106"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL89" data-line-number="89"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR107" data-line-number="107"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL90" data-line-number="90"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-    <span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL91" data-line-number="91"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">     * Recursively deletes directory and all files.</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL92" data-line-number="92"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">     * See http://stackoverflow.com/questions/3775694/deleting-folder-from-java/3775723#3775723</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL93" data-line-number="93"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">     *</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL94" data-line-number="94"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">     * @param dir the directory to delete with all its content</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL95" data-line-number="95"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">     * @return true if directory and all content has been deleted, false if not</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL96" data-line-number="96"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">     */</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL97" data-line-number="97"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL98" data-line-number="98"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-    <span class="pl-k">private</span> <span class="pl-k">static</span> <span class="pl-k">boolean</span> <span class="pl-en">deleteDirectory</span>(<span class="pl-smi">File</span> <span class="pl-v">dir</span>) {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL99" data-line-number="99"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-        <span class="pl-k">if</span> (dir<span class="pl-k">.</span>isDirectory()) {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL100" data-line-number="100"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-            <span class="pl-k">String</span>[] children <span class="pl-k">=</span> dir<span class="pl-k">.</span>list();</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL101" data-line-number="101"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-            <span class="pl-k">if</span> (children <span class="pl-k">!=</span> <span class="pl-c1">null</span>) {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL102" data-line-number="102"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-            	<span class="pl-k">for</span> (<span class="pl-k">int</span> i <span class="pl-k">=</span> <span class="pl-c1">0</span>; i <span class="pl-k">&lt;</span> children<span class="pl-k">.</span>length; i<span class="pl-k">++</span>) {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL103" data-line-number="103"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-            		<span class="pl-k">boolean</span> success <span class="pl-k">=</span> deleteDirectory(<span class="pl-k">new</span> <span class="pl-smi">File</span>(dir, children[i]));</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL104" data-line-number="104"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-            		<span class="pl-k">if</span> (<span class="pl-k">!</span>success) {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL105" data-line-number="105"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-            			<span class="pl-k">return</span> <span class="pl-c1">false</span>;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL106" data-line-number="106"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-            		}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL107" data-line-number="107"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-            	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL108" data-line-number="108"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-            }</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL109" data-line-number="109"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-        }</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL110" data-line-number="110"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-        <span class="pl-c">// The directory is now empty so delete it</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL111" data-line-number="111"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-        <span class="pl-k">return</span> dir<span class="pl-k">.</span>delete();</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL112" data-line-number="112"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-    }</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR108" data-line-number="108"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR109" data-line-number="109"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Determines whether a File instance refers to a valid directory from which tiles can be read.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR110" data-line-number="110"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR111" data-line-number="111"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * This method checks that {@code file} refers to an existing directory to which the current process has read</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR112" data-line-number="112"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * access. It does not create directories and not verify that the directory is writable. If you need this behavior,</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR113" data-line-number="113"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * use {@link #isValidCacheDirectory(File)} instead.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR114" data-line-number="114"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * </span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR115" data-line-number="115"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param file</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR116" data-line-number="116"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            The File instance to examine. This can be null, which will cause the method to return {@code false}.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR117" data-line-number="117"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR118" data-line-number="118"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">private</span> <span class="pl-k">static</span> <span class="pl-k">boolean</span> <span class="pl-en">isValidDirectory</span>(<span class="pl-smi">File</span> <span class="pl-v">file</span>) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR119" data-line-number="119"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">return</span> file <span class="pl-k">!=</span> <span class="pl-c1">null</span> <span class="pl-k">&amp;&amp;</span> file<span class="pl-k">.</span>isDirectory() <span class="pl-k">&amp;&amp;</span> file<span class="pl-k">.</span>canRead();</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR120" data-line-number="120"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR121" data-line-number="121"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR122" data-line-number="122"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR123" data-line-number="123"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Determines whether a File instance refers to a valid file which can be read.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR124" data-line-number="124"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR125" data-line-number="125"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * This method checks that {@code file} refers to an existing file to which the current process has read access. It</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR126" data-line-number="126"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * does not create directories and not verify that the directory is writable. If you need this behavior, use</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR127" data-line-number="127"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * {@link #isValidCacheDirectory(File)} instead.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR128" data-line-number="128"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * </span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR129" data-line-number="129"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param file</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR130" data-line-number="130"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            The File instance to examine. This can be null, which will cause the method to return {@code false}.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR131" data-line-number="131"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR132" data-line-number="132"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">private</span> <span class="pl-k">static</span> <span class="pl-k">boolean</span> <span class="pl-en">isValidFile</span>(<span class="pl-smi">File</span> <span class="pl-v">file</span>) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR133" data-line-number="133"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">return</span> file <span class="pl-k">!=</span> <span class="pl-c1">null</span> <span class="pl-k">&amp;&amp;</span> file<span class="pl-k">.</span>isFile() <span class="pl-k">&amp;&amp;</span> file<span class="pl-k">.</span>canRead();</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR134" data-line-number="134"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR135" data-line-number="135"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR136" data-line-number="136"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR137" data-line-number="137"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Recursively deletes directory and all files. See</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR138" data-line-number="138"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * http://stackoverflow.com/questions/3775694/deleting-folder-from-java/3775723#3775723</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR139" data-line-number="139"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * </span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR140" data-line-number="140"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param dir</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR141" data-line-number="141"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            the directory to delete with all its content</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR142" data-line-number="142"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @return true if directory and all content has been deleted, false if not</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR143" data-line-number="143"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR144" data-line-number="144"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR145" data-line-number="145"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">private</span> <span class="pl-k">static</span> <span class="pl-k">boolean</span> <span class="pl-en">deleteDirectory</span>(<span class="pl-smi">File</span> <span class="pl-v">dir</span>) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR146" data-line-number="146"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">if</span> (dir<span class="pl-k">.</span>isDirectory()) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR147" data-line-number="147"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-k">String</span>[] children <span class="pl-k">=</span> dir<span class="pl-k">.</span>list();</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR148" data-line-number="148"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-k">if</span> (children <span class="pl-k">!=</span> <span class="pl-c1">null</span>) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR149" data-line-number="149"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+				<span class="pl-k">for</span> (<span class="pl-k">int</span> i <span class="pl-k">=</span> <span class="pl-c1">0</span>; i <span class="pl-k">&lt;</span> children<span class="pl-k">.</span>length; i<span class="pl-k">++</span>) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR150" data-line-number="150"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+					<span class="pl-k">boolean</span> success <span class="pl-k">=</span> deleteDirectory(<span class="pl-k">new</span> <span class="pl-smi">File</span>(dir, children[i]));</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR151" data-line-number="151"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+					<span class="pl-k">if</span> (<span class="pl-k">!</span>success) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR152" data-line-number="152"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+						<span class="pl-k">return</span> <span class="pl-c1">false</span>;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR153" data-line-number="153"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+					}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR154" data-line-number="154"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+				}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR155" data-line-number="155"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR156" data-line-number="156"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR157" data-line-number="157"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-c">// The directory is now empty so delete it</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR158" data-line-number="158"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">return</span> dir<span class="pl-k">.</span>delete();</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR159" data-line-number="159"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL113" data-line-number="113"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR160" data-line-number="160"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL114" data-line-number="114"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR161" data-line-number="161"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">private</span> <span class="pl-k">final</span> <span class="pl-smi">File</span> cacheDirectory;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL115" data-line-number="115"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR162" data-line-number="162"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">private</span> <span class="pl-k">final</span> <span class="pl-smi">GraphicFactory</span> graphicFactory;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL116" data-line-number="116"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR163" data-line-number="163"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">private</span> <span class="pl-k">final</span> <span class="pl-smi">AtomicInteger</span> jobs;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL117" data-line-number="117"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR164" data-line-number="164"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">private</span> <span class="pl-k">FileWorkingSetCache&lt;<span class="pl-smi">String</span>&gt;</span> lruCache;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL118" data-line-number="118"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR165" data-line-number="165"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">private</span> <span class="pl-k">final</span> <span class="pl-smi">ReentrantReadWriteLock</span> lock;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR166" data-line-number="166"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">private</span> <span class="pl-k">boolean</span> persistent;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL119" data-line-number="119"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR167" data-line-number="167"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL120" data-line-number="120"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR168" data-line-number="168"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-c">// if threaded is true, the bitmap writing is executed on a separate thread,</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL121" data-line-number="121"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR169" data-line-number="169"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-c">// and jobs are stored in the jobStack. The false option remains for testing.</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL122" data-line-number="122"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR170" data-line-number="170"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">private</span> <span class="pl-k">final</span> <span class="pl-k">boolean</span> threaded;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL123" data-line-number="123"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR171" data-line-number="171"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">private</span> <span class="pl-k">final</span> <span class="pl-k">LinkedBlockingQueue&lt;<span class="pl-smi">StorageJob</span>&gt;</span> storageJobs;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL124" data-line-number="124"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR172" data-line-number="172"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL125" data-line-number="125"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL126" data-line-number="126"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR173" data-line-number="173"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL127" data-line-number="127"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * Compatibility constructor that creates a threaded FSTC.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR174" data-line-number="174"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Compatibility constructor that creates a non-threaded, non-persistent FSTC.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR175" data-line-number="175"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * </span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL128" data-line-number="128"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR176" data-line-number="176"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 * @param capacity</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL129" data-line-number="129"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR177" data-line-number="177"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 *            the maximum number of entries in this cache.</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL130" data-line-number="130"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR178" data-line-number="178"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 * @param cacheDirectory</span></span>

  </td>
</tr>


      <tr class="js-expandable-line" data-position="137">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-187ae3feaa74b08b44371bbc1c7288bb"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/375ccbae1ddbffff280106e135b469fb95a3a777?diff=unified&amp;left_hunk_size=10&amp;mode=100644&amp;next_line_num_left=135&amp;next_line_num_right=183&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fcache%2FFileSystemTileCache.java&amp;prev_line_num_left=130&amp;prev_line_num_right=178&amp;right_hunk_size=12"
            data-left-range="131-134" data-right-range="179-182">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -135,10 +183,12 @@ private static boolean deleteDirectory(File dir) {</td>
  </tr>

    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL135" data-line-number="135"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR183" data-line-number="183"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 *             if the capacity is negative.</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL136" data-line-number="136"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR184" data-line-number="184"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL137" data-line-number="137"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR185" data-line-number="185"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">public</span> <span class="pl-en">FileSystemTileCache</span>(<span class="pl-k">int</span> <span class="pl-v">capacity</span>, <span class="pl-smi">File</span> <span class="pl-v">cacheDirectory</span>, <span class="pl-smi">GraphicFactory</span> <span class="pl-v">graphicFactory</span>) {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL138" data-line-number="138"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-		<span class="pl-v">this</span>(capacity, cacheDirectory, graphicFactory, <span class="pl-c1">false</span>, <span class="pl-c1">0</span>);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR186" data-line-number="186"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-v">this</span>(capacity, cacheDirectory, graphicFactory, <span class="pl-c1">false</span>, <span class="pl-c1">0</span><span class="x x-first">, </span><span class="pl-c1 x x-last">false</span>);</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL139" data-line-number="139"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR187" data-line-number="187"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL140" data-line-number="140"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR188" data-line-number="188"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL141" data-line-number="141"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR189" data-line-number="189"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR190" data-line-number="190"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Compatibility constructor that creates a non-persistent FSTC.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR191" data-line-number="191"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * </span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL142" data-line-number="142"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR192" data-line-number="192"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 * @param capacity</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL143" data-line-number="143"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR193" data-line-number="193"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 *            the maximum number of entries in this cache.</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL144" data-line-number="144"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR194" data-line-number="194"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 * @param cacheDirectory</span></span>

  </td>
</tr>


      <tr class="js-expandable-line" data-position="151">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-187ae3feaa74b08b44371bbc1c7288bb"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/375ccbae1ddbffff280106e135b469fb95a3a777?diff=unified&amp;left_hunk_size=11&amp;mode=100644&amp;next_line_num_left=147&amp;next_line_num_right=197&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fcache%2FFileSystemTileCache.java&amp;prev_line_num_left=144&amp;prev_line_num_right=194&amp;right_hunk_size=46"
            data-left-range="145-146" data-right-range="195-196">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -147,11 +197,46 @@ public FileSystemTileCache(int capacity, File cacheDirectory, GraphicFactory gra</td>
  </tr>

    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL147" data-line-number="147"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR197" data-line-number="197"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 *            the graphicFactory implementation to use.</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL148" data-line-number="148"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR198" data-line-number="198"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 * @param threaded</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL149" data-line-number="149"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR199" data-line-number="199"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 *            if cache will use background thread to store data (more responsive).</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR200" data-line-number="200"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param queueSize</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR201" data-line-number="201"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            maximum length of queue before the put operation blocks</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL150" data-line-number="150"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR202" data-line-number="202"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 * @throws IllegalArgumentException</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL151" data-line-number="151"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR203" data-line-number="203"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 *             if the capacity is negative.</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL152" data-line-number="152"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR204" data-line-number="204"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL153" data-line-number="153"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-	<span class="pl-k">public</span> <span class="pl-en">FileSystemTileCache</span>(<span class="pl-k">int</span> <span class="pl-v">capacity</span>, <span class="pl-smi">File</span> <span class="pl-v">cacheDirectory</span>, <span class="pl-smi">GraphicFactory</span> <span class="pl-v">graphicFactory</span>, <span class="pl-k">boolean</span> <span class="pl-v">threaded</span>, <span class="pl-k">int</span> <span class="pl-v">queueSize</span>) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR205" data-line-number="205"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">public</span> <span class="pl-en">FileSystemTileCache</span>(<span class="pl-k">int</span> <span class="pl-v">capacity</span>, <span class="pl-smi">File</span> <span class="pl-v">cacheDirectory</span>, <span class="pl-smi">GraphicFactory</span> <span class="pl-v">graphicFactory</span>, <span class="pl-k">boolean</span> <span class="pl-v">threaded</span>,</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR206" data-line-number="206"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-k">int</span> <span class="pl-v">queueSize</span>) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR207" data-line-number="207"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-v">this</span>(capacity, cacheDirectory, graphicFactory, threaded, queueSize, <span class="pl-c1">false</span>);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR208" data-line-number="208"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR209" data-line-number="209"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR210" data-line-number="210"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR211" data-line-number="211"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Creates a new FileSystemTileCache.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR212" data-line-number="212"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR213" data-line-number="213"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Use the {@code persistent} argument to specify whether cache contents should be kept across instances. A</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR214" data-line-number="214"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * persistent cache will serve any tiles it finds in {@code cacheDirectory}. Calling {@link #destroy()} on a</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR215" data-line-number="215"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * persistent cache will not delete the cache directory. Conversely, a non-persistent cache will serve only tiles</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR216" data-line-number="216"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * added to it via the {@link #put(Job, TileBitmap)} method, and calling {@link #destroy()} on a non-persistent</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR217" data-line-number="217"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * cache will delete {@code cacheDirectory}.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR218" data-line-number="218"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * </span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR219" data-line-number="219"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param capacity</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR220" data-line-number="220"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            the maximum number of entries in this cache.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR221" data-line-number="221"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param cacheDirectory</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR222" data-line-number="222"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            the directory where cached tiles will be stored.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR223" data-line-number="223"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param graphicFactory</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR224" data-line-number="224"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            the graphicFactory implementation to use.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR225" data-line-number="225"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param threaded</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR226" data-line-number="226"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            if cache will use background thread to store data (more responsive).</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR227" data-line-number="227"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param queueSize</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR228" data-line-number="228"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            maximum length of queue before the put operation blocks</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR229" data-line-number="229"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param persistent</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR230" data-line-number="230"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            if cache data will be kept between instances</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR231" data-line-number="231"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @throws IllegalArgumentException</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR232" data-line-number="232"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *             if the capacity is negative.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR233" data-line-number="233"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @throws IllegalArgumentException</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR234" data-line-number="234"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *             if the capacity is negative.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR235" data-line-number="235"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR236" data-line-number="236"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">public</span> <span class="pl-en">FileSystemTileCache</span>(<span class="pl-k">int</span> <span class="pl-v">capacity</span>, <span class="pl-smi">File</span> <span class="pl-v">cacheDirectory</span>, <span class="pl-smi">GraphicFactory</span> <span class="pl-v">graphicFactory</span>, <span class="pl-k">boolean</span> <span class="pl-v">threaded</span>,</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR237" data-line-number="237"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-k">int</span> <span class="pl-v">queueSize</span>, <span class="pl-k">boolean</span> <span class="pl-v">persistent</span>) {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL154" data-line-number="154"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR238" data-line-number="238"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-v">this</span><span class="pl-k">.</span>jobs <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">AtomicInteger</span>(<span class="pl-c1">0</span>);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR239" data-line-number="239"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-v">this</span><span class="pl-k">.</span>persistent <span class="pl-k">=</span> persistent;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL155" data-line-number="155"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR240" data-line-number="240"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-v">this</span><span class="pl-k">.</span>threaded <span class="pl-k">=</span> threaded;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL156" data-line-number="156"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR241" data-line-number="241"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-k">if</span> (threaded) {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL157" data-line-number="157"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR242" data-line-number="242"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			<span class="pl-v">this</span><span class="pl-k">.</span>storageJobs <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-k">LinkedBlockingQueue&lt;&gt;</span>(queueSize);</span>

  </td>
</tr>


      <tr class="js-expandable-line" data-position="199">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-187ae3feaa74b08b44371bbc1c7288bb"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/375ccbae1ddbffff280106e135b469fb95a3a777?diff=unified&amp;left_hunk_size=13&amp;mode=100644&amp;next_line_num_left=159&amp;next_line_num_right=244&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fcache%2FFileSystemTileCache.java&amp;prev_line_num_left=157&amp;prev_line_num_right=242&amp;right_hunk_size=15"
            data-left-range="158-158" data-right-range="243-243">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -159,13 +244,15 @@ public FileSystemTileCache(int capacity, File cacheDirectory, GraphicFactory gra</td>
  </tr>

    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL159" data-line-number="159"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR244" data-line-number="244"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			<span class="pl-v">this</span><span class="pl-k">.</span>storageJobs <span class="pl-k">=</span> <span class="pl-c1">null</span>;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL160" data-line-number="160"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR245" data-line-number="245"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL161" data-line-number="161"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR246" data-line-number="246"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-v">this</span><span class="pl-k">.</span>lruCache <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-k">FileWorkingSetCache&lt;&gt;</span>(capacity);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR247" data-line-number="247"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-v">this</span><span class="pl-k">.</span>lock <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">ReentrantReadWriteLock</span>();</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL162" data-line-number="162"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR248" data-line-number="248"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-k">if</span> (isValidCacheDirectory(cacheDirectory)) {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL163" data-line-number="163"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR249" data-line-number="249"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			<span class="pl-v">this</span><span class="pl-k">.</span>cacheDirectory <span class="pl-k">=</span> cacheDirectory;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR250" data-line-number="250"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-k">if</span> (<span class="pl-v">this</span><span class="pl-k">.</span>persistent)</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR251" data-line-number="251"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+				readCacheDirectory();</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL164" data-line-number="164"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR252" data-line-number="252"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		} <span class="pl-k">else</span> {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL165" data-line-number="165"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR253" data-line-number="253"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			<span class="pl-v">this</span><span class="pl-k">.</span>cacheDirectory <span class="pl-k">=</span> <span class="pl-c1">null</span>;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL166" data-line-number="166"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR254" data-line-number="254"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL167" data-line-number="167"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR255" data-line-number="255"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-v">this</span><span class="pl-k">.</span>graphicFactory <span class="pl-k">=</span> graphicFactory;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL168" data-line-number="168"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-		<span class="pl-v">this</span><span class="pl-k">.</span>lock <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">ReentrantReadWriteLock</span>();</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL169" data-line-number="169"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR256" data-line-number="256"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-k">if</span> (<span class="pl-v">this</span><span class="pl-k">.</span>threaded) {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL170" data-line-number="170"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR257" data-line-number="257"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			<span class="pl-v">this</span><span class="pl-k">.</span>start();</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL171" data-line-number="171"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR258" data-line-number="258"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		}</span>

  </td>
</tr>


      <tr class="js-expandable-line" data-position="216">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-187ae3feaa74b08b44371bbc1c7288bb"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/375ccbae1ddbffff280106e135b469fb95a3a777?diff=unified&amp;left_hunk_size=25&amp;mode=100644&amp;next_line_num_left=177&amp;next_line_num_right=264&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fcache%2FFileSystemTileCache.java&amp;prev_line_num_left=171&amp;prev_line_num_right=258&amp;right_hunk_size=29"
            data-left-range="172-176" data-right-range="259-263">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -177,25 +264,29 @@ public boolean containsKey(Job key) {</td>
  </tr>

    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL177" data-line-number="177"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR264" data-line-number="264"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			lock<span class="pl-k">.</span>readLock()<span class="pl-k">.</span>lock();</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL178" data-line-number="178"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR265" data-line-number="265"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			<span class="pl-c">// if we are using a threaded cache we return true if the tile is still in the</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL179" data-line-number="179"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR266" data-line-number="266"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			<span class="pl-c">// queue to reduce double rendering</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL180" data-line-number="180"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-			<span class="pl-k">return</span> <span class="pl-v">this</span><span class="pl-k">.</span>lruCache<span class="pl-k">.</span>containsKey(key<span class="pl-k">.</span>getKey()) <span class="pl-k">||</span> (threaded <span class="pl-k">&amp;&amp;</span> storageJobs<span class="pl-k">.</span>contains(key));</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR267" data-line-number="267"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-k">return</span> <span class="x x-first x-last">(</span><span class="pl-v">this</span><span class="pl-k">.</span>lruCache<span class="pl-k">.</span>containsKey(key<span class="pl-k">.</span>getKey()) <span class="pl-k">||</span> (threaded <span class="pl-k">&amp;&amp;</span> storageJobs<span class="pl-k">.</span>contains(key<span class="x x-first x-last">)</span>));</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL181" data-line-number="181"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR268" data-line-number="268"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		} <span class="pl-k">finally</span> {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL182" data-line-number="182"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR269" data-line-number="269"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			lock<span class="pl-k">.</span>readLock()<span class="pl-k">.</span>unlock();</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL183" data-line-number="183"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR270" data-line-number="270"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL184" data-line-number="184"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR271" data-line-number="271"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL185" data-line-number="185"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR272" data-line-number="272"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR273" data-line-number="273"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR274" data-line-number="274"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Destroys this cache.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR275" data-line-number="275"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR276" data-line-number="276"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Applications are expected to call this method when they no longer require the cache.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR277" data-line-number="277"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR278" data-line-number="278"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * If the cache is not persistent, calling this method is equivalent to calling {@link #purge()}. If the cache is</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR279" data-line-number="279"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * persistent, it does nothing.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR280" data-line-number="280"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR281" data-line-number="281"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Beginning with 0.6.0, accessing the cache after calling {@code destroy()} is discouraged. In order to empty the</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR282" data-line-number="282"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * cache and force all tiles to be re-rendered or re-requested from the source, use {@link #purge()} instead.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR283" data-line-number="283"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Earlier versions lacked the {@link #purge()} method and used {@code destroy()} instead, but this practice is now</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR284" data-line-number="284"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * discouraged and may lead to unexpected results when used with features introduced in 0.6.0 or later.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR285" data-line-number="285"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL186" data-line-number="186"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR286" data-line-number="286"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">@Override</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL187" data-line-number="187"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR287" data-line-number="287"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">destroy</span>() {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL188" data-line-number="188"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-		<span class="pl-k">try</span> {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL189" data-line-number="189"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-			lock<span class="pl-k">.</span>writeLock()<span class="pl-k">.</span>lock();</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL190" data-line-number="190"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-			<span class="pl-v">this</span><span class="pl-k">.</span>lruCache<span class="pl-k">.</span>clear();</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL191" data-line-number="191"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-			<span class="pl-k">if</span> (<span class="pl-v">this</span><span class="pl-k">.</span>threaded) {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL192" data-line-number="192"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-				<span class="pl-v">this</span><span class="pl-k">.</span>interrupt();</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL193" data-line-number="193"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-			}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL194" data-line-number="194"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-		} <span class="pl-k">finally</span> {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL195" data-line-number="195"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-			lock<span class="pl-k">.</span>writeLock()<span class="pl-k">.</span>unlock();</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL196" data-line-number="196"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-		}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL197" data-line-number="197"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL198" data-line-number="198"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-		deleteDirectory(<span class="pl-v">this</span><span class="pl-k">.</span>cacheDirectory);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR288" data-line-number="288"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">if</span> (<span class="pl-k">!</span><span class="pl-v">this</span><span class="pl-k">.</span>persistent)</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR289" data-line-number="289"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			purge();</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL199" data-line-number="199"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR290" data-line-number="290"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL200" data-line-number="200"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR291" data-line-number="291"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL201" data-line-number="201"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR292" data-line-number="292"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">@Override</span></span>

  </td>
</tr>


      <tr class="js-expandable-line" data-position="258">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-187ae3feaa74b08b44371bbc1c7288bb"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/375ccbae1ddbffff280106e135b469fb95a3a777?diff=unified&amp;left_hunk_size=13&amp;mode=100644&amp;next_line_num_left=209&amp;next_line_num_right=300&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fcache%2FFileSystemTileCache.java&amp;prev_line_num_left=201&amp;prev_line_num_right=292&amp;right_hunk_size=16"
            data-left-range="202-208" data-right-range="293-299">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -209,13 +300,16 @@ public TileBitmap get(Job key) {</td>
  </tr>

    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL209" data-line-number="209"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR300" data-line-number="300"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			lock<span class="pl-k">.</span>readLock()<span class="pl-k">.</span>unlock();</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL210" data-line-number="210"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR301" data-line-number="301"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL211" data-line-number="211"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR302" data-line-number="302"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-k">if</span> (file <span class="pl-k">==</span> <span class="pl-c1">null</span>) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR303" data-line-number="303"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-c1">LOGGER</span><span class="pl-k">.</span>fine(<span class="pl-s"><span class="pl-pds">&quot;</span>No cache entry for tile <span class="pl-pds">&quot;</span></span> <span class="pl-k">+</span> key<span class="pl-k">.</span>getKey());</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL212" data-line-number="212"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR304" data-line-number="304"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			<span class="pl-k">return</span> <span class="pl-c1">null</span>;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL213" data-line-number="213"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR305" data-line-number="305"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL214" data-line-number="214"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR306" data-line-number="306"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL215" data-line-number="215"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR307" data-line-number="307"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-smi">InputStream</span> inputStream <span class="pl-k">=</span> <span class="pl-c1">null</span>;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL216" data-line-number="216"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR308" data-line-number="308"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-k">try</span> {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL217" data-line-number="217"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR309" data-line-number="309"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			inputStream <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">FileInputStream</span>(file);</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL218" data-line-number="218"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-			<span class="pl-k">return</span> <span class="pl-v">this</span><span class="pl-k">.</span>graphicFactory<span class="pl-k">.</span>createTileBitmap(inputStream, key<span class="pl-k">.</span>tile<span class="pl-k">.</span>tileSize, key<span class="pl-k">.</span>hasAlpha);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR310" data-line-number="310"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-smi">TileBitmap</span> result <span class="pl-k">=</span> <span class="pl-v">this</span><span class="pl-k">.</span>graphicFactory<span class="pl-k">.</span>createTileBitmap(inputStream, key<span class="pl-k">.</span>tile<span class="pl-k">.</span>tileSize, key<span class="pl-k">.</span>hasAlpha);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR311" data-line-number="311"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			result<span class="pl-k">.</span>setTimestamp(file<span class="pl-k">.</span>lastModified());</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR312" data-line-number="312"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-k">return</span> result;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL219" data-line-number="219"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR313" data-line-number="313"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		} <span class="pl-k">catch</span> (<span class="pl-smi">CorruptedInputStreamException</span> e) {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL220" data-line-number="220"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR314" data-line-number="314"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			<span class="pl-c">// this can happen, at least on Android, when the input stream</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL221" data-line-number="221"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR315" data-line-number="315"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			<span class="pl-c">// is somehow corrupted, returning null ensures it will be loaded</span></span>

  </td>
</tr>


      <tr class="js-expandable-line" data-position="276">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-187ae3feaa74b08b44371bbc1c7288bb"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/375ccbae1ddbffff280106e135b469fb95a3a777?diff=unified&amp;left_hunk_size=7&amp;mode=100644&amp;next_line_num_left=253&amp;next_line_num_right=347&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fcache%2FFileSystemTileCache.java&amp;prev_line_num_left=221&amp;prev_line_num_right=315&amp;right_hunk_size=42"
            data-left-range="222-252" data-right-range="316-346">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -253,7 +347,42 @@ public TileBitmap getImmediately(Job key) {</td>
  </tr>

    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL253" data-line-number="253"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR347" data-line-number="347"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL254" data-line-number="254"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR348" data-line-number="348"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL255" data-line-number="255"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR349" data-line-number="349"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR350" data-line-number="350"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Whether the cache is persistent.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR351" data-line-number="351"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR352" data-line-number="352"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">public</span> <span class="pl-k">boolean</span> <span class="pl-en">isPersistent</span>() {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR353" data-line-number="353"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">return</span> <span class="pl-v">this</span><span class="pl-k">.</span>persistent;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR354" data-line-number="354"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR355" data-line-number="355"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR356" data-line-number="356"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR357" data-line-number="357"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Purges this cache.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR358" data-line-number="358"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR359" data-line-number="359"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Calls to {@link #get(Job)} issued after purging will not return any tiles added before the purge operation.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR360" data-line-number="360"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Purging will also delete the cache directory on disk, freeing up disk space.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR361" data-line-number="361"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR362" data-line-number="362"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Applications should purge the tile cache when map model parameters change, such as the render style for locally</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR363" data-line-number="363"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * rendered tiles, or the source for downloaded tiles. Applications which frequently alternate between a limited</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR364" data-line-number="364"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * number of map model configurations may want to consider using a different cache for each.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR365" data-line-number="365"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * </span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR366" data-line-number="366"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @since 0.6.0</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR367" data-line-number="367"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR368" data-line-number="368"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">@Override</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR369" data-line-number="369"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">purge</span>() {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR370" data-line-number="370"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">try</span> {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR371" data-line-number="371"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-v">this</span><span class="pl-k">.</span>lock<span class="pl-k">.</span>writeLock()<span class="pl-k">.</span>lock();</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR372" data-line-number="372"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-v">this</span><span class="pl-k">.</span>lruCache<span class="pl-k">.</span>clear();</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR373" data-line-number="373"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-k">if</span> (<span class="pl-v">this</span><span class="pl-k">.</span>threaded) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR374" data-line-number="374"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+				<span class="pl-v">this</span><span class="pl-k">.</span>interrupt();</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR375" data-line-number="375"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR376" data-line-number="376"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		} <span class="pl-k">finally</span> {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR377" data-line-number="377"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-v">this</span><span class="pl-k">.</span>lock<span class="pl-k">.</span>writeLock()<span class="pl-k">.</span>unlock();</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR378" data-line-number="378"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR379" data-line-number="379"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR380" data-line-number="380"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		deleteDirectory(<span class="pl-v">this</span><span class="pl-k">.</span>cacheDirectory);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR381" data-line-number="381"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR382" data-line-number="382"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR383" data-line-number="383"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL256" data-line-number="256"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR384" data-line-number="384"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 * Gets the number of remaining tiles still in the queue to be written to disk.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR385" data-line-number="385"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * </span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL257" data-line-number="257"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR386" data-line-number="386"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 * @return number of jobs in queue, 0 if not threaded.</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL258" data-line-number="258"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR387" data-line-number="387"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL259" data-line-number="259"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR388" data-line-number="388"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">public</span> <span class="pl-k">int</span> <span class="pl-en">getQueueLength</span>() {</span>

  </td>
</tr>


      <tr class="js-expandable-line" data-position="319">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-187ae3feaa74b08b44371bbc1c7288bb"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/375ccbae1ddbffff280106e135b469fb95a3a777?diff=unified&amp;left_hunk_size=9&amp;mode=100644&amp;next_line_num_left=293&amp;next_line_num_right=422&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fcache%2FFileSystemTileCache.java&amp;prev_line_num_left=259&amp;prev_line_num_right=388&amp;right_hunk_size=54"
            data-left-range="260-292" data-right-range="389-421">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -293,9 +422,54 @@ private File getOutputFile(Job job) {</td>
  </tr>

    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL293" data-line-number="293"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR422" data-line-number="422"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-smi">String</span> file <span class="pl-k">=</span> <span class="pl-v">this</span><span class="pl-k">.</span>cacheDirectory <span class="pl-k">+</span> <span class="pl-smi">File</span><span class="pl-k">.</span>separator <span class="pl-k">+</span> job<span class="pl-k">.</span>getKey();</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL294" data-line-number="294"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR423" data-line-number="423"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-smi">String</span> dir <span class="pl-k">=</span> file<span class="pl-k">.</span>substring(<span class="pl-c1">0</span>, file<span class="pl-k">.</span>lastIndexOf(<span class="pl-smi">File</span><span class="pl-k">.</span>separatorChar));</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL295" data-line-number="295"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR424" data-line-number="424"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-k">if</span> (isValidCacheDirectory(<span class="pl-k">new</span> <span class="pl-smi">File</span>(dir))) {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL296" data-line-number="296"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-            <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-smi">File</span>(file <span class="pl-k">+</span> <span class="pl-c1">FILE_EXTENSION</span>);</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL297" data-line-number="297"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-        }</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL298" data-line-number="298"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-        <span class="pl-k">return</span> <span class="pl-c1">null</span>;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR425" data-line-number="425"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-smi">File</span>(file <span class="pl-k">+</span> <span class="pl-c1">FILE_EXTENSION</span>);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR426" data-line-number="426"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR427" data-line-number="427"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">return</span> <span class="pl-c1">null</span>;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR428" data-line-number="428"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR429" data-line-number="429"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR430" data-line-number="430"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR431" data-line-number="431"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Reads the cache directory and re-populates the cache with data saved by previous instances.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR432" data-line-number="432"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR433" data-line-number="433"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * This method assumes tile files to have a file extension of {@link #FILE_EXTENSION} and reside in a second-level</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR434" data-line-number="434"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * of subdir of the cache dir (as in the standard TMS directory layout of zoomlevel/x/y). The relative path to the</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR435" data-line-number="435"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * cached tile, after stripping the extension, is used as the lookup key.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR436" data-line-number="436"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR437" data-line-number="437"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">private</span> <span class="pl-k">void</span> <span class="pl-en">readCacheDirectory</span>() {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR438" data-line-number="438"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">String</span>[] l1Dirs <span class="pl-k">=</span> <span class="pl-v">this</span><span class="pl-k">.</span>cacheDirectory<span class="pl-k">.</span>list();</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR439" data-line-number="439"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">if</span> (l1Dirs <span class="pl-k">!=</span> <span class="pl-c1">null</span>)</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR440" data-line-number="440"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-k">for</span> (<span class="pl-k">int</span> i <span class="pl-k">=</span> <span class="pl-c1">0</span>; i <span class="pl-k">&lt;</span> l1Dirs<span class="pl-k">.</span>length; i<span class="pl-k">++</span>) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR441" data-line-number="441"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+				<span class="pl-smi">File</span> l1 <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">File</span>(<span class="pl-v">this</span><span class="pl-k">.</span>cacheDirectory, l1Dirs[i]);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR442" data-line-number="442"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+				<span class="pl-k">if</span> (isValidDirectory(l1)) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR443" data-line-number="443"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+					<span class="pl-k">String</span>[] l2Dirs <span class="pl-k">=</span> l1<span class="pl-k">.</span>list();</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR444" data-line-number="444"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+					<span class="pl-k">if</span> (l2Dirs <span class="pl-k">!=</span> <span class="pl-c1">null</span>)</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR445" data-line-number="445"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+						<span class="pl-k">for</span> (<span class="pl-k">int</span> j <span class="pl-k">=</span> <span class="pl-c1">0</span>; j <span class="pl-k">&lt;</span> l2Dirs<span class="pl-k">.</span>length; j<span class="pl-k">++</span>) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR446" data-line-number="446"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+							<span class="pl-smi">File</span> l2 <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">File</span>(l1, l2Dirs[j]);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR447" data-line-number="447"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+							<span class="pl-k">if</span> (isValidDirectory(l2)) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR448" data-line-number="448"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+								<span class="pl-k">String</span>[] l3Files <span class="pl-k">=</span> l2<span class="pl-k">.</span>list();</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR449" data-line-number="449"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+								<span class="pl-k">if</span> (l3Files <span class="pl-k">!=</span> <span class="pl-c1">null</span>)</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR450" data-line-number="450"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+									<span class="pl-k">for</span> (<span class="pl-k">int</span> k <span class="pl-k">=</span> <span class="pl-c1">0</span>; k <span class="pl-k">&lt;</span> l3Files<span class="pl-k">.</span>length; k<span class="pl-k">++</span>) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR451" data-line-number="451"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+										<span class="pl-smi">File</span> l3 <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">File</span>(l2, l3Files[k]);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR452" data-line-number="452"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+										<span class="pl-k">int</span> index <span class="pl-k">=</span> l3Files[k]<span class="pl-k">.</span>indexOf(<span class="pl-c1">FILE_EXTENSION</span><span class="pl-k">.</span>charAt(<span class="pl-c1">0</span>));</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR453" data-line-number="453"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+										<span class="pl-k">if</span> (isValidFile(l3) <span class="pl-k">&amp;&amp;</span> (index <span class="pl-k">&gt;=</span> <span class="pl-c1">0</span>)</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR454" data-line-number="454"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+												<span class="pl-k">&amp;&amp;</span> l3Files[k]<span class="pl-k">.</span>substring(index)<span class="pl-k">.</span>contentEquals(<span class="pl-c1">FILE_EXTENSION</span>)) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR455" data-line-number="455"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+											<span class="pl-smi">String</span> key <span class="pl-k">=</span> l1Dirs[i] <span class="pl-k">+</span> <span class="pl-smi">File</span><span class="pl-k">.</span>separator <span class="pl-k">+</span> l2Dirs[j] <span class="pl-k">+</span> <span class="pl-smi">File</span><span class="pl-k">.</span>separator</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR456" data-line-number="456"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+													<span class="pl-k">+</span> l3Files[k]<span class="pl-k">.</span>substring(<span class="pl-c1">0</span>, index);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR457" data-line-number="457"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+											<span class="pl-c1">LOGGER</span><span class="pl-k">.</span>fine(<span class="pl-s"><span class="pl-pds">&quot;</span>Adding previously cached file <span class="pl-pds">&quot;</span></span> <span class="pl-k">+</span> l3<span class="pl-k">.</span>getAbsolutePath()</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR458" data-line-number="458"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+													<span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">&quot;</span> as <span class="pl-pds">&quot;</span></span> <span class="pl-k">+</span> key);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR459" data-line-number="459"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+											<span class="pl-k">try</span> {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR460" data-line-number="460"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+												<span class="pl-v">this</span><span class="pl-k">.</span>lock<span class="pl-k">.</span>writeLock()<span class="pl-k">.</span>lock();</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR461" data-line-number="461"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+												<span class="pl-k">if</span> (<span class="pl-v">this</span><span class="pl-k">.</span>lruCache<span class="pl-k">.</span>put(key, l3) <span class="pl-k">!=</span> <span class="pl-c1">null</span>) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR462" data-line-number="462"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+													<span class="pl-c1">LOGGER</span><span class="pl-k">.</span>warning(<span class="pl-s"><span class="pl-pds">&quot;</span>overwriting cached entry: <span class="pl-pds">&quot;</span></span> <span class="pl-k">+</span> key);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR463" data-line-number="463"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+												}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR464" data-line-number="464"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+											} <span class="pl-k">finally</span> {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR465" data-line-number="465"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+												<span class="pl-v">this</span><span class="pl-k">.</span>lock<span class="pl-k">.</span>writeLock()<span class="pl-k">.</span>unlock();</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR466" data-line-number="466"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+											}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR467" data-line-number="467"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+										} <span class="pl-c">// isValidFile(l3)</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR468" data-line-number="468"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+									} <span class="pl-c">// for (k)</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR469" data-line-number="469"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+							} <span class="pl-c">// isValidDirectory(l2)</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR470" data-line-number="470"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+						} <span class="pl-c">// for (j)</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR471" data-line-number="471"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+				} <span class="pl-c">// isValidDirectory(l1)</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR472" data-line-number="472"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			} <span class="pl-c">// for (i)</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL299" data-line-number="299"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR473" data-line-number="473"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL300" data-line-number="300"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR474" data-line-number="474"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL301" data-line-number="301"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR475" data-line-number="475"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">private</span> <span class="pl-k">void</span> <span class="pl-en">remove</span>(<span class="pl-smi">Job</span> <span class="pl-v">key</span>) {</span>

  </td>
</tr>


      <tr class="js-expandable-line" data-position="377">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-187ae3feaa74b08b44371bbc1c7288bb"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/375ccbae1ddbffff280106e135b469fb95a3a777?diff=unified&amp;left_hunk_size=8&amp;mode=100644&amp;next_line_num_left=329&amp;next_line_num_right=503&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fcache%2FFileSystemTileCache.java&amp;prev_line_num_left=301&amp;prev_line_num_right=475&amp;right_hunk_size=11"
            data-left-range="302-328" data-right-range="476-502">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -329,8 +503,11 @@ protected boolean hasWork() {</td>
  </tr>

    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL329" data-line-number="329"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR503" data-line-number="503"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL330" data-line-number="330"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR504" data-line-number="504"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL331" data-line-number="331"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR505" data-line-number="505"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 * stores the bitmap data on disk with filename key</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL332" data-line-number="332"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * @param key filename</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL333" data-line-number="333"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * @param bitmap tile image</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR506" data-line-number="506"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * </span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR507" data-line-number="507"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param key</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR508" data-line-number="508"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            filename</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR509" data-line-number="509"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param bitmap</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR510" data-line-number="510"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            tile image</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL334" data-line-number="334"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR511" data-line-number="511"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL335" data-line-number="335"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR512" data-line-number="512"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">private</span> <span class="pl-k">void</span> <span class="pl-en">storeData</span>(<span class="pl-smi">Job</span> <span class="pl-v">key</span>, <span class="pl-smi">TileBitmap</span> <span class="pl-v">bitmap</span>) {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbL336" data-line-number="336"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-187ae3feaa74b08b44371bbc1c7288bbR513" data-line-number="513"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-smi">OutputStream</span> outputStream <span class="pl-k">=</span> <span class="pl-c1">null</span>;</span>

  </td>
</tr>


  <tr class="js-expandable-line">
   <td class="blob-num blob-num-expandable" colspan="2">
     <a href="#diff-187ae3feaa74b08b44371bbc1c7288bb"
          class="diff-expander js-expand" title="Expand" aria-label="Expand"
          data-url="/mapsforge/mapsforge/blob_excerpt/375ccbae1ddbffff280106e135b469fb95a3a777?diff=unified&amp;mode=100644&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fcache%2FFileSystemTileCache.java&amp;prev_line_num_left=336&amp;prev_line_num_right=513"
          data-left-range="337-556"
          data-right-range="514-556">
       <span class="octicon octicon-unfold"></span>
     </a>
   </td>
   <td class="blob-code blob-code-expandable"></td>
  </tr>

              </table>
            </div>
      </div>

      <a name="diff-c2587b61ae32241ee17b7de175cf9ba0"></a>
      <div id="diff-9"
           class="file js-details-container
                   
                   
                   
                   
                   show-inline-notes
                 ">
        <div class="file-header" data-path="mapsforge-map/src/main/java/org/mapsforge/map/layer/cache/InMemoryTileCache.java">
          <div class="file-actions">
              <span class="show-file-notes">
                <label>
                  <input type="checkbox" checked="checked" class="js-toggle-file-notes">
                  Show notes
                </label>
              </span>

                <a href="/mvglasow/mapsforge/blob/8ca5512f3901939b98380b444ff1ec978fa2e742/mapsforge-map/src/main/java/org/mapsforge/map/layer/cache/InMemoryTileCache.java" class="btn btn-sm tooltipped tooltipped-n" rel="nofollow" aria-label="View the whole file at version 8ca5512 ">View</a>


          </div>
          <div class="file-info">
              <span class="diffstat tooltipped tooltipped-e" aria-label="8 additions &amp; 7 deletions">15 <span class="diffstat-bar"><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-deleted">&#xf053;</span><span class="text-diff-deleted">&#xf053;</span>&#xf053;</span></span>

            <span class="js-selectable-text" title="mapsforge-map/src/main/java/org/mapsforge/map/layer/cache/InMemoryTileCache.java">
              mapsforge-map/src/main/java/org/mapsforge/map/layer/cache/InMemoryTileCache.java
            </span>
            
          </div>
        </div>

            <div class="data highlight blob-wrapper">
              <table class="diff-table tab-size  " data-tab-size="8">
                
      <tr class="js-expandable-line" data-position="0">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-c2587b61ae32241ee17b7de175cf9ba0"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/2ea247b79805130726758a46a2112e06f432ddc4?diff=unified&amp;left_hunk_size=7&amp;mode=100644&amp;next_line_num_left=41&amp;next_line_num_right=41&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fcache%2FInMemoryTileCache.java&amp;prev_line_num_left=&amp;prev_line_num_right=&amp;right_hunk_size=6"
            data-left-range="1-40" data-right-range="1-40">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -41,7 +41,6 @@ public InMemoryTileCache(int capacity) {</td>
  </tr>

    

<tr>
    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0L41" data-line-number="41"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0R41" data-line-number="41"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-v">this</span><span class="pl-k">.</span>lruCache <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">BitmapLRUCache</span>(capacity);</span>

  </td>
</tr>


    

<tr>
    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0L42" data-line-number="42"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0R42" data-line-number="42"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0L43" data-line-number="43"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0R43" data-line-number="43"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0L44" data-line-number="44"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-</span>

  </td>
</tr>


    

<tr>
    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0L45" data-line-number="45"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0R44" data-line-number="44"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">@Override</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0L46" data-line-number="46"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0R45" data-line-number="45"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">public</span> <span class="pl-k">synchronized</span> <span class="pl-k">boolean</span> <span class="pl-en">containsKey</span>(<span class="pl-smi">Job</span> <span class="pl-v">key</span>) {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0L47" data-line-number="47"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0R46" data-line-number="46"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-k">return</span> <span class="pl-v">this</span><span class="pl-k">.</span>lruCache<span class="pl-k">.</span>containsKey(key);</span>

  </td>
</tr>


      <tr class="js-expandable-line" data-position="8">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-c2587b61ae32241ee17b7de175cf9ba0"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/2ea247b79805130726758a46a2112e06f432ddc4?diff=unified&amp;left_hunk_size=13&amp;mode=100644&amp;next_line_num_left=49&amp;next_line_num_right=48&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fcache%2FInMemoryTileCache.java&amp;prev_line_num_left=47&amp;prev_line_num_right=46&amp;right_hunk_size=9"
            data-left-range="48-48" data-right-range="47-47">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -49,13 +48,9 @@ public synchronized boolean containsKey(Job key) {</td>
  </tr>

    

<tr>
    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0L49" data-line-number="49"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0R48" data-line-number="48"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0L50" data-line-number="50"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0R49" data-line-number="49"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">@Override</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0L51" data-line-number="51"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0R50" data-line-number="50"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">public</span> <span class="pl-k">synchronized</span> <span class="pl-k">void</span> <span class="pl-en">destroy</span>() {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0L52" data-line-number="52"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-		<span class="pl-k">for</span> (<span class="pl-smi">TileBitmap</span> bitmap <span class="pl-k">:</span> <span class="pl-v">this</span><span class="pl-k">.</span>lruCache<span class="pl-k">.</span>values()) {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0L53" data-line-number="53"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-			bitmap<span class="pl-k">.</span>decrementRefCount();</span>

  </td>
</tr>


    

<tr>
    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0L54" data-line-number="54"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-		}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0L55" data-line-number="55"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-		<span class="pl-v">this</span><span class="pl-k">.</span>lruCache<span class="pl-k">.</span>clear();</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0R51" data-line-number="51"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		purge();</span>

  </td>
</tr>


    

<tr>
    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0L56" data-line-number="56"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0R52" data-line-number="52"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0L57" data-line-number="57"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0R53" data-line-number="53"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0L58" data-line-number="58"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-</span>

  </td>
</tr>


    

<tr>
    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0L59" data-line-number="59"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0R54" data-line-number="54"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">@Override</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0L60" data-line-number="60"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0R55" data-line-number="55"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">public</span> <span class="pl-k">synchronized</span> <span class="pl-smi">TileBitmap</span> <span class="pl-en">get</span>(<span class="pl-smi">Job</span> <span class="pl-v">key</span>) {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0L61" data-line-number="61"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0R56" data-line-number="56"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-smi">TileBitmap</span> bitmap <span class="pl-k">=</span> <span class="pl-v">this</span><span class="pl-k">.</span>lruCache<span class="pl-k">.</span>get(key);</span>

  </td>
</tr>


      <tr class="js-expandable-line" data-position="23">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-c2587b61ae32241ee17b7de175cf9ba0"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/2ea247b79805130726758a46a2112e06f432ddc4?diff=unified&amp;left_hunk_size=7&amp;mode=100644&amp;next_line_num_left=80&amp;next_line_num_right=75&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fcache%2FInMemoryTileCache.java&amp;prev_line_num_left=61&amp;prev_line_num_right=56&amp;right_hunk_size=13"
            data-left-range="62-79" data-right-range="57-74">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -80,7 +75,13 @@ public TileBitmap getImmediately(Job key) {</td>
  </tr>

    

<tr>
    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0L80" data-line-number="80"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0R75" data-line-number="75"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-k">return</span> get(key);</span>

  </td>
</tr>


    

<tr>
    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0L81" data-line-number="81"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0R76" data-line-number="76"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0L82" data-line-number="82"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0R77" data-line-number="77"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0L83" data-line-number="83"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0R78" data-line-number="78"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">@Override</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0R79" data-line-number="79"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">purge</span>() {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0R80" data-line-number="80"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">for</span> (<span class="pl-smi">TileBitmap</span> bitmap <span class="pl-k">:</span> <span class="pl-v">this</span><span class="pl-k">.</span>lruCache<span class="pl-k">.</span>values()) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0R81" data-line-number="81"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			bitmap<span class="pl-k">.</span>decrementRefCount();</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0R82" data-line-number="82"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0R83" data-line-number="83"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-v">this</span><span class="pl-k">.</span>lruCache<span class="pl-k">.</span>clear();</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0R84" data-line-number="84"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0L84" data-line-number="84"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0R85" data-line-number="85"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0L85" data-line-number="85"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0R86" data-line-number="86"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">@Override</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0L86" data-line-number="86"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-c2587b61ae32241ee17b7de175cf9ba0R87" data-line-number="87"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">public</span> <span class="pl-k">synchronized</span> <span class="pl-k">void</span> <span class="pl-en">put</span>(<span class="pl-smi">Job</span> <span class="pl-v">key</span>, <span class="pl-smi">TileBitmap</span> <span class="pl-v">bitmap</span>) {</span>

  </td>
</tr>


  <tr class="js-expandable-line">
   <td class="blob-num blob-num-expandable" colspan="2">
     <a href="#diff-c2587b61ae32241ee17b7de175cf9ba0"
          class="diff-expander js-expand" title="Expand" aria-label="Expand"
          data-url="/mapsforge/mapsforge/blob_excerpt/2ea247b79805130726758a46a2112e06f432ddc4?diff=unified&amp;mode=100644&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fcache%2FInMemoryTileCache.java&amp;prev_line_num_left=86&amp;prev_line_num_right=87"
          data-left-range="87-143"
          data-right-range="88-143">
       <span class="octicon octicon-unfold"></span>
     </a>
   </td>
   <td class="blob-code blob-code-expandable"></td>
  </tr>

              </table>
            </div>
      </div>

      <a name="diff-ed646d42409dc157b8055fa062eab87e"></a>
      <div id="diff-10"
           class="file js-details-container
                   
                   
                   
                   
                   show-inline-notes
                 ">
        <div class="file-header" data-path="mapsforge-map/src/main/java/org/mapsforge/map/layer/cache/TileCache.java">
          <div class="file-actions">
              <span class="show-file-notes">
                <label>
                  <input type="checkbox" checked="checked" class="js-toggle-file-notes">
                  Show notes
                </label>
              </span>

                <a href="/mvglasow/mapsforge/blob/8ca5512f3901939b98380b444ff1ec978fa2e742/mapsforge-map/src/main/java/org/mapsforge/map/layer/cache/TileCache.java" class="btn btn-sm tooltipped tooltipped-n" rel="nofollow" aria-label="View the whole file at version 8ca5512 ">View</a>


          </div>
          <div class="file-info">
              <span class="diffstat tooltipped tooltipped-e" aria-label="24 additions &amp; 4 deletions">28 <span class="diffstat-bar"><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span>&#xf053;</span></span>

            <span class="js-selectable-text" title="mapsforge-map/src/main/java/org/mapsforge/map/layer/cache/TileCache.java">
              mapsforge-map/src/main/java/org/mapsforge/map/layer/cache/TileCache.java
            </span>
            
          </div>
        </div>

            <div class="data highlight blob-wrapper">
              <table class="diff-table tab-size  " data-tab-size="8">
                
      <tr class="js-expandable-line" data-position="0">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-ed646d42409dc157b8055fa062eab87e"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/7a89bd7ce2289d2134a5cb70053bf9b711674a76?diff=unified&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=33&amp;next_line_num_right=33&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fcache%2FTileCache.java&amp;prev_line_num_left=&amp;prev_line_num_right=&amp;right_hunk_size=13"
            data-left-range="1-32" data-right-range="1-32">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -33,6 +33,13 @@</td>
  </tr>

    

<tr>
    <td id="diff-ed646d42409dc157b8055fa062eab87eL33" data-line-number="33"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR33" data-line-number="33"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-ed646d42409dc157b8055fa062eab87eL34" data-line-number="34"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR34" data-line-number="34"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-ed646d42409dc157b8055fa062eab87eL35" data-line-number="35"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR35" data-line-number="35"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 * Destroys this cache.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR36" data-line-number="36"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR37" data-line-number="37"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Applications are expected to call this method when they no longer require the cache.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR38" data-line-number="38"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR39" data-line-number="39"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * In versions prior to 0.6.0, it was common practice to call this method but continue using the cache, in order to</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR40" data-line-number="40"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * empty it, forcing all tiles to be re-rendered or re-requested from the source. Beginning with 0.6.0,</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR41" data-line-number="41"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * {@link #purge()} should be used for this purpose. The earlier practice is now discouraged and may lead to</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR42" data-line-number="42"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * unexpected results when used with features introduced in 0.6.0 or later.</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-ed646d42409dc157b8055fa062eab87eL36" data-line-number="36"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR43" data-line-number="43"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-ed646d42409dc157b8055fa062eab87eL37" data-line-number="37"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR44" data-line-number="44"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">void</span> <span class="pl-en">destroy</span>();</span>

  </td>
</tr>


    

<tr>
    <td id="diff-ed646d42409dc157b8055fa062eab87eL38" data-line-number="38"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR45" data-line-number="45"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


      <tr class="js-expandable-line" data-position="14">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-ed646d42409dc157b8055fa062eab87e"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/7a89bd7ce2289d2134a5cb70053bf9b711674a76?diff=unified&amp;left_hunk_size=13&amp;mode=100644&amp;next_line_num_left=53&amp;next_line_num_right=60&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fcache%2FTileCache.java&amp;prev_line_num_left=38&amp;prev_line_num_right=45&amp;right_hunk_size=26"
            data-left-range="39-52" data-right-range="46-59">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -53,13 +60,26 @@</td>
  </tr>

    

<tr>
    <td id="diff-ed646d42409dc157b8055fa062eab87eL53" data-line-number="53"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR60" data-line-number="60"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">int</span> <span class="pl-en">getCapacityFirstLevel</span>();</span>

  </td>
</tr>


    

<tr>
    <td id="diff-ed646d42409dc157b8055fa062eab87eL54" data-line-number="54"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR61" data-line-number="61"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-ed646d42409dc157b8055fa062eab87eL55" data-line-number="55"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR62" data-line-number="62"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-ed646d42409dc157b8055fa062eab87eL56" data-line-number="56"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * Returns tileBitmap only if available at fastest cache in case of multi-layered</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-ed646d42409dc157b8055fa062eab87eL57" data-line-number="57"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * <span class="x x-first x-last">cache, null otherwise.</span></span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR63" data-line-number="63"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Returns tileBitmap only if available at fastest cache in case of multi-layered<span class="x x-first x-last"> cache, null otherwise.</span></span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR64" data-line-number="64"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * </span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-ed646d42409dc157b8055fa062eab87eL58" data-line-number="58"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR65" data-line-number="65"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 * @return tileBitmap if available without getting from lower storage levels</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-ed646d42409dc157b8055fa062eab87eL59" data-line-number="59"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR66" data-line-number="66"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-ed646d42409dc157b8055fa062eab87eL60" data-line-number="60"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR67" data-line-number="67"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-smi">TileBitmap</span> <span class="pl-en">getImmediately</span>(<span class="pl-smi">Job</span> <span class="pl-v">key</span>);</span>

  </td>
</tr>


    

<tr>
    <td id="diff-ed646d42409dc157b8055fa062eab87eL61" data-line-number="61"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR68" data-line-number="68"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-ed646d42409dc157b8055fa062eab87eL62" data-line-number="62"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR69" data-line-number="69"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR70" data-line-number="70"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Purges this cache.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR71" data-line-number="71"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR72" data-line-number="72"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Calls to {@link #get(Job)} issued after purging will not return any tiles added before the purge operation.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR73" data-line-number="73"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR74" data-line-number="74"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Applications should purge the tile cache when map model parameters change, such as the render style for locally</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR75" data-line-number="75"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * rendered tiles, or the source for downloaded tiles. Applications which frequently alternate between a limited</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR76" data-line-number="76"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * number of map model configurations may want to consider using a different cache for each.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR77" data-line-number="77"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * </span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR78" data-line-number="78"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @since 0.6.0</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR79" data-line-number="79"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR80" data-line-number="80"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">void</span> <span class="pl-en">purge</span>();</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR81" data-line-number="81"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR82" data-line-number="82"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-ed646d42409dc157b8055fa062eab87eL63" data-line-number="63"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR83" data-line-number="83"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 * @throws IllegalArgumentException</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-ed646d42409dc157b8055fa062eab87eL64" data-line-number="64"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR84" data-line-number="84"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 *             if any of the parameters is {@code null}.</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-ed646d42409dc157b8055fa062eab87eL65" data-line-number="65"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR85" data-line-number="85"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 * @see Map#put</span></span>

  </td>
</tr>


      <tr class="js-expandable-line" data-position="43">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-ed646d42409dc157b8055fa062eab87e"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/7a89bd7ce2289d2134a5cb70053bf9b711674a76?diff=unified&amp;left_hunk_size=8&amp;mode=100644&amp;next_line_num_left=67&amp;next_line_num_right=87&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fcache%2FTileCache.java&amp;prev_line_num_left=65&amp;prev_line_num_right=85&amp;right_hunk_size=8"
            data-left-range="66-66" data-right-range="86-86">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -67,8 +87,8 @@</td>
  </tr>

    

<tr>
    <td id="diff-ed646d42409dc157b8055fa062eab87eL67" data-line-number="67"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR87" data-line-number="87"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">void</span> <span class="pl-en">put</span>(<span class="pl-smi">Job</span> <span class="pl-v">key</span>, <span class="pl-smi">TileBitmap</span> <span class="pl-v">bitmap</span>);</span>

  </td>
</tr>


    

<tr>
    <td id="diff-ed646d42409dc157b8055fa062eab87eL68" data-line-number="68"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR88" data-line-number="88"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-ed646d42409dc157b8055fa062eab87eL69" data-line-number="69"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR89" data-line-number="89"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-ed646d42409dc157b8055fa062eab87eL70" data-line-number="70"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * Reserves a working set in this cache, for multi-level caches this means bringing</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-ed646d42409dc157b8055fa062eab87eL71" data-line-number="71"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-<span class="pl-c">	 * the <span class="x x-first x-last">elements in workingSet into the </span>fastest cache.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR90" data-line-number="90"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Reserves a working set in this cache, for multi-level caches this means bringing<span class="x x-first x-last"> the elements in workingSet into</span></span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR91" data-line-number="91"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * the fastest cache.</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-ed646d42409dc157b8055fa062eab87eL72" data-line-number="72"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR92" data-line-number="92"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-ed646d42409dc157b8055fa062eab87eL73" data-line-number="73"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR93" data-line-number="93"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">void</span> <span class="pl-en">setWorkingSet</span>(<span class="pl-k">Set&lt;<span class="pl-smi">Job</span>&gt;</span> <span class="pl-v">workingSet</span>);</span>

  </td>
</tr>


    

<tr>
    <td id="diff-ed646d42409dc157b8055fa062eab87eL74" data-line-number="74"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-ed646d42409dc157b8055fa062eab87eR94" data-line-number="94"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> }</span>

  </td>
</tr>



              </table>
            </div>
      </div>

      <a name="diff-3866bef689eb8fa6114dbcbbe36159b8"></a>
      <div id="diff-11"
           class="file js-details-container
                   
                   
                   
                   
                   show-inline-notes
                 ">
        <div class="file-header" data-path="mapsforge-map/src/main/java/org/mapsforge/map/layer/cache/TileStore.java">
          <div class="file-actions">
              <span class="show-file-notes">
                <label>
                  <input type="checkbox" checked="checked" class="js-toggle-file-notes">
                  Show notes
                </label>
              </span>

                <a href="/mvglasow/mapsforge/blob/8ca5512f3901939b98380b444ff1ec978fa2e742/mapsforge-map/src/main/java/org/mapsforge/map/layer/cache/TileStore.java" class="btn btn-sm tooltipped tooltipped-n" rel="nofollow" aria-label="View the whole file at version 8ca5512 ">View</a>


          </div>
          <div class="file-info">
              <span class="diffstat tooltipped tooltipped-e" aria-label="4 additions &amp; 0 deletions">4 <span class="diffstat-bar"><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span>&#xf053;</span></span>

            <span class="js-selectable-text" title="mapsforge-map/src/main/java/org/mapsforge/map/layer/cache/TileStore.java">
              mapsforge-map/src/main/java/org/mapsforge/map/layer/cache/TileStore.java
            </span>
            
          </div>
        </div>

            <div class="data highlight blob-wrapper">
              <table class="diff-table tab-size  " data-tab-size="8">
                
      <tr class="js-expandable-line" data-position="0">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-3866bef689eb8fa6114dbcbbe36159b8"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/55e6ae081ec87d350e6f8fe2893a4a6fb9f19a62?diff=unified&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=109&amp;next_line_num_right=109&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fcache%2FTileStore.java&amp;prev_line_num_left=&amp;prev_line_num_right=&amp;right_hunk_size=10"
            data-left-range="1-108" data-right-range="1-108">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -109,6 +109,10 @@ public TileBitmap getImmediately(Job key) {</td>
  </tr>

    

<tr>
    <td id="diff-3866bef689eb8fa6114dbcbbe36159b8L109" data-line-number="109"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-3866bef689eb8fa6114dbcbbe36159b8R109" data-line-number="109"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-k">return</span> get(key);</span>

  </td>
</tr>


    

<tr>
    <td id="diff-3866bef689eb8fa6114dbcbbe36159b8L110" data-line-number="110"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-3866bef689eb8fa6114dbcbbe36159b8R110" data-line-number="110"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-3866bef689eb8fa6114dbcbbe36159b8L111" data-line-number="111"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-3866bef689eb8fa6114dbcbbe36159b8R111" data-line-number="111"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-3866bef689eb8fa6114dbcbbe36159b8R112" data-line-number="112"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">@Override</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-3866bef689eb8fa6114dbcbbe36159b8R113" data-line-number="113"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">public</span> <span class="pl-k">synchronized</span> <span class="pl-k">void</span> <span class="pl-en">purge</span>() {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-3866bef689eb8fa6114dbcbbe36159b8R114" data-line-number="114"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-c">// no-op</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-3866bef689eb8fa6114dbcbbe36159b8R115" data-line-number="115"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-3866bef689eb8fa6114dbcbbe36159b8L112" data-line-number="112"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-3866bef689eb8fa6114dbcbbe36159b8R116" data-line-number="116"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-3866bef689eb8fa6114dbcbbe36159b8L113" data-line-number="113"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-3866bef689eb8fa6114dbcbbe36159b8R117" data-line-number="117"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">@Override</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-3866bef689eb8fa6114dbcbbe36159b8L114" data-line-number="114"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-3866bef689eb8fa6114dbcbbe36159b8R118" data-line-number="118"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">public</span> <span class="pl-k">synchronized</span> <span class="pl-k">void</span> <span class="pl-en">put</span>(<span class="pl-smi">Job</span> <span class="pl-v">key</span>, <span class="pl-smi">TileBitmap</span> <span class="pl-v">bitmap</span>) {</span>

  </td>
</tr>


  <tr class="js-expandable-line">
   <td class="blob-num blob-num-expandable" colspan="2">
     <a href="#diff-3866bef689eb8fa6114dbcbbe36159b8"
          class="diff-expander js-expand" title="Expand" aria-label="Expand"
          data-url="/mapsforge/mapsforge/blob_excerpt/55e6ae081ec87d350e6f8fe2893a4a6fb9f19a62?diff=unified&amp;mode=100644&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fcache%2FTileStore.java&amp;prev_line_num_left=114&amp;prev_line_num_right=118"
          data-left-range="115-148"
          data-right-range="119-148">
       <span class="octicon octicon-unfold"></span>
     </a>
   </td>
   <td class="blob-code blob-code-expandable"></td>
  </tr>

              </table>
            </div>
      </div>

      <a name="diff-fc9e0f1d296a25ad900113312f9482d6"></a>
      <div id="diff-12"
           class="file js-details-container
                   
                   
                   
                   
                   show-inline-notes
                 ">
        <div class="file-header" data-path="mapsforge-map/src/main/java/org/mapsforge/map/layer/cache/TwoLevelTileCache.java">
          <div class="file-actions">
              <span class="show-file-notes">
                <label>
                  <input type="checkbox" checked="checked" class="js-toggle-file-notes">
                  Show notes
                </label>
              </span>

                <a href="/mvglasow/mapsforge/blob/8ca5512f3901939b98380b444ff1ec978fa2e742/mapsforge-map/src/main/java/org/mapsforge/map/layer/cache/TwoLevelTileCache.java" class="btn btn-sm tooltipped tooltipped-n" rel="nofollow" aria-label="View the whole file at version 8ca5512 ">View</a>


          </div>
          <div class="file-info">
              <span class="diffstat tooltipped tooltipped-e" aria-label="6 additions &amp; 0 deletions">6 <span class="diffstat-bar"><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span></span></span>

            <span class="js-selectable-text" title="mapsforge-map/src/main/java/org/mapsforge/map/layer/cache/TwoLevelTileCache.java">
              mapsforge-map/src/main/java/org/mapsforge/map/layer/cache/TwoLevelTileCache.java
            </span>
            
          </div>
        </div>

            <div class="data highlight blob-wrapper">
              <table class="diff-table tab-size  " data-tab-size="8">
                
      <tr class="js-expandable-line" data-position="0">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-fc9e0f1d296a25ad900113312f9482d6"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/f23a5049e6d73a8ab9449b7ac924fc988f44cc47?diff=unified&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=79&amp;next_line_num_right=79&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fcache%2FTwoLevelTileCache.java&amp;prev_line_num_left=&amp;prev_line_num_right=&amp;right_hunk_size=12"
            data-left-range="1-78" data-right-range="1-78">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -79,6 +79,12 @@ public TileBitmap getImmediately(Job key) {</td>
  </tr>

    

<tr>
    <td id="diff-fc9e0f1d296a25ad900113312f9482d6L79" data-line-number="79"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-fc9e0f1d296a25ad900113312f9482d6R79" data-line-number="79"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-fc9e0f1d296a25ad900113312f9482d6L80" data-line-number="80"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-fc9e0f1d296a25ad900113312f9482d6R80" data-line-number="80"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-fc9e0f1d296a25ad900113312f9482d6L81" data-line-number="81"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-fc9e0f1d296a25ad900113312f9482d6R81" data-line-number="81"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">@Override</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-fc9e0f1d296a25ad900113312f9482d6R82" data-line-number="82"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">purge</span>() {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-fc9e0f1d296a25ad900113312f9482d6R83" data-line-number="83"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-v">this</span><span class="pl-k">.</span>firstLevelTileCache<span class="pl-k">.</span>purge();</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-fc9e0f1d296a25ad900113312f9482d6R84" data-line-number="84"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-v">this</span><span class="pl-k">.</span>secondLevelTileCache<span class="pl-k">.</span>purge();</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-fc9e0f1d296a25ad900113312f9482d6R85" data-line-number="85"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-fc9e0f1d296a25ad900113312f9482d6R86" data-line-number="86"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-fc9e0f1d296a25ad900113312f9482d6R87" data-line-number="87"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">@Override</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-fc9e0f1d296a25ad900113312f9482d6L82" data-line-number="82"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-fc9e0f1d296a25ad900113312f9482d6R88" data-line-number="88"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">put</span>(<span class="pl-smi">Job</span> <span class="pl-v">key</span>, <span class="pl-smi">TileBitmap</span> <span class="pl-v">bitmap</span>) {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-fc9e0f1d296a25ad900113312f9482d6L83" data-line-number="83"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-fc9e0f1d296a25ad900113312f9482d6R89" data-line-number="89"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-k">if</span> (<span class="pl-v">this</span><span class="pl-k">.</span>workingSet<span class="pl-k">.</span>contains(key)) {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-fc9e0f1d296a25ad900113312f9482d6L84" data-line-number="84"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-fc9e0f1d296a25ad900113312f9482d6R90" data-line-number="90"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			<span class="pl-v">this</span><span class="pl-k">.</span>firstLevelTileCache<span class="pl-k">.</span>put(key, bitmap);</span>

  </td>
</tr>


  <tr class="js-expandable-line">
   <td class="blob-num blob-num-expandable" colspan="2">
     <a href="#diff-fc9e0f1d296a25ad900113312f9482d6"
          class="diff-expander js-expand" title="Expand" aria-label="Expand"
          data-url="/mapsforge/mapsforge/blob_excerpt/f23a5049e6d73a8ab9449b7ac924fc988f44cc47?diff=unified&amp;mode=100644&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fcache%2FTwoLevelTileCache.java&amp;prev_line_num_left=84&amp;prev_line_num_right=90"
          data-left-range="85-111"
          data-right-range="91-111">
       <span class="octicon octicon-unfold"></span>
     </a>
   </td>
   <td class="blob-code blob-code-expandable"></td>
  </tr>

              </table>
            </div>
      </div>

      <a name="diff-76bae2dbc83d1e48052fb53f800374c0"></a>
      <div id="diff-13"
           class="file js-details-container
                   
                   
                   
                   
                   show-inline-notes
                 ">
        <div class="file-header" data-path="mapsforge-map/src/main/java/org/mapsforge/map/layer/download/TileDownloadLayer.java">
          <div class="file-actions">
              <span class="show-file-notes">
                <label>
                  <input type="checkbox" checked="checked" class="js-toggle-file-notes">
                  Show notes
                </label>
              </span>

                <a href="/mvglasow/mapsforge/blob/8ca5512f3901939b98380b444ff1ec978fa2e742/mapsforge-map/src/main/java/org/mapsforge/map/layer/download/TileDownloadLayer.java" class="btn btn-sm tooltipped tooltipped-n" rel="nofollow" aria-label="View the whole file at version 8ca5512 ">View</a>


          </div>
          <div class="file-info">
              <span class="diffstat tooltipped tooltipped-e" aria-label="60 additions &amp; 0 deletions">60 <span class="diffstat-bar"><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span></span></span>

            <span class="js-selectable-text" title="mapsforge-map/src/main/java/org/mapsforge/map/layer/download/TileDownloadLayer.java">
              mapsforge-map/src/main/java/org/mapsforge/map/layer/download/TileDownloadLayer.java
            </span>
            
          </div>
        </div>

            <div class="data highlight blob-wrapper">
              <table class="diff-table tab-size  " data-tab-size="8">
                
      <tr class="js-expandable-line" data-position="0">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-76bae2dbc83d1e48052fb53f800374c0"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/8f0ef0456932dc6469875935d205e3eade349d92?diff=unified&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=17&amp;next_line_num_right=17&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fdownload%2FTileDownloadLayer.java&amp;prev_line_num_left=&amp;prev_line_num_right=&amp;right_hunk_size=7"
            data-left-range="1-16" data-right-range="1-16">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -17,6 +17,7 @@</td>
  </tr>

    

<tr>
    <td id="diff-76bae2dbc83d1e48052fb53f800374c0L17" data-line-number="17"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R17" data-line-number="17"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-76bae2dbc83d1e48052fb53f800374c0L18" data-line-number="18"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R18" data-line-number="18"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">org.mapsforge.core.graphics.Canvas</span>;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-76bae2dbc83d1e48052fb53f800374c0L19" data-line-number="19"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R19" data-line-number="19"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">org.mapsforge.core.graphics.GraphicFactory</span>;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R20" data-line-number="20"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-k">import</span> <span class="pl-smi">org.mapsforge.core.graphics.TileBitmap</span>;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-76bae2dbc83d1e48052fb53f800374c0L20" data-line-number="20"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R21" data-line-number="21"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">org.mapsforge.core.model.BoundingBox</span>;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-76bae2dbc83d1e48052fb53f800374c0L21" data-line-number="21"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R22" data-line-number="22"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">org.mapsforge.core.model.Point</span>;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-76bae2dbc83d1e48052fb53f800374c0L22" data-line-number="22"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R23" data-line-number="23"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">org.mapsforge.core.model.Tile</span>;</span>

  </td>
</tr>


      <tr class="js-expandable-line" data-position="8">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-76bae2dbc83d1e48052fb53f800374c0"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/8f0ef0456932dc6469875935d205e3eade349d92?diff=unified&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=29&amp;next_line_num_right=30&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fdownload%2FTileDownloadLayer.java&amp;prev_line_num_left=22&amp;prev_line_num_right=23&amp;right_hunk_size=7"
            data-left-range="23-28" data-right-range="24-29">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -29,6 +30,7 @@</td>
  </tr>

    

<tr>
    <td id="diff-76bae2dbc83d1e48052fb53f800374c0L29" data-line-number="29"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R30" data-line-number="30"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">TileDownloadLayer</span> <span class="pl-k">extends</span> <span class="pl-e">TileLayer&lt;<span class="pl-smi">DownloadJob</span>&gt;</span> {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-76bae2dbc83d1e48052fb53f800374c0L30" data-line-number="30"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R31" data-line-number="31"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">private</span> <span class="pl-k">static</span> <span class="pl-k">final</span> <span class="pl-k">int</span> <span class="pl-c1">DOWNLOAD_THREADS_MAX</span> <span class="pl-k">=</span> <span class="pl-c1">8</span>;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-76bae2dbc83d1e48052fb53f800374c0L31" data-line-number="31"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R32" data-line-number="32"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R33" data-line-number="33"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">private</span> <span class="pl-k">long</span> cacheTimeToLive <span class="pl-k">=</span> <span class="pl-c1">0</span>;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-76bae2dbc83d1e48052fb53f800374c0L32" data-line-number="32"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R34" data-line-number="34"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">private</span> <span class="pl-k">final</span> <span class="pl-smi">GraphicFactory</span> graphicFactory;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-76bae2dbc83d1e48052fb53f800374c0L33" data-line-number="33"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R35" data-line-number="35"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">private</span> <span class="pl-k">boolean</span> started;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-76bae2dbc83d1e48052fb53f800374c0L34" data-line-number="34"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R36" data-line-number="36"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">private</span> <span class="pl-k">final</span> <span class="pl-smi">TileCache</span> tileCache;</span>

  </td>
</tr>


      <tr class="js-expandable-line" data-position="16">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-76bae2dbc83d1e48052fb53f800374c0"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/8f0ef0456932dc6469875935d205e3eade349d92?diff=unified&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=41&amp;next_line_num_right=43&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fdownload%2FTileDownloadLayer.java&amp;prev_line_num_left=34&amp;prev_line_num_right=36&amp;right_hunk_size=7"
            data-left-range="35-40" data-right-range="37-42">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -41,6 +43,7 @@ public TileDownloadLayer(TileCache tileCache, MapViewPosition mapViewPosition, T</td>
  </tr>

    

<tr>
    <td id="diff-76bae2dbc83d1e48052fb53f800374c0L41" data-line-number="41"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R43" data-line-number="43"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-76bae2dbc83d1e48052fb53f800374c0L42" data-line-number="42"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R44" data-line-number="44"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-v">this</span><span class="pl-k">.</span>tileCache <span class="pl-k">=</span> tileCache;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-76bae2dbc83d1e48052fb53f800374c0L43" data-line-number="43"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R45" data-line-number="45"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-v">this</span><span class="pl-k">.</span>tileSource <span class="pl-k">=</span> tileSource;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R46" data-line-number="46"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-v">this</span><span class="pl-k">.</span>cacheTimeToLive <span class="pl-k">=</span> tileSource<span class="pl-k">.</span>getDefaultTimeToLive();</span>

  </td>
</tr>


    

<tr>
    <td id="diff-76bae2dbc83d1e48052fb53f800374c0L44" data-line-number="44"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R47" data-line-number="47"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-v">this</span><span class="pl-k">.</span>graphicFactory <span class="pl-k">=</span> graphicFactory;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-76bae2dbc83d1e48052fb53f800374c0L45" data-line-number="45"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R48" data-line-number="48"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-76bae2dbc83d1e48052fb53f800374c0L46" data-line-number="46"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R49" data-line-number="49"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


      <tr class="js-expandable-line" data-position="24">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-76bae2dbc83d1e48052fb53f800374c0"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/8f0ef0456932dc6469875935d205e3eade349d92?diff=unified&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=53&amp;next_line_num_right=56&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fdownload%2FTileDownloadLayer.java&amp;prev_line_num_left=46&amp;prev_line_num_right=49&amp;right_hunk_size=15"
            data-left-range="47-52" data-right-range="50-55">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -53,6 +56,15 @@ public void draw(BoundingBox boundingBox, byte zoomLevel, Canvas canvas, Point t</td>
  </tr>

    

<tr>
    <td id="diff-76bae2dbc83d1e48052fb53f800374c0L53" data-line-number="53"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R56" data-line-number="56"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-v">super</span><span class="pl-k">.</span>draw(boundingBox, zoomLevel, canvas, topLeftPoint);</span>

  </td>
</tr>


    

<tr>
    <td id="diff-76bae2dbc83d1e48052fb53f800374c0L54" data-line-number="54"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R57" data-line-number="57"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-76bae2dbc83d1e48052fb53f800374c0L55" data-line-number="55"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R58" data-line-number="58"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R59" data-line-number="59"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R60" data-line-number="60"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Returns the time-to-live (TTL) for tiles in the cache, or 0 if not set.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R61" data-line-number="61"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R62" data-line-number="62"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Refer to {@link #isTileStale(TileBitmap)} for information on how the TTL is enforced.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R63" data-line-number="63"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R64" data-line-number="64"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">public</span> <span class="pl-k">long</span> <span class="pl-en">getCacheTimeToLive</span>() {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R65" data-line-number="65"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">return</span> cacheTimeToLive;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R66" data-line-number="66"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R67" data-line-number="67"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td id="diff-76bae2dbc83d1e48052fb53f800374c0L56" data-line-number="56"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R68" data-line-number="68"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">@Override</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-76bae2dbc83d1e48052fb53f800374c0L57" data-line-number="57"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R69" data-line-number="69"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onDestroy</span>() {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-76bae2dbc83d1e48052fb53f800374c0L58" data-line-number="58"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R70" data-line-number="70"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-k">for</span> (<span class="pl-smi">TileDownloadThread</span> tileDownloadThread <span class="pl-k">:</span> <span class="pl-v">this</span><span class="pl-k">.</span>tileDownloadThreads) {</span>

  </td>
</tr>


      <tr class="js-expandable-line" data-position="40">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-76bae2dbc83d1e48052fb53f800374c0"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/8f0ef0456932dc6469875935d205e3eade349d92?diff=unified&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=77&amp;next_line_num_right=89&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fdownload%2FTileDownloadLayer.java&amp;prev_line_num_left=58&amp;prev_line_num_right=70&amp;right_hunk_size=20"
            data-left-range="59-76" data-right-range="71-88">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -77,6 +89,20 @@ public void onResume() {</td>
  </tr>

    

<tr>
    <td id="diff-76bae2dbc83d1e48052fb53f800374c0L77" data-line-number="77"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R89" data-line-number="89"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-76bae2dbc83d1e48052fb53f800374c0L78" data-line-number="78"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R90" data-line-number="90"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-76bae2dbc83d1e48052fb53f800374c0L79" data-line-number="79"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R91" data-line-number="91"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R92" data-line-number="92"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R93" data-line-number="93"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Sets the time-to-live (TTL) for tiles in the cache.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R94" data-line-number="94"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R95" data-line-number="95"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * The initial TTL is obtained by calling the {@link org.mapsforge.map.layer.download.tilesource.TileSource}&#39;s</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R96" data-line-number="96"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * {@link org.mapsforge.map.layer.download.tilesource.TileSource#getDefaultTTL()} method. Refer to</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R97" data-line-number="97"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * {@link #isTileStale(TileBitmap)} for information on how the TTL is enforced.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R98" data-line-number="98"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * </span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R99" data-line-number="99"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param ttl</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R100" data-line-number="100"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            The TTL. If set to 0, no TTL will be enforced.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R101" data-line-number="101"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R102" data-line-number="102"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">setCacheTimeToLive</span>(<span class="pl-k">long</span> <span class="pl-v">ttl</span>) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R103" data-line-number="103"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		cacheTimeToLive <span class="pl-k">=</span> ttl;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R104" data-line-number="104"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R105" data-line-number="105"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td id="diff-76bae2dbc83d1e48052fb53f800374c0L80" data-line-number="80"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R106" data-line-number="106"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">@Override</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-76bae2dbc83d1e48052fb53f800374c0L81" data-line-number="81"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R107" data-line-number="107"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">public</span> <span class="pl-k">synchronized</span> <span class="pl-k">void</span> <span class="pl-en">setDisplayModel</span>(<span class="pl-smi">DisplayModel</span> <span class="pl-v">displayModel</span>) {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-76bae2dbc83d1e48052fb53f800374c0L82" data-line-number="82"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R108" data-line-number="108"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-v">super</span><span class="pl-k">.</span>setDisplayModel(displayModel);</span>

  </td>
</tr>


      <tr class="js-expandable-line" data-position="61">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-76bae2dbc83d1e48052fb53f800374c0"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/8f0ef0456932dc6469875935d205e3eade349d92?diff=unified&amp;left_hunk_size=4&amp;mode=100644&amp;next_line_num_left=108&amp;next_line_num_right=134&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fdownload%2FTileDownloadLayer.java&amp;prev_line_num_left=82&amp;prev_line_num_right=108&amp;right_hunk_size=38"
            data-left-range="83-107" data-right-range="109-133">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -108,4 +134,38 @@ public void start() {</td>
  </tr>

    

<tr>
    <td id="diff-76bae2dbc83d1e48052fb53f800374c0L108" data-line-number="108"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R134" data-line-number="134"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">protected</span> <span class="pl-smi">DownloadJob</span> <span class="pl-en">createJob</span>(<span class="pl-smi">Tile</span> <span class="pl-v">tile</span>) {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-76bae2dbc83d1e48052fb53f800374c0L109" data-line-number="109"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R135" data-line-number="135"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-smi">DownloadJob</span>(tile, <span class="pl-v">this</span><span class="pl-k">.</span>tileSource);</span>

  </td>
</tr>


    

<tr>
    <td id="diff-76bae2dbc83d1e48052fb53f800374c0L110" data-line-number="110"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R136" data-line-number="136"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R137" data-line-number="137"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R138" data-line-number="138"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R139" data-line-number="139"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Whether the tile is stale and should be refreshed.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R140" data-line-number="140"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R141" data-line-number="141"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * This method is called from {@link #draw(BoundingBox, byte, Canvas, Point)} to determine whether the tile needs to</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R142" data-line-number="142"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * be refreshed.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R143" data-line-number="143"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R144" data-line-number="144"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * A tile is considered stale if one or more of the following two conditions apply:</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R145" data-line-number="145"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;ul&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R146" data-line-number="146"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;li&gt;The {@code bitmap}&#39;s {@link org.mapsforge.core.graphics.TileBitmap#isExpired()} method returns {@code True}.&lt;/li&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R147" data-line-number="147"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;li&gt;The layer has a time-to-live (TTL) set ({@link #getCacheTimeToLive()} returns a nonzero value) and the sum of</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R148" data-line-number="148"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * the {@code bitmap}&#39;s {@link org.mapsforge.core.graphics.TileBitmap#getTimestamp()} and TTL is less than current</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R149" data-line-number="149"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * time (as returned by {@link java.lang.System#currentTimeMillis()}).&lt;/li&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R150" data-line-number="150"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;/ul&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R151" data-line-number="151"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R152" data-line-number="152"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * When a tile has become stale, the layer will first display the tile referenced by {@code bitmap} and attempt to</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R153" data-line-number="153"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * obtain a fresh copy in the background. When a fresh copy becomes available, the layer will replace it and update</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R154" data-line-number="154"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * the cache. If a fresh copy cannot be obtained (e.g. because the tile is obtained from an online source which</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R155" data-line-number="155"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * cannot be reached), the stale tile will continue to be used until another</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R156" data-line-number="156"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * {@code #draw(BoundingBox, byte, Canvas, Point)} operation requests it again.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R157" data-line-number="157"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * </span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R158" data-line-number="158"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param tile</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R159" data-line-number="159"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            A tile. This parameter is not used for a {@code TileDownloadLayer} and can be null.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R160" data-line-number="160"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param bitmap</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R161" data-line-number="161"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            The bitmap for {@code tile} currently held in the layer&#39;s cache.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R162" data-line-number="162"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R163" data-line-number="163"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">@Override</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R164" data-line-number="164"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">protected</span> <span class="pl-k">boolean</span> <span class="pl-en">isTileStale</span>(<span class="pl-smi">Tile</span> <span class="pl-v">tile</span>, <span class="pl-smi">TileBitmap</span> <span class="pl-v">bitmap</span>) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R165" data-line-number="165"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">if</span> (bitmap<span class="pl-k">.</span>isExpired())</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R166" data-line-number="166"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-k">return</span> <span class="pl-c1">true</span>;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R167" data-line-number="167"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">if</span> (cacheTimeToLive <span class="pl-k">==</span> <span class="pl-c1">0</span>)</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R168" data-line-number="168"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-k">return</span> <span class="pl-c1">false</span>;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R169" data-line-number="169"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">return</span> ((bitmap<span class="pl-k">.</span>getTimestamp() <span class="pl-k">+</span> cacheTimeToLive) <span class="pl-k">&lt;</span> <span class="pl-smi">System</span><span class="pl-k">.</span>currentTimeMillis());</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R170" data-line-number="170"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-76bae2dbc83d1e48052fb53f800374c0L111" data-line-number="111"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-76bae2dbc83d1e48052fb53f800374c0R171" data-line-number="171"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> }</span>

  </td>
</tr>



              </table>
            </div>
      </div>

      <a name="diff-01960c4dcc5dec9fb85dd74b633a01d0"></a>
      <div id="diff-14"
           class="file js-details-container
                   
                   
                   
                   
                   show-inline-notes
                 ">
        <div class="file-header" data-path="mapsforge-map/src/main/java/org/mapsforge/map/layer/download/TileDownloader.java">
          <div class="file-actions">
              <span class="show-file-notes">
                <label>
                  <input type="checkbox" checked="checked" class="js-toggle-file-notes">
                  Show notes
                </label>
              </span>

                <a href="/mvglasow/mapsforge/blob/8ca5512f3901939b98380b444ff1ec978fa2e742/mapsforge-map/src/main/java/org/mapsforge/map/layer/download/TileDownloader.java" class="btn btn-sm tooltipped tooltipped-n" rel="nofollow" aria-label="View the whole file at version 8ca5512 ">View</a>


          </div>
          <div class="file-info">
              <span class="diffstat tooltipped tooltipped-e" aria-label="3 additions &amp; 1 deletion">4 <span class="diffstat-bar"><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-deleted">&#xf053;</span>&#xf053;</span></span>

            <span class="js-selectable-text" title="mapsforge-map/src/main/java/org/mapsforge/map/layer/download/TileDownloader.java">
              mapsforge-map/src/main/java/org/mapsforge/map/layer/download/TileDownloader.java
            </span>
            
          </div>
        </div>

            <div class="data highlight blob-wrapper">
              <table class="diff-table tab-size  " data-tab-size="8">
                
      <tr class="js-expandable-line" data-position="0">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-01960c4dcc5dec9fb85dd74b633a01d0"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/76970a956f0b5504a25966eddd1f6c5b92cec54d?diff=unified&amp;left_hunk_size=8&amp;mode=100644&amp;next_line_num_left=64&amp;next_line_num_right=64&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fdownload%2FTileDownloader.java&amp;prev_line_num_left=&amp;prev_line_num_right=&amp;right_hunk_size=10"
            data-left-range="1-63" data-right-range="1-63">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -64,8 +64,10 @@ TileBitmap downloadImage() throws IOException {</td>
  </tr>

    

<tr>
    <td id="diff-01960c4dcc5dec9fb85dd74b633a01d0L64" data-line-number="64"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-01960c4dcc5dec9fb85dd74b633a01d0R64" data-line-number="64"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-smi">InputStream</span> inputStream <span class="pl-k">=</span> getInputStream(urlConnection);</span>

  </td>
</tr>


    

<tr>
    <td id="diff-01960c4dcc5dec9fb85dd74b633a01d0L65" data-line-number="65"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-01960c4dcc5dec9fb85dd74b633a01d0R65" data-line-number="65"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-01960c4dcc5dec9fb85dd74b633a01d0L66" data-line-number="66"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-01960c4dcc5dec9fb85dd74b633a01d0R66" data-line-number="66"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-k">try</span> {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-01960c4dcc5dec9fb85dd74b633a01d0L67" data-line-number="67"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-			<span class="pl-k x x-first x-last">return</span> <span class="pl-v">this</span><span class="pl-k">.</span>graphicFactory<span class="pl-k">.</span>createTileBitmap(inputStream, <span class="pl-v">this</span><span class="pl-k">.</span>downloadJob<span class="pl-k">.</span>tile<span class="pl-k">.</span>tileSize,</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-01960c4dcc5dec9fb85dd74b633a01d0R67" data-line-number="67"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-smi x x-first">TileBitmap</span><span class="x"> result </span><span class="pl-k x x-last">=</span> <span class="pl-v">this</span><span class="pl-k">.</span>graphicFactory<span class="pl-k">.</span>createTileBitmap(inputStream, <span class="pl-v">this</span><span class="pl-k">.</span>downloadJob<span class="pl-k">.</span>tile<span class="pl-k">.</span>tileSize,</span>

  </td>
</tr>


    

<tr>
    <td id="diff-01960c4dcc5dec9fb85dd74b633a01d0L68" data-line-number="68"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-01960c4dcc5dec9fb85dd74b633a01d0R68" data-line-number="68"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 					<span class="pl-v">this</span><span class="pl-k">.</span>downloadJob<span class="pl-k">.</span>hasAlpha);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-01960c4dcc5dec9fb85dd74b633a01d0R69" data-line-number="69"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			result<span class="pl-k">.</span>setExpiration(urlConnection<span class="pl-k">.</span>getExpiration());</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-01960c4dcc5dec9fb85dd74b633a01d0R70" data-line-number="70"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-k">return</span> result;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-01960c4dcc5dec9fb85dd74b633a01d0L69" data-line-number="69"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-01960c4dcc5dec9fb85dd74b633a01d0R71" data-line-number="71"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		} <span class="pl-k">catch</span> (<span class="pl-smi">CorruptedInputStreamException</span> e) {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-01960c4dcc5dec9fb85dd74b633a01d0L70" data-line-number="70"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-01960c4dcc5dec9fb85dd74b633a01d0R72" data-line-number="72"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			<span class="pl-c">// the creation of the tile bit map can fail at, at least on Android,</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-01960c4dcc5dec9fb85dd74b633a01d0L71" data-line-number="71"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-01960c4dcc5dec9fb85dd74b633a01d0R73" data-line-number="73"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			<span class="pl-c">// when the connection is slow or busy, returning null here ensures that</span></span>

  </td>
</tr>


  <tr class="js-expandable-line">
   <td class="blob-num blob-num-expandable" colspan="2">
     <a href="#diff-01960c4dcc5dec9fb85dd74b633a01d0"
          class="diff-expander js-expand" title="Expand" aria-label="Expand"
          data-url="/mapsforge/mapsforge/blob_excerpt/76970a956f0b5504a25966eddd1f6c5b92cec54d?diff=unified&amp;mode=100644&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fdownload%2FTileDownloader.java&amp;prev_line_num_left=71&amp;prev_line_num_right=73"
          data-left-range="72-80"
          data-right-range="74-80">
       <span class="octicon octicon-unfold"></span>
     </a>
   </td>
   <td class="blob-code blob-code-expandable"></td>
  </tr>

              </table>
            </div>
      </div>

      <a name="diff-d669bae8664848b350ce57cbe63f6b34"></a>
      <div id="diff-15"
           class="file js-details-container
                   
                   
                   
                   
                   show-inline-notes
                 ">
        <div class="file-header" data-path="mapsforge-map/src/main/java/org/mapsforge/map/layer/download/tilesource/AbstractTileSource.java">
          <div class="file-actions">
              <span class="show-file-notes">
                <label>
                  <input type="checkbox" checked="checked" class="js-toggle-file-notes">
                  Show notes
                </label>
              </span>

                <a href="/mvglasow/mapsforge/blob/8ca5512f3901939b98380b444ff1ec978fa2e742/mapsforge-map/src/main/java/org/mapsforge/map/layer/download/tilesource/AbstractTileSource.java" class="btn btn-sm tooltipped tooltipped-n" rel="nofollow" aria-label="View the whole file at version 8ca5512 ">View</a>


          </div>
          <div class="file-info">
              <span class="diffstat tooltipped tooltipped-e" aria-label="24 additions &amp; 1 deletion">25 <span class="diffstat-bar"><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span>&#xf053;</span></span>

            <span class="js-selectable-text" title="mapsforge-map/src/main/java/org/mapsforge/map/layer/download/tilesource/AbstractTileSource.java">
              ...rge-map/src/main/java/org/mapsforge/map/layer/download/tilesource/AbstractTileSource.java
            </span>
            
          </div>
        </div>

            <div class="data highlight blob-wrapper">
              <table class="diff-table tab-size  " data-tab-size="8">
                
      <tr class="js-expandable-line" data-position="0">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-d669bae8664848b350ce57cbe63f6b34"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/4954b7e8e0393a7802db8e1c435ce51faf40fd42?diff=unified&amp;left_hunk_size=7&amp;mode=100644&amp;next_line_num_left=18&amp;next_line_num_right=18&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fdownload%2Ftilesource%2FAbstractTileSource.java&amp;prev_line_num_left=&amp;prev_line_num_right=&amp;right_hunk_size=23"
            data-left-range="1-17" data-right-range="1-17">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -18,7 +18,23 @@</td>
  </tr>

    

<tr>
    <td id="diff-d669bae8664848b350ce57cbe63f6b34L18" data-line-number="18"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R18" data-line-number="18"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-d669bae8664848b350ce57cbe63f6b34L19" data-line-number="19"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R19" data-line-number="19"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">java.util.Random</span>;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d669bae8664848b350ce57cbe63f6b34L20" data-line-number="20"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R20" data-line-number="20"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R21" data-line-number="21"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R22" data-line-number="22"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c"> * The abstract base class for tiles downloaded from a web server.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R23" data-line-number="23"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c"> * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R24" data-line-number="24"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c"> * This class defines a default TTL for cached tiles, accessible through the {@link #getDefaultTTL()} method. The value</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R25" data-line-number="25"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c"> * here will be used as the initial TTL by the {@link org.mapsforge.map.layer.download.TileDownloadLayer} using this</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R26" data-line-number="26"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c"> * tile source, but applications can change the TTL at any time (refer to</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R27" data-line-number="27"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c"> * {@link org.mapsforge.map.layer.download.TileDownloadLayer} for details). The default value is set to one day, or</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R28" data-line-number="28"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c"> * 86,400,000 milliseconds. Subclasses should set {@code #defaultTTL} in their constructor to a value that is</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R29" data-line-number="29"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c"> * appropriate for their tile source.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R30" data-line-number="30"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c"> */</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-d669bae8664848b350ce57cbe63f6b34L21" data-line-number="21"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R31" data-line-number="31"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-k">public</span> <span class="pl-k">abstract</span> <span class="pl-k">class</span> <span class="pl-en">AbstractTileSource</span> <span class="pl-k">implements</span> <span class="pl-e">TileSource</span> {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R32" data-line-number="32"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R33" data-line-number="33"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R34" data-line-number="34"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * The default time-to-live (TTL) for cached tiles (one day, or 86,400,000 milliseconds).</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R35" data-line-number="35"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R36" data-line-number="36"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">protected</span> <span class="pl-k">long</span> defaultTimeToLive <span class="pl-k">=</span> <span class="pl-c1">86400000</span>;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R37" data-line-number="37"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d669bae8664848b350ce57cbe63f6b34L22" data-line-number="22"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R38" data-line-number="38"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">protected</span> <span class="pl-k">final</span> <span class="pl-k">String</span>[] hostNames;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d669bae8664848b350ce57cbe63f6b34L23" data-line-number="23"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R39" data-line-number="39"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">protected</span> <span class="pl-k">final</span> <span class="pl-k">int</span> port;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d669bae8664848b350ce57cbe63f6b34L24" data-line-number="24"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R40" data-line-number="40"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">protected</span> <span class="pl-k">final</span> <span class="pl-smi">Random</span> random <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">Random</span>();</span>

  </td>
</tr>


      <tr class="js-expandable-line" data-position="24">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-d669bae8664848b350ce57cbe63f6b34"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/4954b7e8e0393a7802db8e1c435ce51faf40fd42?diff=unified&amp;left_hunk_size=7&amp;mode=100644&amp;next_line_num_left=36&amp;next_line_num_right=52&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fdownload%2Ftilesource%2FAbstractTileSource.java&amp;prev_line_num_left=24&amp;prev_line_num_right=40&amp;right_hunk_size=6"
            data-left-range="25-35" data-right-range="41-51">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -36,7 +52,6 @@ protected AbstractTileSource(String[] hostNames, int port) {</td>
  </tr>

    

<tr>
    <td id="diff-d669bae8664848b350ce57cbe63f6b34L36" data-line-number="36"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R52" data-line-number="52"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d669bae8664848b350ce57cbe63f6b34L37" data-line-number="37"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R53" data-line-number="53"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d669bae8664848b350ce57cbe63f6b34L38" data-line-number="38"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R54" data-line-number="54"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-d669bae8664848b350ce57cbe63f6b34L39" data-line-number="39"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d669bae8664848b350ce57cbe63f6b34L40" data-line-number="40"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R55" data-line-number="55"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-v">this</span><span class="pl-k">.</span>hostNames <span class="pl-k">=</span> hostNames;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d669bae8664848b350ce57cbe63f6b34L41" data-line-number="41"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R56" data-line-number="56"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-v">this</span><span class="pl-k">.</span>port <span class="pl-k">=</span> port;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d669bae8664848b350ce57cbe63f6b34L42" data-line-number="42"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R57" data-line-number="57"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>


      <tr class="js-expandable-line" data-position="32">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-d669bae8664848b350ce57cbe63f6b34"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/4954b7e8e0393a7802db8e1c435ce51faf40fd42?diff=unified&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=61&amp;next_line_num_right=76&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fdownload%2Ftilesource%2FAbstractTileSource.java&amp;prev_line_num_left=42&amp;prev_line_num_right=57&amp;right_hunk_size=14"
            data-left-range="43-60" data-right-range="58-75">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -61,6 +76,14 @@ public boolean equals(Object obj) {</td>
  </tr>

    

<tr>
    <td id="diff-d669bae8664848b350ce57cbe63f6b34L61" data-line-number="61"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R76" data-line-number="76"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-k">return</span> <span class="pl-c1">true</span>;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d669bae8664848b350ce57cbe63f6b34L62" data-line-number="62"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R77" data-line-number="77"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d669bae8664848b350ce57cbe63f6b34L63" data-line-number="63"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R78" data-line-number="78"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R79" data-line-number="79"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R80" data-line-number="80"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Returns the default time-to-live (TTL) for cached tiles.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R81" data-line-number="81"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R82" data-line-number="82"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">@Override</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R83" data-line-number="83"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">public</span> <span class="pl-k">long</span> <span class="pl-en">getDefaultTimeToLive</span>() {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R84" data-line-number="84"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">return</span> defaultTimeToLive;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R85" data-line-number="85"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R86" data-line-number="86"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d669bae8664848b350ce57cbe63f6b34L64" data-line-number="64"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R87" data-line-number="87"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">@Override</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-d669bae8664848b350ce57cbe63f6b34L65" data-line-number="65"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R88" data-line-number="88"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">public</span> <span class="pl-k">int</span> <span class="pl-en">hashCode</span>() {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d669bae8664848b350ce57cbe63f6b34L66" data-line-number="66"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d669bae8664848b350ce57cbe63f6b34R89" data-line-number="89"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-k">final</span> <span class="pl-k">int</span> prime <span class="pl-k">=</span> <span class="pl-c1">31</span>;</span>

  </td>
</tr>


  <tr class="js-expandable-line">
   <td class="blob-num blob-num-expandable" colspan="2">
     <a href="#diff-d669bae8664848b350ce57cbe63f6b34"
          class="diff-expander js-expand" title="Expand" aria-label="Expand"
          data-url="/mapsforge/mapsforge/blob_excerpt/4954b7e8e0393a7802db8e1c435ce51faf40fd42?diff=unified&amp;mode=100644&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fdownload%2Ftilesource%2FAbstractTileSource.java&amp;prev_line_num_left=66&amp;prev_line_num_right=89"
          data-left-range="67-95"
          data-right-range="90-95">
       <span class="octicon octicon-unfold"></span>
     </a>
   </td>
   <td class="blob-code blob-code-expandable"></td>
  </tr>

              </table>
            </div>
      </div>

      <a name="diff-ad33d28d492eaa2c045e576d17ab372c"></a>
      <div id="diff-16"
           class="file js-details-container
                   
                   
                   
                   
                   show-inline-notes
                 ">
        <div class="file-header" data-path="mapsforge-map/src/main/java/org/mapsforge/map/layer/download/tilesource/OpenStreetMapMapnik.java">
          <div class="file-actions">
              <span class="show-file-notes">
                <label>
                  <input type="checkbox" checked="checked" class="js-toggle-file-notes">
                  Show notes
                </label>
              </span>

                <a href="/mvglasow/mapsforge/blob/8ca5512f3901939b98380b444ff1ec978fa2e742/mapsforge-map/src/main/java/org/mapsforge/map/layer/download/tilesource/OpenStreetMapMapnik.java" class="btn btn-sm tooltipped tooltipped-n" rel="nofollow" aria-label="View the whole file at version 8ca5512 ">View</a>


          </div>
          <div class="file-info">
              <span class="diffstat tooltipped tooltipped-e" aria-label="12 additions &amp; 1 deletion">13 <span class="diffstat-bar"><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span>&#xf053;</span></span>

            <span class="js-selectable-text" title="mapsforge-map/src/main/java/org/mapsforge/map/layer/download/tilesource/OpenStreetMapMapnik.java">
              ...ge-map/src/main/java/org/mapsforge/map/layer/download/tilesource/OpenStreetMapMapnik.java
            </span>
            
          </div>
        </div>

            <div class="data highlight blob-wrapper">
              <table class="diff-table tab-size  " data-tab-size="8">
                
      <tr class="js-expandable-line" data-position="0">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-ad33d28d492eaa2c045e576d17ab372c"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/576406e3a55dcc3d089e285866123767840f69c8?diff=unified&amp;left_hunk_size=9&amp;mode=100644&amp;next_line_num_left=21&amp;next_line_num_right=21&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fdownload%2Ftilesource%2FOpenStreetMapMapnik.java&amp;prev_line_num_left=&amp;prev_line_num_right=&amp;right_hunk_size=18"
            data-left-range="1-20" data-right-range="1-20">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -21,9 +21,18 @@</td>
  </tr>

    

<tr>
    <td id="diff-ad33d28d492eaa2c045e576d17ab372cL21" data-line-number="21"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-ad33d28d492eaa2c045e576d17ab372cR21" data-line-number="21"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-ad33d28d492eaa2c045e576d17ab372cL22" data-line-number="22"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-ad33d28d492eaa2c045e576d17ab372cR22" data-line-number="22"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">org.mapsforge.core.model.Tile</span>;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-ad33d28d492eaa2c045e576d17ab372cL23" data-line-number="23"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-ad33d28d492eaa2c045e576d17ab372cR23" data-line-number="23"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-ad33d28d492eaa2c045e576d17ab372cR24" data-line-number="24"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-ad33d28d492eaa2c045e576d17ab372cR25" data-line-number="25"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c"> * A tile source which fetches standard Mapnik tiles from OpenStreetMap.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-ad33d28d492eaa2c045e576d17ab372cR26" data-line-number="26"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c"> * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-ad33d28d492eaa2c045e576d17ab372cR27" data-line-number="27"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c"> * Layers using this tile source will enforce a time-to-live (TTL) of 8,279,000 milliseconds for cached tiles (unless</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-ad33d28d492eaa2c045e576d17ab372cR28" data-line-number="28"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c"> * the application explicitly sets a different TTL for that layer). The default TTL corresponds to the lifetime which</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-ad33d28d492eaa2c045e576d17ab372cR29" data-line-number="29"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c"> * the OSM server sets on a newly rendered tile.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-ad33d28d492eaa2c045e576d17ab372cR30" data-line-number="30"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c"> * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-ad33d28d492eaa2c045e576d17ab372cR31" data-line-number="31"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c"> * Refer to {@link org.mapsforge.map.layer.download.TileDownloadLayer} for details on the TTL mechanism.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-ad33d28d492eaa2c045e576d17ab372cR32" data-line-number="32"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c"> */</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-ad33d28d492eaa2c045e576d17ab372cL24" data-line-number="24"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-ad33d28d492eaa2c045e576d17ab372cR33" data-line-number="33"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">OpenStreetMapMapnik</span> <span class="pl-k">extends</span> <span class="pl-e">AbstractTileSource</span> {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-ad33d28d492eaa2c045e576d17ab372cL25" data-line-number="25"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-ad33d28d492eaa2c045e576d17ab372cR34" data-line-number="34"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-k">final</span> <span class="pl-smi">OpenStreetMapMapnik</span> <span class="pl-c1">INSTANCE</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">OpenStreetMapMapnik</span>(<span class="pl-k">new</span> <span class="pl-smi">String</span>[] {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-ad33d28d492eaa2c045e576d17ab372cL26" data-line-number="26"
        class="blob-num blob-num-deletion js-linkable-line-number"></td>

    <td class="blob-num blob-num-deletion empty-cell"></td>

  <td class="blob-code blob-code-deletion">

    <span class="blob-code-inner">-			<span class="pl-s"><span class="pl-pds">"</span>a.tile.openstreetmap.org<span class="pl-pds">"</span></span>,<span class="x x-first x-last">	</span><span class="pl-s"><span class="pl-pds">"</span>b.tile.openstreetmap.org<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>c.tile.openstreetmap.org<span class="pl-pds">"</span></span> }, <span class="pl-c1">80</span>);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-ad33d28d492eaa2c045e576d17ab372cR35" data-line-number="35"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-s"><span class="pl-pds">"</span>a.tile.openstreetmap.org<span class="pl-pds">"</span></span>,<span class="x x-first x-last"> </span><span class="pl-s"><span class="pl-pds">"</span>b.tile.openstreetmap.org<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>c.tile.openstreetmap.org<span class="pl-pds">"</span></span> }, <span class="pl-c1">80</span>);</span>

  </td>
</tr>


    

<tr>
    <td id="diff-ad33d28d492eaa2c045e576d17ab372cL27" data-line-number="27"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-ad33d28d492eaa2c045e576d17ab372cR36" data-line-number="36"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">private</span> <span class="pl-k">static</span> <span class="pl-k">final</span> <span class="pl-k">int</span> <span class="pl-c1">PARALLEL_REQUESTS_LIMIT</span> <span class="pl-k">=</span> <span class="pl-c1">8</span>;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-ad33d28d492eaa2c045e576d17ab372cL28" data-line-number="28"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-ad33d28d492eaa2c045e576d17ab372cR37" data-line-number="37"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">private</span> <span class="pl-k">static</span> <span class="pl-k">final</span> <span class="pl-smi">String</span> <span class="pl-c1">PROTOCOL</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>http<span class="pl-pds">&quot;</span></span>;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-ad33d28d492eaa2c045e576d17ab372cL29" data-line-number="29"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-ad33d28d492eaa2c045e576d17ab372cR38" data-line-number="38"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">private</span> <span class="pl-k">static</span> <span class="pl-k">final</span> <span class="pl-k">int</span> <span class="pl-c1">ZOOM_LEVEL_MAX</span> <span class="pl-k">=</span> <span class="pl-c1">18</span>;</span>

  </td>
</tr>


      <tr class="js-expandable-line" data-position="20">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-ad33d28d492eaa2c045e576d17ab372c"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/576406e3a55dcc3d089e285866123767840f69c8?diff=unified&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=31&amp;next_line_num_right=40&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fdownload%2Ftilesource%2FOpenStreetMapMapnik.java&amp;prev_line_num_left=29&amp;prev_line_num_right=38&amp;right_hunk_size=8"
            data-left-range="30-30" data-right-range="39-39">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -31,6 +40,8 @@</td>
  </tr>

    

<tr>
    <td id="diff-ad33d28d492eaa2c045e576d17ab372cL31" data-line-number="31"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-ad33d28d492eaa2c045e576d17ab372cR40" data-line-number="40"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-ad33d28d492eaa2c045e576d17ab372cL32" data-line-number="32"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-ad33d28d492eaa2c045e576d17ab372cR41" data-line-number="41"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">public</span> <span class="pl-en">OpenStreetMapMapnik</span>(<span class="pl-k">String</span>[] <span class="pl-v">hostNames</span>, <span class="pl-k">int</span> <span class="pl-v">port</span>) {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-ad33d28d492eaa2c045e576d17ab372cL33" data-line-number="33"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-ad33d28d492eaa2c045e576d17ab372cR42" data-line-number="42"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-v">super</span>(hostNames, port);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-ad33d28d492eaa2c045e576d17ab372cR43" data-line-number="43"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-c">/* Default TTL: 8279 seconds (the TTL currently set by the OSM server). */</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-ad33d28d492eaa2c045e576d17ab372cR44" data-line-number="44"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		defaultTimeToLive <span class="pl-k">=</span> <span class="pl-c1">8279000</span>;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-ad33d28d492eaa2c045e576d17ab372cL34" data-line-number="34"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-ad33d28d492eaa2c045e576d17ab372cR45" data-line-number="45"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-ad33d28d492eaa2c045e576d17ab372cL35" data-line-number="35"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-ad33d28d492eaa2c045e576d17ab372cR46" data-line-number="46"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-ad33d28d492eaa2c045e576d17ab372cL36" data-line-number="36"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-ad33d28d492eaa2c045e576d17ab372cR47" data-line-number="47"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">@Override</span></span>

  </td>
</tr>


  <tr class="js-expandable-line">
   <td class="blob-num blob-num-expandable" colspan="2">
     <a href="#diff-ad33d28d492eaa2c045e576d17ab372c"
          class="diff-expander js-expand" title="Expand" aria-label="Expand"
          data-url="/mapsforge/mapsforge/blob_excerpt/576406e3a55dcc3d089e285866123767840f69c8?diff=unified&amp;mode=100644&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fdownload%2Ftilesource%2FOpenStreetMapMapnik.java&amp;prev_line_num_left=36&amp;prev_line_num_right=47"
          data-left-range="37-82"
          data-right-range="48-82">
       <span class="octicon octicon-unfold"></span>
     </a>
   </td>
   <td class="blob-code blob-code-expandable"></td>
  </tr>

              </table>
            </div>
      </div>

      <a name="diff-3e97f983404ba33481d4cb82b4dac079"></a>
      <div id="diff-17"
           class="file js-details-container
                   
                   
                   
                   
                   show-inline-notes
                 ">
        <div class="file-header" data-path="mapsforge-map/src/main/java/org/mapsforge/map/layer/download/tilesource/TileSource.java">
          <div class="file-actions">
              <span class="show-file-notes">
                <label>
                  <input type="checkbox" checked="checked" class="js-toggle-file-notes">
                  Show notes
                </label>
              </span>

                <a href="/mvglasow/mapsforge/blob/8ca5512f3901939b98380b444ff1ec978fa2e742/mapsforge-map/src/main/java/org/mapsforge/map/layer/download/tilesource/TileSource.java" class="btn btn-sm tooltipped tooltipped-n" rel="nofollow" aria-label="View the whole file at version 8ca5512 ">View</a>


          </div>
          <div class="file-info">
              <span class="diffstat tooltipped tooltipped-e" aria-label="5 additions &amp; 0 deletions">5 <span class="diffstat-bar"><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span></span></span>

            <span class="js-selectable-text" title="mapsforge-map/src/main/java/org/mapsforge/map/layer/download/tilesource/TileSource.java">
              mapsforge-map/src/main/java/org/mapsforge/map/layer/download/tilesource/TileSource.java
            </span>
            
          </div>
        </div>

            <div class="data highlight blob-wrapper">
              <table class="diff-table tab-size  " data-tab-size="8">
                
      <tr class="js-expandable-line" data-position="0">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-3e97f983404ba33481d4cb82b4dac079"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/2ab47d0aadbe01e211080bb1951c580d40231581?diff=unified&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=22&amp;next_line_num_right=22&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fdownload%2Ftilesource%2FTileSource.java&amp;prev_line_num_left=&amp;prev_line_num_right=&amp;right_hunk_size=11"
            data-left-range="1-21" data-right-range="1-21">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -22,6 +22,11 @@</td>
  </tr>

    

<tr>
    <td id="diff-3e97f983404ba33481d4cb82b4dac079L22" data-line-number="22"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-3e97f983404ba33481d4cb82b4dac079R22" data-line-number="22"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-3e97f983404ba33481d4cb82b4dac079L23" data-line-number="23"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-3e97f983404ba33481d4cb82b4dac079R23" data-line-number="23"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-k">public</span> <span class="pl-k">interface</span> <span class="pl-en">TileSource</span> {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-3e97f983404ba33481d4cb82b4dac079L24" data-line-number="24"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-3e97f983404ba33481d4cb82b4dac079R24" data-line-number="24"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-3e97f983404ba33481d4cb82b4dac079R25" data-line-number="25"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Returns the default time-to-live (TTL) for cached tiles.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-3e97f983404ba33481d4cb82b4dac079R26" data-line-number="26"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-3e97f983404ba33481d4cb82b4dac079R27" data-line-number="27"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">long</span> <span class="pl-en">getDefaultTimeToLive</span>();</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-3e97f983404ba33481d4cb82b4dac079R28" data-line-number="28"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-3e97f983404ba33481d4cb82b4dac079R29" data-line-number="29"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-3e97f983404ba33481d4cb82b4dac079L25" data-line-number="25"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-3e97f983404ba33481d4cb82b4dac079R30" data-line-number="30"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 * @return the maximum number of parallel requests which this {@code TileSource} supports.</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-3e97f983404ba33481d4cb82b4dac079L26" data-line-number="26"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-3e97f983404ba33481d4cb82b4dac079R31" data-line-number="31"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-3e97f983404ba33481d4cb82b4dac079L27" data-line-number="27"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-3e97f983404ba33481d4cb82b4dac079R32" data-line-number="32"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">int</span> <span class="pl-en">getParallelRequestsLimit</span>();</span>

  </td>
</tr>


  <tr class="js-expandable-line">
   <td class="blob-num blob-num-expandable" colspan="2">
     <a href="#diff-3e97f983404ba33481d4cb82b4dac079"
          class="diff-expander js-expand" title="Expand" aria-label="Expand"
          data-url="/mapsforge/mapsforge/blob_excerpt/2ab47d0aadbe01e211080bb1951c580d40231581?diff=unified&amp;mode=100644&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fdownload%2Ftilesource%2FTileSource.java&amp;prev_line_num_left=27&amp;prev_line_num_right=32"
          data-left-range="28-54"
          data-right-range="33-54">
       <span class="octicon octicon-unfold"></span>
     </a>
   </td>
   <td class="blob-code blob-code-expandable"></td>
  </tr>

              </table>
            </div>
      </div>

      <a name="diff-f7c2910b8c1dba496c98e5108c8119d1"></a>
      <div id="diff-18"
           class="file js-details-container
                   
                   
                   
                   
                   show-inline-notes
                 ">
        <div class="file-header" data-path="mapsforge-map/src/main/java/org/mapsforge/map/layer/renderer/DatabaseRenderer.java">
          <div class="file-actions">
              <span class="show-file-notes">
                <label>
                  <input type="checkbox" checked="checked" class="js-toggle-file-notes">
                  Show notes
                </label>
              </span>

                <a href="/mvglasow/mapsforge/blob/8ca5512f3901939b98380b444ff1ec978fa2e742/mapsforge-map/src/main/java/org/mapsforge/map/layer/renderer/DatabaseRenderer.java" class="btn btn-sm tooltipped tooltipped-n" rel="nofollow" aria-label="View the whole file at version 8ca5512 ">View</a>


          </div>
          <div class="file-info">
              <span class="diffstat tooltipped tooltipped-e" aria-label="1 addition &amp; 0 deletions">1 <span class="diffstat-bar"><span class="text-diff-added">&#xf053;</span>&#xf053;&#xf053;&#xf053;&#xf053;</span></span>

            <span class="js-selectable-text" title="mapsforge-map/src/main/java/org/mapsforge/map/layer/renderer/DatabaseRenderer.java">
              mapsforge-map/src/main/java/org/mapsforge/map/layer/renderer/DatabaseRenderer.java
            </span>
            
          </div>
        </div>

            <div class="data highlight blob-wrapper">
              <table class="diff-table tab-size  " data-tab-size="8">
                
      <tr class="js-expandable-line" data-position="0">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-f7c2910b8c1dba496c98e5108c8119d1"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/74db7104c04595a3e5dc020037c0118ff4c3106e?diff=unified&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=199&amp;next_line_num_right=199&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Frenderer%2FDatabaseRenderer.java&amp;prev_line_num_left=&amp;prev_line_num_right=&amp;right_hunk_size=7"
            data-left-range="1-198" data-right-range="1-198">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -199,6 +199,7 @@ public TileBitmap executeJob(RendererJob rendererJob) {</td>
  </tr>

    

<tr>
    <td id="diff-f7c2910b8c1dba496c98e5108c8119d1L199" data-line-number="199"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f7c2910b8c1dba496c98e5108c8119d1R199" data-line-number="199"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-f7c2910b8c1dba496c98e5108c8119d1L200" data-line-number="200"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f7c2910b8c1dba496c98e5108c8119d1R200" data-line-number="200"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 			<span class="pl-k">if</span> (<span class="pl-k">!</span>rendererJob<span class="pl-k">.</span>labelsOnly) {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-f7c2910b8c1dba496c98e5108c8119d1L201" data-line-number="201"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f7c2910b8c1dba496c98e5108c8119d1R201" data-line-number="201"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 				bitmap <span class="pl-k">=</span> <span class="pl-v">this</span><span class="pl-k">.</span>graphicFactory<span class="pl-k">.</span>createTileBitmap(tileSize, rendererJob<span class="pl-k">.</span>hasAlpha);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-f7c2910b8c1dba496c98e5108c8119d1R202" data-line-number="202"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+				bitmap<span class="pl-k">.</span>setTimestamp(rendererJob<span class="pl-k">.</span>mapDataStore<span class="pl-k">.</span>getDataTimestamp(rendererJob<span class="pl-k">.</span>tile));</span>

  </td>
</tr>


    

<tr>
    <td id="diff-f7c2910b8c1dba496c98e5108c8119d1L202" data-line-number="202"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f7c2910b8c1dba496c98e5108c8119d1R203" data-line-number="203"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 				<span class="pl-v">this</span><span class="pl-k">.</span>canvasRasterer<span class="pl-k">.</span>setCanvasBitmap(bitmap);</span>

  </td>
</tr>


    

<tr>
    <td id="diff-f7c2910b8c1dba496c98e5108c8119d1L203" data-line-number="203"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f7c2910b8c1dba496c98e5108c8119d1R204" data-line-number="204"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 				<span class="pl-k">if</span> (<span class="pl-k">!</span>rendererJob<span class="pl-k">.</span>hasAlpha <span class="pl-k">&amp;&amp;</span> rendererJob<span class="pl-k">.</span>displayModel<span class="pl-k">.</span>getBackgroundColor() <span class="pl-k">!=</span> <span class="pl-v">this</span><span class="pl-k">.</span>renderTheme<span class="pl-k">.</span>getMapBackground()) {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-f7c2910b8c1dba496c98e5108c8119d1L204" data-line-number="204"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-f7c2910b8c1dba496c98e5108c8119d1R205" data-line-number="205"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 					<span class="pl-v">this</span><span class="pl-k">.</span>canvasRasterer<span class="pl-k">.</span>fill(<span class="pl-v">this</span><span class="pl-k">.</span>renderTheme<span class="pl-k">.</span>getMapBackground());</span>

  </td>
</tr>


  <tr class="js-expandable-line">
   <td class="blob-num blob-num-expandable" colspan="2">
     <a href="#diff-f7c2910b8c1dba496c98e5108c8119d1"
          class="diff-expander js-expand" title="Expand" aria-label="Expand"
          data-url="/mapsforge/mapsforge/blob_excerpt/74db7104c04595a3e5dc020037c0118ff4c3106e?diff=unified&amp;mode=100644&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Frenderer%2FDatabaseRenderer.java&amp;prev_line_num_left=204&amp;prev_line_num_right=205"
          data-left-range="205-482"
          data-right-range="206-482">
       <span class="octicon octicon-unfold"></span>
     </a>
   </td>
   <td class="blob-code blob-code-expandable"></td>
  </tr>

              </table>
            </div>
      </div>

      <a name="diff-d45c135464ff3bf28bcc4ba6c78435aa"></a>
      <div id="diff-19"
           class="file js-details-container
                   
                   
                   
                   
                   show-inline-notes
                 ">
        <div class="file-header" data-path="mapsforge-map/src/main/java/org/mapsforge/map/layer/renderer/TileRendererLayer.java">
          <div class="file-actions">
              <span class="show-file-notes">
                <label>
                  <input type="checkbox" checked="checked" class="js-toggle-file-notes">
                  Show notes
                </label>
              </span>

                <a href="/mvglasow/mapsforge/blob/8ca5512f3901939b98380b444ff1ec978fa2e742/mapsforge-map/src/main/java/org/mapsforge/map/layer/renderer/TileRendererLayer.java" class="btn btn-sm tooltipped tooltipped-n" rel="nofollow" aria-label="View the whole file at version 8ca5512 ">View</a>


          </div>
          <div class="file-info">
              <span class="diffstat tooltipped tooltipped-e" aria-label="25 additions &amp; 0 deletions">25 <span class="diffstat-bar"><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span></span></span>

            <span class="js-selectable-text" title="mapsforge-map/src/main/java/org/mapsforge/map/layer/renderer/TileRendererLayer.java">
              mapsforge-map/src/main/java/org/mapsforge/map/layer/renderer/TileRendererLayer.java
            </span>
            
          </div>
        </div>

            <div class="data highlight blob-wrapper">
              <table class="diff-table tab-size  " data-tab-size="8">
                
      <tr class="js-expandable-line" data-position="0">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-d45c135464ff3bf28bcc4ba6c78435aa"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/9a24f13953dbb2db37abef18159e00e442c5b891?diff=unified&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=17&amp;next_line_num_right=17&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Frenderer%2FTileRendererLayer.java&amp;prev_line_num_left=&amp;prev_line_num_right=&amp;right_hunk_size=7"
            data-left-range="1-16" data-right-range="1-16">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -17,6 +17,7 @@</td>
  </tr>

    

<tr>
    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaL17" data-line-number="17"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaR17" data-line-number="17"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-k">package</span> <span class="pl-smi">org.mapsforge.map.layer.renderer</span>;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaL18" data-line-number="18"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaR18" data-line-number="18"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaL19" data-line-number="19"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaR19" data-line-number="19"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">org.mapsforge.core.graphics.GraphicFactory</span>;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaR20" data-line-number="20"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-k">import</span> <span class="pl-smi">org.mapsforge.core.graphics.TileBitmap</span>;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaL20" data-line-number="20"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaR21" data-line-number="21"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">org.mapsforge.core.model.Tile</span>;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaL21" data-line-number="21"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaR22" data-line-number="22"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">org.mapsforge.map.layer.TileLayer</span>;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaL22" data-line-number="22"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaR23" data-line-number="23"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">org.mapsforge.map.layer.cache.TileCache</span>;</span>

  </td>
</tr>


      <tr class="js-expandable-line" data-position="8">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-d45c135464ff3bf28bcc4ba6c78435aa"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/9a24f13953dbb2db37abef18159e00e442c5b891?diff=unified&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=115&amp;next_line_num_right=116&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Frenderer%2FTileRendererLayer.java&amp;prev_line_num_left=22&amp;prev_line_num_right=23&amp;right_hunk_size=30"
            data-left-range="23-114" data-right-range="24-115">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -115,6 +116,30 @@ protected RendererJob createJob(Tile tile) {</td>
  </tr>

    

<tr>
    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaL115" data-line-number="115"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaR116" data-line-number="116"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 				<span class="pl-v">this</span><span class="pl-k">.</span>isTransparent, <span class="pl-c1">false</span>);</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaL116" data-line-number="116"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaR117" data-line-number="117"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaL117" data-line-number="117"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaR118" data-line-number="118"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaR119" data-line-number="119"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaR120" data-line-number="120"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Whether the tile is stale and should be refreshed.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaR121" data-line-number="121"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaR122" data-line-number="122"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * This method is called from {@link #draw(org.mapsforge.core.model.BoundingBox, byte, org.mapsforge.core.graphics.Canvas, org.mapsforge.core.model.Point)} to determine whether the tile needs to</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaR123" data-line-number="123"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * be refreshed.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaR124" data-line-number="124"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaR125" data-line-number="125"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * A tile is considered stale if the timestamp of the layer&#39;s {@link #mapDataStore} is more recent than the</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaR126" data-line-number="126"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * {@code bitmap}&#39;s {@link org.mapsforge.core.graphics.TileBitmap#getTimestamp()}.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaR127" data-line-number="127"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaR128" data-line-number="128"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * When a tile has become stale, the layer will first display the tile referenced by {@code bitmap} and attempt to</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaR129" data-line-number="129"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * obtain a fresh copy in the background. When a fresh copy becomes available, the layer will replace is and update</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaR130" data-line-number="130"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * the cache. If a fresh copy cannot be obtained for whatever reason, the stale tile will continue to be used until</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaR131" data-line-number="131"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * another {@code #draw(BoundingBox, byte, Canvas, Point)} operation requests it again.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaR132" data-line-number="132"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaR133" data-line-number="133"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param tile</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaR134" data-line-number="134"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            A tile.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaR135" data-line-number="135"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param bitmap</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaR136" data-line-number="136"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            The bitmap for {@code tile} currently held in the layer&#39;s cache.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaR137" data-line-number="137"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaR138" data-line-number="138"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">@Override</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaR139" data-line-number="139"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">protected</span> <span class="pl-k">boolean</span> <span class="pl-en">isTileStale</span>(<span class="pl-smi">Tile</span> <span class="pl-v">tile</span>, <span class="pl-smi">TileBitmap</span> <span class="pl-v">bitmap</span>) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaR140" data-line-number="140"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">return</span> <span class="pl-v">this</span><span class="pl-k">.</span>mapDataStore<span class="pl-k">.</span>getDataTimestamp(tile) <span class="pl-k">&gt;</span> bitmap<span class="pl-k">.</span>getTimestamp();</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaR141" data-line-number="141"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaR142" data-line-number="142"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaL118" data-line-number="118"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaR143" data-line-number="143"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">@Override</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaL119" data-line-number="119"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaR144" data-line-number="144"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">protected</span> <span class="pl-k">void</span> <span class="pl-en">onAdd</span>() {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaL120" data-line-number="120"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-d45c135464ff3bf28bcc4ba6c78435aaR145" data-line-number="145"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-v">this</span><span class="pl-k">.</span>mapWorker<span class="pl-k">.</span>proceed();</span>

  </td>
</tr>


  <tr class="js-expandable-line">
   <td class="blob-num blob-num-expandable" colspan="2">
     <a href="#diff-d45c135464ff3bf28bcc4ba6c78435aa"
          class="diff-expander js-expand" title="Expand" aria-label="Expand"
          data-url="/mapsforge/mapsforge/blob_excerpt/9a24f13953dbb2db37abef18159e00e442c5b891?diff=unified&amp;mode=100644&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Frenderer%2FTileRendererLayer.java&amp;prev_line_num_left=120&amp;prev_line_num_right=145"
          data-left-range="121-163"
          data-right-range="146-163">
       <span class="octicon octicon-unfold"></span>
     </a>
   </td>
   <td class="blob-code blob-code-expandable"></td>
  </tr>

              </table>
            </div>
      </div>

      <a name="diff-9016c0aa280b7db90ee97980af5a984d"></a>
      <div id="diff-20"
           class="file js-details-container
                   
                   
                   
                   
                   show-inline-notes
                 ">
        <div class="file-header" data-path="mapsforge-map/src/main/java/org/mapsforge/map/layer/tilestore/TileStoreLayer.java">
          <div class="file-actions">
              <span class="show-file-notes">
                <label>
                  <input type="checkbox" checked="checked" class="js-toggle-file-notes">
                  Show notes
                </label>
              </span>

                <a href="/mvglasow/mapsforge/blob/8ca5512f3901939b98380b444ff1ec978fa2e742/mapsforge-map/src/main/java/org/mapsforge/map/layer/tilestore/TileStoreLayer.java" class="btn btn-sm tooltipped tooltipped-n" rel="nofollow" aria-label="View the whole file at version 8ca5512 ">View</a>


          </div>
          <div class="file-info">
              <span class="diffstat tooltipped tooltipped-e" aria-label="15 additions &amp; 0 deletions">15 <span class="diffstat-bar"><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span></span></span>

            <span class="js-selectable-text" title="mapsforge-map/src/main/java/org/mapsforge/map/layer/tilestore/TileStoreLayer.java">
              mapsforge-map/src/main/java/org/mapsforge/map/layer/tilestore/TileStoreLayer.java
            </span>
            
          </div>
        </div>

            <div class="data highlight blob-wrapper">
              <table class="diff-table tab-size  " data-tab-size="8">
                
      <tr class="js-expandable-line" data-position="0">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-9016c0aa280b7db90ee97980af5a984d"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/7e427896e6ed5865a6461f8c88e40f1a1be2ccfd?diff=unified&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=15&amp;next_line_num_right=15&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Ftilestore%2FTileStoreLayer.java&amp;prev_line_num_left=&amp;prev_line_num_right=&amp;right_hunk_size=7"
            data-left-range="1-14" data-right-range="1-14">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -15,6 +15,7 @@</td>
  </tr>

    

<tr>
    <td id="diff-9016c0aa280b7db90ee97980af5a984dL15" data-line-number="15"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-9016c0aa280b7db90ee97980af5a984dR15" data-line-number="15"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-k">package</span> <span class="pl-smi">org.mapsforge.map.layer.tilestore</span>;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-9016c0aa280b7db90ee97980af5a984dL16" data-line-number="16"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-9016c0aa280b7db90ee97980af5a984dR16" data-line-number="16"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-9016c0aa280b7db90ee97980af5a984dL17" data-line-number="17"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-9016c0aa280b7db90ee97980af5a984dR17" data-line-number="17"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">org.mapsforge.core.graphics.GraphicFactory</span>;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-9016c0aa280b7db90ee97980af5a984dR18" data-line-number="18"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-k">import</span> <span class="pl-smi">org.mapsforge.core.graphics.TileBitmap</span>;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-9016c0aa280b7db90ee97980af5a984dL18" data-line-number="18"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-9016c0aa280b7db90ee97980af5a984dR19" data-line-number="19"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">org.mapsforge.core.model.Tile</span>;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-9016c0aa280b7db90ee97980af5a984dL19" data-line-number="19"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-9016c0aa280b7db90ee97980af5a984dR20" data-line-number="20"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">org.mapsforge.map.layer.TileLayer</span>;</span>

  </td>
</tr>


    

<tr>
    <td id="diff-9016c0aa280b7db90ee97980af5a984dL20" data-line-number="20"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-9016c0aa280b7db90ee97980af5a984dR21" data-line-number="21"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">org.mapsforge.map.layer.cache.TileCache</span>;</span>

  </td>
</tr>


      <tr class="js-expandable-line" data-position="8">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-9016c0aa280b7db90ee97980af5a984d"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/7e427896e6ed5865a6461f8c88e40f1a1be2ccfd?diff=unified&amp;left_hunk_size=4&amp;mode=100644&amp;next_line_num_left=33&amp;next_line_num_right=34&amp;path=mapsforge-map%2Fsrc%2Fmain%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Ftilestore%2FTileStoreLayer.java&amp;prev_line_num_left=20&amp;prev_line_num_right=21&amp;right_hunk_size=18"
            data-left-range="21-32" data-right-range="22-33">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -33,4 +34,18 @@ protected Job createJob(Tile tile) {</td>
  </tr>

    

<tr>
    <td id="diff-9016c0aa280b7db90ee97980af5a984dL33" data-line-number="33"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-9016c0aa280b7db90ee97980af5a984dR34" data-line-number="34"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-smi">Job</span>(tile, isTransparent);</span>

  </td>
</tr>


    

<tr>
    <td id="diff-9016c0aa280b7db90ee97980af5a984dL34" data-line-number="34"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-9016c0aa280b7db90ee97980af5a984dR35" data-line-number="35"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-9016c0aa280b7db90ee97980af5a984dL35" data-line-number="35"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-9016c0aa280b7db90ee97980af5a984dR36" data-line-number="36"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-9016c0aa280b7db90ee97980af5a984dR37" data-line-number="37"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-9016c0aa280b7db90ee97980af5a984dR38" data-line-number="38"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Whether the tile is stale and should be refreshed.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-9016c0aa280b7db90ee97980af5a984dR39" data-line-number="39"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-9016c0aa280b7db90ee97980af5a984dR40" data-line-number="40"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * This method is not needed for a TileStoreLayer and will always return {@code false}. Both arguments can be null.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-9016c0aa280b7db90ee97980af5a984dR41" data-line-number="41"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-9016c0aa280b7db90ee97980af5a984dR42" data-line-number="42"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param tile</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-9016c0aa280b7db90ee97980af5a984dR43" data-line-number="43"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            A tile.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-9016c0aa280b7db90ee97980af5a984dR44" data-line-number="44"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * @param bitmap</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-9016c0aa280b7db90ee97980af5a984dR45" data-line-number="45"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 *            The bitmap for {@code tile} currently held in the layer&#39;s cache.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-9016c0aa280b7db90ee97980af5a984dR46" data-line-number="46"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-9016c0aa280b7db90ee97980af5a984dR47" data-line-number="47"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">@Override</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-9016c0aa280b7db90ee97980af5a984dR48" data-line-number="48"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">protected</span> <span class="pl-k">boolean</span> <span class="pl-en">isTileStale</span>(<span class="pl-smi">Tile</span> <span class="pl-v">tile</span>, <span class="pl-smi">TileBitmap</span> <span class="pl-v">bitmap</span>) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-9016c0aa280b7db90ee97980af5a984dR49" data-line-number="49"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">return</span> <span class="pl-c1">false</span>;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-9016c0aa280b7db90ee97980af5a984dR50" data-line-number="50"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-9016c0aa280b7db90ee97980af5a984dL36" data-line-number="36"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-9016c0aa280b7db90ee97980af5a984dR51" data-line-number="51"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> }</span>

  </td>
</tr>



              </table>
            </div>
      </div>

      <a name="diff-82478367ef5e26c6da0e6ca5af9de9c6"></a>
      <div id="diff-21"
           class="file js-details-container
                   
                   
                   
                   
                   show-inline-notes
                 ">
        <div class="file-header" data-path="mapsforge-map/src/test/java/org/mapsforge/map/layer/cache/FileSystemTileCacheTest.java">
          <div class="file-actions">
              <span class="show-file-notes">
                <label>
                  <input type="checkbox" checked="checked" class="js-toggle-file-notes">
                  Show notes
                </label>
              </span>

                <a href="/mvglasow/mapsforge/blob/8ca5512f3901939b98380b444ff1ec978fa2e742/mapsforge-map/src/test/java/org/mapsforge/map/layer/cache/FileSystemTileCacheTest.java" class="btn btn-sm tooltipped tooltipped-n" rel="nofollow" aria-label="View the whole file at version 8ca5512 ">View</a>


          </div>
          <div class="file-info">
              <span class="diffstat tooltipped tooltipped-e" aria-label="113 additions &amp; 0 deletions">113 <span class="diffstat-bar"><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span></span></span>

            <span class="js-selectable-text" title="mapsforge-map/src/test/java/org/mapsforge/map/layer/cache/FileSystemTileCacheTest.java">
              mapsforge-map/src/test/java/org/mapsforge/map/layer/cache/FileSystemTileCacheTest.java
            </span>
            
          </div>
        </div>

            <div class="data highlight blob-wrapper">
              <table class="diff-table tab-size  " data-tab-size="8">
                
      <tr class="js-expandable-line" data-position="0">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-82478367ef5e26c6da0e6ca5af9de9c6"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/3bf82e921abcd69ba28fa327164cbba43149b501?diff=unified&amp;left_hunk_size=4&amp;mode=100644&amp;next_line_num_left=282&amp;next_line_num_right=282&amp;path=mapsforge-map%2Fsrc%2Ftest%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fcache%2FFileSystemTileCacheTest.java&amp;prev_line_num_left=&amp;prev_line_num_right=&amp;right_hunk_size=117"
            data-left-range="1-281" data-right-range="1-281">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -282,4 +282,117 @@ public void invalidPutTest() {</td>
  </tr>

    

<tr>
    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6L282" data-line-number="282"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R282" data-line-number="282"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 					<span class="pl-smi">OpenStreetMapMapnik</span><span class="pl-c1"><span class="pl-k">.</span>INSTANCE</span>), <span class="pl-c1">null</span>);</span>

  </td>
</tr>


    

<tr>
    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6L283" data-line-number="283"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R283" data-line-number="283"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6L284" data-line-number="284"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R284" data-line-number="284"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R285" data-line-number="285"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R286" data-line-number="286"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-c">/**</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R287" data-line-number="287"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * Tests specific behavior of a persistent tile cache.</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R288" data-line-number="288"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;p&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R289" data-line-number="289"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * This test creates a persistent cache instance with a cache size of 2, requests two tiles and destroys the</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R290" data-line-number="290"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * instance. Then it creates another persistent cache instance in the same cache directory with a size of 3 and</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R291" data-line-number="291"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * performs the following tests:</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R292" data-line-number="292"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;ul&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R293" data-line-number="293"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;li&gt;Request the tiles cached by the previous instance and verify its content.&lt;/li&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R294" data-line-number="294"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;li&gt;Request two new tiles (thus exceeding the cache size) and verify the oldest tile of the previous instance is</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R295" data-line-number="295"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * no longer in the cache&lt;/li&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R296" data-line-number="296"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;li&gt;Purge the cache and verify none of the tiles are available from it any more&lt;/li&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R297" data-line-number="297"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 * &lt;/ul&gt;</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R298" data-line-number="298"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+<span class="pl-c">	 */</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R299" data-line-number="299"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">@Test</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R300" data-line-number="300"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">persistentCacheTest</span>() {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R301" data-line-number="301"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">int</span> i;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R302" data-line-number="302"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">int</span> tileSize <span class="pl-k">=</span> <span class="pl-c1">TILE_SIZES</span>[<span class="pl-c1">0</span>];</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R303" data-line-number="303"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-smi">TileSource</span> tileSource <span class="pl-k">=</span> <span class="pl-smi">OpenStreetMapMapnik</span><span class="pl-c1"><span class="pl-k">.</span>INSTANCE</span>;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R304" data-line-number="304"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-smi">FileSystemTileCache</span> tileCache1;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R305" data-line-number="305"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-smi">FileSystemTileCache</span> tileCache2;</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R306" data-line-number="306"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">Tile</span>[] tile <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">Tile</span>[<span class="pl-c1">4</span>];</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R307" data-line-number="307"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">Job</span>[] job <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">Job</span>[<span class="pl-c1">4</span>];</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R308" data-line-number="308"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">TileBitmap</span>[] bitmap <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">TileBitmap</span>[<span class="pl-c1">4</span>];</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R309" data-line-number="309"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R310" data-line-number="310"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-smi">Assert</span><span class="pl-k">.</span>assertFalse(<span class="pl-v">this</span><span class="pl-k">.</span>cacheDirectory<span class="pl-k">.</span>exists());</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R311" data-line-number="311"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R312" data-line-number="312"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		tileCache1 <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">FileSystemTileCache</span>(<span class="pl-c1">2</span>, <span class="pl-v">this</span><span class="pl-k">.</span>cacheDirectory, <span class="pl-c1">GRAPHIC_FACTORY</span>, <span class="pl-c1">false</span>, <span class="pl-c1">0</span>, <span class="pl-c1">true</span>);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R313" data-line-number="313"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R314" data-line-number="314"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-smi">Assert</span><span class="pl-k">.</span>assertEquals(<span class="pl-c1">2</span>, tileCache1<span class="pl-k">.</span>getCapacity());</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R315" data-line-number="315"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-smi">Assert</span><span class="pl-k">.</span>assertTrue(<span class="pl-v">this</span><span class="pl-k">.</span>cacheDirectory<span class="pl-k">.</span>exists());</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R316" data-line-number="316"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-smi">Assert</span><span class="pl-k">.</span>assertEquals(<span class="pl-c1">0</span>, <span class="pl-v">this</span><span class="pl-k">.</span>cacheDirectory<span class="pl-k">.</span>list()<span class="pl-k">.</span>length);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R317" data-line-number="317"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R318" data-line-number="318"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">for</span> (i <span class="pl-k">=</span> <span class="pl-c1">0</span>; i <span class="pl-k">&lt;</span> <span class="pl-c1">4</span>; i<span class="pl-k">++</span>) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R319" data-line-number="319"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			tile[i] <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">Tile</span>(i, <span class="pl-c1">0</span>, (<span class="pl-k">byte</span>) <span class="pl-c1">4</span>, tileSize);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R320" data-line-number="320"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			job[i] <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">DownloadJob</span>(tile[i], tileSource);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R321" data-line-number="321"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			bitmap[i] <span class="pl-k">=</span> <span class="pl-c1">GRAPHIC_FACTORY</span><span class="pl-k">.</span>createTileBitmap(tileSize, <span class="pl-c1">false</span>);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R322" data-line-number="322"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R323" data-line-number="323"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-smi">Assert</span><span class="pl-k">.</span>assertFalse(tileCache1<span class="pl-k">.</span>containsKey(job[i]));</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R324" data-line-number="324"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-smi">Assert</span><span class="pl-k">.</span>assertNull(tileCache1<span class="pl-k">.</span>get(job[i]));</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R325" data-line-number="325"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R326" data-line-number="326"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R327" data-line-number="327"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">for</span> (i <span class="pl-k">=</span> <span class="pl-c1">0</span>; i <span class="pl-k">&lt;</span> <span class="pl-c1">2</span>; i<span class="pl-k">++</span>) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R328" data-line-number="328"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			tileCache1<span class="pl-k">.</span>put(job[i], bitmap[i]);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R329" data-line-number="329"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-k">while</span> (<span class="pl-c1">0</span> <span class="pl-k">!=</span> tileCache1<span class="pl-k">.</span>getQueueLength()) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R330" data-line-number="330"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+				<span class="pl-k">try</span> {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R331" data-line-number="331"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+					<span class="pl-c">// wait for threaded tile cache</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R332" data-line-number="332"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+					<span class="pl-smi">Thread</span><span class="pl-k">.</span>sleep(<span class="pl-c1">100</span>);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R333" data-line-number="333"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+				} <span class="pl-k">catch</span> (<span class="pl-smi">Exception</span> e) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R334" data-line-number="334"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+				}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R335" data-line-number="335"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R336" data-line-number="336"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R337" data-line-number="337"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-smi">Assert</span><span class="pl-k">.</span>assertTrue(tileCache1<span class="pl-k">.</span>containsKey(job[i]));</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R338" data-line-number="338"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			verifyEquals(bitmap[i], tileCache1<span class="pl-k">.</span>get(job[i]));</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R339" data-line-number="339"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R340" data-line-number="340"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-k">try</span> {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R341" data-line-number="341"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+				<span class="pl-c">// make sure timestamps are sufficiently far apart (old FAT implementations have 2s resolution)</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R342" data-line-number="342"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+				<span class="pl-smi">Thread</span><span class="pl-k">.</span>sleep(<span class="pl-c1">2000</span>);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R343" data-line-number="343"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			} <span class="pl-k">catch</span> (<span class="pl-smi">Exception</span> e) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R344" data-line-number="344"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R345" data-line-number="345"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R346" data-line-number="346"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R347" data-line-number="347"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">for</span> (i <span class="pl-k">=</span> <span class="pl-c1">2</span>; i <span class="pl-k">&lt;</span> <span class="pl-c1">4</span>; i<span class="pl-k">++</span>) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R348" data-line-number="348"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-smi">Assert</span><span class="pl-k">.</span>assertFalse(tileCache1<span class="pl-k">.</span>containsKey(job[i]));</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R349" data-line-number="349"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-smi">Assert</span><span class="pl-k">.</span>assertNull(tileCache1<span class="pl-k">.</span>get(job[i]));</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R350" data-line-number="350"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R351" data-line-number="351"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R352" data-line-number="352"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		tileCache1<span class="pl-k">.</span>destroy();</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R353" data-line-number="353"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R354" data-line-number="354"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-smi">Assert</span><span class="pl-k">.</span>assertTrue(<span class="pl-v">this</span><span class="pl-k">.</span>cacheDirectory<span class="pl-k">.</span>exists());</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R355" data-line-number="355"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R356" data-line-number="356"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		tileCache2 <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">FileSystemTileCache</span>(<span class="pl-c1">3</span>, <span class="pl-v">this</span><span class="pl-k">.</span>cacheDirectory, <span class="pl-c1">GRAPHIC_FACTORY</span>, <span class="pl-c1">false</span>, <span class="pl-c1">0</span>, <span class="pl-c1">true</span>);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R357" data-line-number="357"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R358" data-line-number="358"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-smi">Assert</span><span class="pl-k">.</span>assertEquals(<span class="pl-c1">3</span>, tileCache2<span class="pl-k">.</span>getCapacity());</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R359" data-line-number="359"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-smi">Assert</span><span class="pl-k">.</span>assertTrue(<span class="pl-v">this</span><span class="pl-k">.</span>cacheDirectory<span class="pl-k">.</span>exists());</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R360" data-line-number="360"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R361" data-line-number="361"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">for</span> (i <span class="pl-k">=</span> <span class="pl-c1">0</span>; i <span class="pl-k">&lt;</span> <span class="pl-c1">2</span>; i<span class="pl-k">++</span>) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R362" data-line-number="362"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-smi">Assert</span><span class="pl-k">.</span>assertTrue(tileCache2<span class="pl-k">.</span>containsKey(job[i]));</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R363" data-line-number="363"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-smi">Assert</span><span class="pl-k">.</span>assertNotNull(tileCache2<span class="pl-k">.</span>get(job[i]));</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R364" data-line-number="364"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			verifyEquals(bitmap[i], tileCache2<span class="pl-k">.</span>get(job[i]));</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R365" data-line-number="365"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R366" data-line-number="366"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R367" data-line-number="367"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">for</span> (i <span class="pl-k">=</span> <span class="pl-c1">2</span>; i <span class="pl-k">&lt;</span> <span class="pl-c1">4</span>; i<span class="pl-k">++</span>) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R368" data-line-number="368"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-smi">Assert</span><span class="pl-k">.</span>assertFalse(tileCache2<span class="pl-k">.</span>containsKey(job[i]));</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R369" data-line-number="369"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-smi">Assert</span><span class="pl-k">.</span>assertNull(tileCache2<span class="pl-k">.</span>get(job[i]));</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R370" data-line-number="370"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R371" data-line-number="371"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			tileCache2<span class="pl-k">.</span>put(job[i], bitmap[i]);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R372" data-line-number="372"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-k">while</span> (<span class="pl-c1">0</span> <span class="pl-k">!=</span> tileCache2<span class="pl-k">.</span>getQueueLength()) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R373" data-line-number="373"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+				<span class="pl-k">try</span> {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R374" data-line-number="374"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+					<span class="pl-c">// wait for threaded tile cache</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R375" data-line-number="375"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+					<span class="pl-smi">Thread</span><span class="pl-k">.</span>sleep(<span class="pl-c1">100</span>);</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R376" data-line-number="376"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+				} <span class="pl-k">catch</span> (<span class="pl-smi">Exception</span> e) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R377" data-line-number="377"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+				}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R378" data-line-number="378"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R379" data-line-number="379"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R380" data-line-number="380"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-smi">Assert</span><span class="pl-k">.</span>assertTrue(tileCache2<span class="pl-k">.</span>containsKey(job[i]));</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R381" data-line-number="381"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			verifyEquals(bitmap[i], tileCache2<span class="pl-k">.</span>get(job[i]));</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R382" data-line-number="382"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R383" data-line-number="383"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R384" data-line-number="384"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-smi">Assert</span><span class="pl-k">.</span>assertFalse(tileCache2<span class="pl-k">.</span>containsKey(job[<span class="pl-c1">0</span>]));</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R385" data-line-number="385"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-smi">Assert</span><span class="pl-k">.</span>assertNull(tileCache2<span class="pl-k">.</span>get(job[<span class="pl-c1">0</span>]));</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R386" data-line-number="386"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-smi">Assert</span><span class="pl-k">.</span>assertTrue(tileCache2<span class="pl-k">.</span>containsKey(job[<span class="pl-c1">1</span>]));</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R387" data-line-number="387"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		verifyEquals(bitmap[<span class="pl-c1">1</span>], tileCache2<span class="pl-k">.</span>get(job[<span class="pl-c1">1</span>]));</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R388" data-line-number="388"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R389" data-line-number="389"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		tileCache2<span class="pl-k">.</span>purge();</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R390" data-line-number="390"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R391" data-line-number="391"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">for</span> (i <span class="pl-k">=</span> <span class="pl-c1">0</span>; i <span class="pl-k">&lt;</span> <span class="pl-c1">4</span>; i<span class="pl-k">++</span>) {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R392" data-line-number="392"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-smi">Assert</span><span class="pl-k">.</span>assertFalse(tileCache2<span class="pl-k">.</span>containsKey(job[i]));</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R393" data-line-number="393"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+			<span class="pl-smi">Assert</span><span class="pl-k">.</span>assertNull(tileCache2<span class="pl-k">.</span>get(job[i]));</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R394" data-line-number="394"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R395" data-line-number="395"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R396" data-line-number="396"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		tileCache2<span class="pl-k">.</span>destroy();</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R397" data-line-number="397"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	}</span>

  </td>
</tr>


    

<tr>
    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6L285" data-line-number="285"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-82478367ef5e26c6da0e6ca5af9de9c6R398" data-line-number="398"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> }</span>

  </td>
</tr>



              </table>
            </div>
      </div>

      <a name="diff-8d035d0d9b392884d24644d9a5b0cb7b"></a>
      <div id="diff-22"
           class="file js-details-container
                   
                   
                   
                   
                   show-inline-notes
                 ">
        <div class="file-header" data-path="mapsforge-map/src/test/java/org/mapsforge/map/layer/download/InvalidTileSource.java">
          <div class="file-actions">
              <span class="show-file-notes">
                <label>
                  <input type="checkbox" checked="checked" class="js-toggle-file-notes">
                  Show notes
                </label>
              </span>

                <a href="/mvglasow/mapsforge/blob/8ca5512f3901939b98380b444ff1ec978fa2e742/mapsforge-map/src/test/java/org/mapsforge/map/layer/download/InvalidTileSource.java" class="btn btn-sm tooltipped tooltipped-n" rel="nofollow" aria-label="View the whole file at version 8ca5512 ">View</a>


          </div>
          <div class="file-info">
              <span class="diffstat tooltipped tooltipped-e" aria-label="5 additions &amp; 0 deletions">5 <span class="diffstat-bar"><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span><span class="text-diff-added">&#xf053;</span></span></span>

            <span class="js-selectable-text" title="mapsforge-map/src/test/java/org/mapsforge/map/layer/download/InvalidTileSource.java">
              mapsforge-map/src/test/java/org/mapsforge/map/layer/download/InvalidTileSource.java
            </span>
            
          </div>
        </div>

            <div class="data highlight blob-wrapper">
              <table class="diff-table tab-size  " data-tab-size="8">
                
      <tr class="js-expandable-line" data-position="0">
    <td class="blob-num blob-num-expandable" colspan="2">
      <a href="#diff-8d035d0d9b392884d24644d9a5b0cb7b"
            class="diff-expander js-expand" title="Expand" aria-label="Expand"
            data-url="/mapsforge/mapsforge/blob_excerpt/f61b3a1f1b3eeb7a37e03a1aa14e9398818fe9a2?diff=unified&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=22&amp;next_line_num_right=22&amp;path=mapsforge-map%2Fsrc%2Ftest%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fdownload%2FInvalidTileSource.java&amp;prev_line_num_left=&amp;prev_line_num_right=&amp;right_hunk_size=11"
            data-left-range="1-21" data-right-range="1-21">
        <span class="octicon octicon-unfold"></span>
      </a>
    </td>
    <td class="blob-code blob-code-inner blob-code-hunk">@@ -22,6 +22,11 @@</td>
  </tr>

    

<tr>
    <td id="diff-8d035d0d9b392884d24644d9a5b0cb7bL22" data-line-number="22"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8d035d0d9b392884d24644d9a5b0cb7bR22" data-line-number="22"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> </span>

  </td>
</tr>


    

<tr>
    <td id="diff-8d035d0d9b392884d24644d9a5b0cb7bL23" data-line-number="23"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8d035d0d9b392884d24644d9a5b0cb7bR23" data-line-number="23"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> <span class="pl-k">class</span> <span class="pl-en">InvalidTileSource</span> <span class="pl-k">implements</span> <span class="pl-e">TileSource</span> {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-8d035d0d9b392884d24644d9a5b0cb7bL24" data-line-number="24"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8d035d0d9b392884d24644d9a5b0cb7bR24" data-line-number="24"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">@Override</span></span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8d035d0d9b392884d24644d9a5b0cb7bR25" data-line-number="25"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">public</span> <span class="pl-k">long</span> <span class="pl-en">getDefaultTimeToLive</span>() {</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8d035d0d9b392884d24644d9a5b0cb7bR26" data-line-number="26"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+		<span class="pl-k">throw</span> <span class="pl-k">new</span> <span class="pl-smi">AssertionError</span>();</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8d035d0d9b392884d24644d9a5b0cb7bR27" data-line-number="27"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	}</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8d035d0d9b392884d24644d9a5b0cb7bR28" data-line-number="28"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+</span>

  </td>
</tr>


    

<tr>
    <td class="blob-num blob-num-addition empty-cell"></td>

    <td id="diff-8d035d0d9b392884d24644d9a5b0cb7bR29" data-line-number="29"
        class="blob-num blob-num-addition js-linkable-line-number"></td>

  <td class="blob-code blob-code-addition">

    <span class="blob-code-inner">+	<span class="pl-k">@Override</span></span>

  </td>
</tr>


    

<tr>
    <td id="diff-8d035d0d9b392884d24644d9a5b0cb7bL25" data-line-number="25"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8d035d0d9b392884d24644d9a5b0cb7bR30" data-line-number="30"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	<span class="pl-k">public</span> <span class="pl-k">int</span> <span class="pl-en">getParallelRequestsLimit</span>() {</span>

  </td>
</tr>


    

<tr>
    <td id="diff-8d035d0d9b392884d24644d9a5b0cb7bL26" data-line-number="26"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8d035d0d9b392884d24644d9a5b0cb7bR31" data-line-number="31"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 		<span class="pl-k">throw</span> <span class="pl-k">new</span> <span class="pl-smi">AssertionError</span>();</span>

  </td>
</tr>


    

<tr>
    <td id="diff-8d035d0d9b392884d24644d9a5b0cb7bL27" data-line-number="27"
        class="blob-num blob-num-context js-linkable-line-number"></td>

    <td id="diff-8d035d0d9b392884d24644d9a5b0cb7bR32" data-line-number="32"
        class="blob-num blob-num-context js-linkable-line-number"></td>

  <td class="blob-code blob-code-context">

    <span class="blob-code-inner"> 	}</span>

  </td>
</tr>


  <tr class="js-expandable-line">
   <td class="blob-num blob-num-expandable" colspan="2">
     <a href="#diff-8d035d0d9b392884d24644d9a5b0cb7b"
          class="diff-expander js-expand" title="Expand" aria-label="Expand"
          data-url="/mapsforge/mapsforge/blob_excerpt/f61b3a1f1b3eeb7a37e03a1aa14e9398818fe9a2?diff=unified&amp;mode=100644&amp;path=mapsforge-map%2Fsrc%2Ftest%2Fjava%2Forg%2Fmapsforge%2Fmap%2Flayer%2Fdownload%2FInvalidTileSource.java&amp;prev_line_num_left=27&amp;prev_line_num_right=32"
          data-left-range="28-53"
          data-right-range="33-53">
       <span class="octicon octicon-unfold"></span>
     </a>
   </td>
   <td class="blob-code blob-code-expandable"></td>
  </tr>

              </table>
            </div>
      </div>
</div>

<button class="js-toggle-all-file-notes" data-hotkey="i" style="display:none">Toggle all file notes</button>

      </div>

      

    <div class="clearfix"></div>


    </div>

</div>

</div>


        </div>
      </div>
      <div class="modal-backdrop"></div>
    </div>
  </div>


    </div><!-- /.wrapper -->

      <div class="container">
  <div class="site-footer" role="contentinfo">
    <ul class="site-footer-links right">
        <li><a href="https://status.github.com/" data-ga-click="Footer, go to status, text:status">Status</a></li>
      <li><a href="https://developer.github.com" data-ga-click="Footer, go to api, text:api">API</a></li>
      <li><a href="https://training.github.com" data-ga-click="Footer, go to training, text:training">Training</a></li>
      <li><a href="https://shop.github.com" data-ga-click="Footer, go to shop, text:shop">Shop</a></li>
        <li><a href="https://github.com/blog" data-ga-click="Footer, go to blog, text:blog">Blog</a></li>
        <li><a href="https://github.com/about" data-ga-click="Footer, go to about, text:about">About</a></li>
        <li><a href="https://github.com/pricing" data-ga-click="Footer, go to pricing, text:pricing">Pricing</a></li>

    </ul>

    <a href="https://github.com" aria-label="Homepage">
      <span class="mega-octicon octicon-mark-github" title="GitHub"></span>
</a>
    <ul class="site-footer-links">
      <li>&copy; 2015 <span title="0.94286s from github-fe130-cp1-prd.iad.github.net">GitHub</span>, Inc.</li>
        <li><a href="https://github.com/site/terms" data-ga-click="Footer, go to terms, text:terms">Terms</a></li>
        <li><a href="https://github.com/site/privacy" data-ga-click="Footer, go to privacy, text:privacy">Privacy</a></li>
        <li><a href="https://github.com/security" data-ga-click="Footer, go to security, text:security">Security</a></li>
        <li><a href="https://github.com/contact" data-ga-click="Footer, go to contact, text:contact">Contact</a></li>
        <li><a href="https://help.github.com" data-ga-click="Footer, go to help, text:help">Help</a></li>
    </ul>
  </div>
</div>


    <div class="fullscreen-overlay js-fullscreen-overlay" id="fullscreen_overlay">
  <div class="fullscreen-container js-suggester-container">
    <div class="textarea-wrap">
      <textarea name="fullscreen-contents" id="fullscreen-contents" class="fullscreen-contents js-fullscreen-contents" placeholder="" aria-label=""></textarea>
      <div class="suggester-container">
        <div class="suggester fullscreen-suggester js-suggester js-navigation-container"></div>
      </div>
    </div>
  </div>
  <div class="fullscreen-sidebar">
    <a href="#" class="exit-fullscreen js-exit-fullscreen tooltipped tooltipped-w" aria-label="Exit Zen Mode">
      <span class="mega-octicon octicon-screen-normal"></span>
    </a>
    <a href="#" class="theme-switcher js-theme-switcher tooltipped tooltipped-w"
      aria-label="Switch themes">
      <span class="octicon octicon-color-mode"></span>
    </a>
  </div>
</div>



    
    

    <div id="ajax-error-message" class="flash flash-error">
      <span class="octicon octicon-alert"></span>
      <a href="#" class="octicon octicon-x flash-close js-ajax-error-dismiss" aria-label="Dismiss error"></a>
      Something went wrong with that request. Please try again.
    </div>


      <script crossorigin="anonymous" src="https://assets-cdn.github.com/assets/frameworks-df03cb524192fbb325ef264ca1bdee425481db0aadf702dd6d209d1fa0ccf572.js"></script>
      <script async="async" crossorigin="anonymous" src="https://assets-cdn.github.com/assets/github/index-e321a5911341a3613eea06a9cc3f6ea636b3cdc377824313d67ad604a5e8d9e1.js"></script>
      
      
    <div class="js-stale-session-flash stale-session-flash flash flash-warn flash-banner hidden">
      <span class="octicon octicon-alert"></span>
      <span class="signed-in-tab-flash">You signed in with another tab or window. <a href="">Reload</a> to refresh your session.</span>
      <span class="signed-out-tab-flash">You signed out in another tab or window. <a href="">Reload</a> to refresh your session.</span>
    </div>
  </body>
</html>

