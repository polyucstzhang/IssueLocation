<extraction><id>#33</id><title>Buffers with a page full of unimportant messages shouldn't be marked unread</title><description> If all the messages in the initial backlog for a buffer are unimportant, but the last seen eid is behind another page of backlog, don't mark the buffer as unread.</description><comments>Buffers are already only marked unread if an event in memory returns true for isImportant, not sure what this issue is about? Happened on a server buffer. Maybe the isImportant check for server notices needs a look. Might have changed it recently on the js side https://www.irccloud.com/static/js/app/model/message.js Yeah it's quite out of date now.EventsDataSourcemessage.js The distinction this.get('server') !== undefined) is worth noting. If server is undefined it means the key is missing from json, if it's null it means it's there but has the explicit json value of null.*** Looking up your hostname notices for example have an explicit null server value (they're server notices but don't include the server hostname in the message), and no from. They're unimportant. There are other notices sent from a server that do include the hostname, they would also have a missing from and would therefore be unimportant.Notices from e.g. Chanserv or any other nick will have a from and no server value at all (undefined). They're only unimportant if they also have to_chan or to_bufferThinking about it now, we can probably just rely on the missing from value to determine unimportant messages and skip the || this.get('server') !== undefined) altogether.</comments></extraction>